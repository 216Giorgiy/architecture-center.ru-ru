---
title: Внедрение Azure. Средний уровень
description: Описание среднего уровня знаний, которым должны обладать сотрудники организации для внедрения Azure
author: petertay
ms.openlocfilehash: 227d9558647ed8076b2832d95e192f2f0c43b9db
ms.sourcegitcommit: 26b04f138a860979aea5d253ba7fecffc654841e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2018
ms.locfileid: "36206367"
---
# <a name="azure-cloud-adoption-guide-intermediate-overview"></a>Руководство по внедрению облака Azure. Общие сведения о среднем уровне

На этапе базового внедрения вы ознакомились с основными принципами управления ресурсами в Azure. Задача базового этапа — помочь начать внедрение Azure. При его прохождении вы узнали о развертывании простой рабочей нагрузки силами одной небольшой команды. В реальной среде у большинства крупных организаций есть много команд, которые одновременно работают над разными рабочими нагрузками. Как и следовало ожидать, простой модели управления недостаточно для более сложных сценариев организации процессов и разработки.

Целью промежуточного этапа внедрения Azure является разработка модели управления для нескольких команд, работающих над несколькими новыми рабочими нагрузками разработки для Azure.  

Этот этап рассчитан на следующую аудиторию в вашей организации:
- *Финансовый отдел.* Владелец финансовых обязательств в Azure, отвечающий за разработку политик и процедур для отслеживания расходов, связанных с потреблением ресурсов, в том числе выставление счетов и взимание средств за использование.
- *Центральный ИТ-отдел.* Отвечает за управление облачными ресурсами вашей организации, включая управление ресурсами и доступ, а также за работоспособность и мониторинг рабочей нагрузки.
- *Владелец общей инфраструктуры.* Технические роли, ответственные за сетевое подключение между локальной средой и облаком.
- *Отдел обеспечения безопасности.* Отвечает за внедрение политики безопасности, необходимой для расширения локальной границы безопасности с целью включения в нее Azure. Также он может быть владельцем инфраструктуры безопасности в Azure, предназначенной для хранения секретов.
- *Владелец рабочей нагрузки.* Ответственный за публикацию рабочей нагрузки в Azure. В зависимости от структуры команд разработчиков организации это может быть руководитель разработки, ведущий руководитель программы или ведущий инженер, ответственный за сборку. Процесс публикации может включать в себя развертывание ресурсов в Azure.
  - *Участник рабочей нагрузки.* Ответственный за публикацию рабочей нагрузки в Azure. Для мониторинга или настройки производительности ему может потребоваться доступ для чтения ресурсов Azure. Разрешения на создание, обновление или удаление ему не нужны.

## <a name="section-1-azure-concepts-for-multiple-workloads-and-multiple-teams"></a>Раздел 1. Основные понятия Azure для нескольких рабочих нагрузок и нескольких команд

На базовом этапе внедрения вы получили основное представление о внутренних компонентах Azure, а также о том, как создавать, читать, обновлять и удалять ресурсы. Вы также узнали об удостоверении и о том, что аутентификацию и авторизацию пользователей, которым необходим доступ к этим ресурсам, Azure доверяет только Azure Active Directory (AD).

Вы также начали изучать настройку инструментов управления Azure для управления ресурсами вашей организации Azure. На базовом этапе вы узнали, как управлять доступом одной команды к ресурсам, необходимым для развертывания простой рабочей нагрузки. В реальной среде организация будет состоять из нескольких команд, которые одновременно работают над несколькими рабочими нагрузками. 

Прежде чем начать, давайте разберемся, что же на самом деле из себя представляет **рабочая нагрузка**. Это термин, который обычно применяется для определения такой произвольной единицы функциональности, как приложение или служба. Мы рассматриваем рабочую нагрузку через призму артефактов кода, которые развертываются на сервере, а также в любых других необходимых службах, например базе данных. Это определение хорошо подходит для локального приложения или службы, но для облака его необходимо дополнить. 

Рабочая нагрузка в облаке включает в себя не только все артефакты, но и все облачные ресурсы. Облачные ресурсы включены в определение из-за концепции **инфраструктура как код**. Как вам уже известно из статьи "Пояснения. Принципы работы Azure", ресурсы в Azure развертываются службой оркестрации. Служба оркестрации предоставляет эту функциональность через интерфейс веб-API, который можно вызвать с помощью нескольких инструментов, например Powershell, интерфейса командной строки Azure и портала Azure. Это значит, что для машиночитаемых файлов можно указать ресурсы, которые могут храниться вместе с артефактами кода, связанными с приложением.

Это позволяет определить рабочую нагрузку с точки зрения артефактов кода и необходимых ресурсов облака, что в дальнейшем позволит **изолировать** рабочие нагрузки. Рабочая нагрузка может быть изолирована путем упорядочивания ресурсов, с помощью топологии сети или с применением других атрибутов. Целью изоляции рабочей нагрузки является связывание указанных ресурсов рабочей нагрузки с командой, чтобы она могла самостоятельно управлять всеми их аспектами. Это позволяет нескольким командам совместно использовать службы управления ресурсами Azure и предотвращает непреднамеренное удаление или изменение ресурсов друг друга.

Изоляция также позволяет применить другой принцип, известный как [DevOps](https://azure.microsoft.com/solutions/devops/). DevOps включает в себя способы разработки программного обеспечения, к которым можно отнести как разработку программного обеспечения, так и ИТ-операции, описанные выше, однако применение этого принципа максимально увеличивает использование автоматизации. Один из принципов DevOps известен как непрерывная интеграция и непрерывная доставка (CI/CD). Непрерывная интеграция подразумевает применение автоматизированных процессов сборки, которые запускаются каждый раз, когда разработчик фиксирует изменение кода. Непрерывная доставка, в свою очередь, подразумевает автоматизированные процессы, которые развертывают этот код в различных **средах**, например **среде разработки** для тестирования или **рабочей среде** для окончательного развертывания.

## <a name="section-2-governance-design-for-multiple-teams-and-multiple-workloads"></a>Раздел 2. Проектирование системы управления для нескольких команд и нескольких рабочих нагрузок

На [базовом этапе](/azure/architecture/cloud-adoption-guide/adoption-intro/overview) изучения внедрения облака Azure вы ознакомились с концепцией управления облаками. Вы научились проектировать простые модели управления для команды, работающей над одной рабочей нагрузкой. 

На промежуточном этапе вы будете изучать [Руководство по проектированию системы управления](governance-design-guide.md), в котором помимо базовых понятий объясняется работа с несколькими командами, рабочими нагрузками и средами. После изучения примеров из документа вы можете применять принципы проектирования для разработки и внедрения в модель управления организации.

## <a name="section-3-implementing-a-resource-management-model"></a>Раздел 3. Реализация модели управления ресурсами

Модель управления облаком организации представляет собой сплав инструментов управления доступом к ресурсам Azure, персонала и установленных вами правил управления доступом. В руководстве по управлению разработкой вы узнали о нескольких моделях управления доступом к ресурсам Azure. Давайте рассмотрим шаги, необходимые для реализации модели управления ресурсами с одной подпиской для каждой **общей инфраструктуры**, **рабочей среды** и среды **разработки**, описанные в руководстве по проектированию. **Владельцем подписки** для всех трех сред будет один человек. Каждая рабочая нагрузка будет изолирована в **группе ресурсов** с помощью **владельца рабочей нагрузки**, которому при добавлении назначается роль **участника**.

> [!NOTE]
> Дополнительную информацию о связи между учетными записями Azure и подписками можно узнать из статьи [Основные сведения о доступе к ресурсам в Azure][understand-resource-access-in-azure]. 

Выполните следующие действия.

1. Если у вашей организации нет учетной записи Azure, создайте [ее](/azure/active-directory/sign-up-organization). Пользователь, зарегистрировавший учетную запись Azure, становится ее администратором, поэтому руководство организации должно выбрать человека, который возьмет на себя эту роль. Он будет отвечать за:
    * создание подписок;
    * создание и администрирование клиентов [Azure Active Directory (AD)](/azure/active-directory/active-directory-whatis), в которых хранится удостоверение пользователя для этих подписок.    
2. Руководство организации определяет, кто из сотрудников несет ответственность за следующие аспекты:
    * Управление удостоверением пользователя. [Клиент Microsoft Azure Active Directory](/azure/active-directory/develop/active-directory-howto-tenant) создается по умолчанию при создании учетной записи Azure для организации, а администратор учетной записи по умолчанию добавляется в качестве [глобального администратора Microsoft Azure Active Directory](/azure/active-directory/active-directory-assign-admin-roles-azure-portal#details-about-the-global-administrator-role). Ваша организация может выбрать другого пользователя для управления удостоверением пользователя, [назначив ему роль глобального администратора Microsoft Azure Active Directory](/azure/active-directory/active-directory-users-assign-role-azure-portal). 
    * Подписки. Благодаря этому такие пользователи могут:
        * управлять расходами, связанными с использованием ресурсов в этой подписке;
        * реализовывать и поддерживать модель минимального разрешения для доступа к ресурсам;
        * отслеживать ограничения служб.
    * Общие службы инфраструктуры (при использовании вашей организацией этой модели). Вследствие этого такие пользователи несут ответственность за:
        * подключение к локальной сети Azure; 
        * владение сетевым подключением в Azure через пиринг виртуальной сети.
    * Владельцы рабочих нагрузок. 
3. Глобальный администратор Microsoft Azure Active Directory [создает учетные записи пользователей](/azure/active-directory/add-users-azure-active-directory) для:
    * сотрудников, которые будут выступать в роли **владельцев подписки** для каждой подписки, связанной со средой (обратите внимание, что это необходимо, только если на **администратора служб** подписки не будут возложены функции по управлению доступом к ресурсам для каждой подписки или среды);
    * сотрудников, которые будут **пользователями сетевых операций**;
    * сотрудников, которые будут **владельцами рабочих нагрузок**.
4. Администратор учетной записи Azure с помощью [портала управления учетными записями Azure](https://account.azure.com) создает следующие три подписки:
    * подписку для среды **общей инфраструктуры**;
    * подписку для **рабочей** среды; 
    * подписку для среды **разработки**. 
5. Администратор учетных записей Azure [добавляет к каждой подписке ее владельца](/azure/billing/billing-add-change-azure-subscription-administrator#add-an-rbac-owner-admin-for-a-subscription-in-azure-portal).
6. Чтобы запросить создание групп ресурсов, создайте процесс утверждения для **владельцев рабочей нагрузки**. Процесс утверждения может быть реализован по-разному, например по электронной почте или с помощью инструмента управления рабочими процессами, такими как [рабочие процессы SharePoint](https://support.office.com/article/introduction-to-sharepoint-workflow-07982276-54e8-4e17-8699-5056eff4d9e3). Процесс утверждения может состоять из следующих шагов:  
    * **Владелец рабочей нагрузки** готовит спецификацию необходимых ресурсов Azure для среды **разработки** или **рабочей** среды (или из обеих) и отправляет ее **владельцу подписки**.
    * **Владелец подписки** проверяет спецификацию и запрашиваемые ресурсы, чтобы убедиться в их применимости для запланированного использования. Например, он проверяет, верны ли запрошенные [размеры виртуальных машин](/azure/virtual-machines/windows/sizes).
    * Если запрос не будет подтвержден, **владелец рабочей нагрузки** получит уведомление. Если запрос подтвержден, **владелец подписки** [создает запрашиваемую группу ресурсов](/azure/azure-resource-manager/resource-group-portal#manage-resource-groups), следуя [соглашению об именовании](/azure/architecture/best-practices/naming-conventions) в организации, [добавляет **владельца рабочей нагрузки**](/azure/role-based-access-control/role-assignments-portal#add-access) с [ролью **участник**](/azure/role-based-access-control/built-in-roles#contributor) и отправляет уведомление **владельцу рабочей нагрузки** о том, что группа ресурсов создана.
7. Чтобы запросить пиринговое соединение с виртуальной сетью у владельца общей инфраструктуры, для владельцев рабочей нагрузки создается процесс утверждения. Как и на предыдущем этапе, этот процесс утверждения может быть реализован с использованием электронной почты или инструмента управления процессами.

После внедрения своей модели управления можно развернуть службы общей инфраструктуры.

## <a name="section-4-deploy-shared-infrastructure-services"></a>Раздел 4. Развертывание служб общей инфраструктуры

Ваша организация может использовать несколько [эталонных гибридных сетевых архитектур](/azure/architecture/reference-architectures/hybrid-networking/). Каждая из этих эталонных архитектур включает развертывание, для которого необходим идентификатор подписки. Во время процесса развертывания подписки, связанной с вашей средой **общей инфраструктуры**, необходимо указать ее идентификатор. Также необходимо отредактировать файлы шаблонов, чтобы указать группу ресурсов, которой управляет пользователь, ответственный за **сетевые операции**. Кроме того, в развертывании можно использовать группы ресурсов по умолчанию и добавить к ним пользователя, ответственного за **сетевые операции**, с ролью **участника**.

<!-- links -->
[understand-resource-access-in-azure]: /azure/role-based-access-control/rbac-and-directory-admin-roles