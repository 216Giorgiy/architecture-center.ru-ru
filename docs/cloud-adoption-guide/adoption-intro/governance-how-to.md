---
title: Руководство по проектированию системы управления Azure
description: Руководство по настройке элементов системы управления, что позволит пользователям развертывать простые рабочие нагрузки.
author: petertay
ms.openlocfilehash: 88cd24a46a6bdaca4e0dd18706af1f7e3fe3bce2
ms.sourcegitcommit: c4106b58ad08f490e170e461009a4693578294ea
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/10/2018
ms.locfileid: "43016040"
---
# <a name="azure-governance-design-guide"></a>Руководство по проектированию системы управления Azure

Это руководство по проектированию предназначено для сотрудников *центрального ИТ-отдела* организаций. *Центральный ИТ-отдел* отвечает за проектирование и реализацию архитектуры системы управления облачными ресурсами организации. Из статьи [Знакомство с системой управления облачными ресурсами](governance-explainer.md) вы узнали, что система управления ссылается на текущий процесс управления, мониторинга и аудита используемых ресурсов Azure для достижения целей и требований организации.

В этом руководстве рассматривается процесс проектирования архитектуры системы управления организации с учетом гипотетических целей и требований. Кроте того, здесь рассматривается процесс настройки средств системы управления Azure в соответствии с этими требованиями. 

Цель базового этапа внедрения заключалась в развертывании простой рабочей нагрузки в Azure. В результате формируются следующие требования:
* Реализация механизма управления удостоверениями одного **владельца рабочей нагрузки**, который отвечает за развертывание и обслуживание простой рабочей нагрузки. Владельцу рабочей нагрузки требуется разрешение на создание, чтение, обновление и удаление ресурсов, а также разрешение на делегирование этих прав другим пользователям в системе управления удостоверениями.
* Реализация механизма управления всеми ресурсами простой рабочей нагрузки как одной единицей.

## <a name="licensing-azure"></a>Лицензирование Azure

Прежде чем перейти к проектированию модели системы управления, важно понять, как лицензируется Azure. Это обусловлено тем, что административные учетные записи, связанные с лицензией Azure, имеют высший уровень доступа ко всем ресурсам Azure. Эти учетные записи формируют основу модели системы управления.  

> [!NOTE]
> Если организация имеет [Соглашение Microsoft Enterprise](https://www.microsoft.com/en-us/licensing/licensing-programs/enterprise.aspx), которое не включает Azure, эту службу можно добавить, приняв на себя предварительные денежные обязательства. Дополнительные сведения см. на странице [Лицензирование Azure для корпоративных пользователей](https://azure.microsoft.com/pricing/enterprise-agreement/). 

При добавлении Azure в Соглашение Enterprise организация получает запрос на создание **учетной записи Azure**. Вместе с учетной записью Azure создается **ее владелец**, а также клиент Azure Active Directory (Azure AD) с учетной записью **глобального администратора**. Клиент Azure AD — это логическая структура, представляющая собой защищенный выделенный экземпляр Azure AD.

![Учетная запись Azure с менеджером по работе с клиентами и глобальным администратором Azure AD](../_images/governance-3-0.png)
*Рис. 1. Учетная запись Azure с менеджером учетной записи и глобальным администратором Microsoft Azure Active Directory.*

## <a name="identity-management"></a>Управление удостоверениями

Azure доверяет аутентификацию пользователей и предоставление им доступа к ресурсам только [Azure AD](/azure/active-directory). Поэтому Azure AD — это система управления удостоверениями. Глобальный администратор Azure AD имеет наивысший уровень разрешений и может выполнять все действия, связанные с удостоверениями, в том числе создание пользователей и назначение разрешений. 

Одно из требований заключается в реализации механизма управления удостоверениями одного **владельца рабочей нагрузки**, который отвечает за развертывание и обслуживание простой рабочей нагрузки. Владельцу рабочей нагрузки требуется разрешение на создание, чтение, обновление и удаление ресурсов, а также разрешение на делегирование этих прав другим пользователям в системе управления удостоверениями.

Глобальный администратор Azure AD создает **учетную запись** **владельца рабочей нагрузки**:

![Глобальный администратор Azure AD создает учетную запись владельца рабочей нагрузки](../_images/governance-1-2.png)
*Рис. 2. Глобальный администратор Azure AD создает учетную запись пользователя-владельца рабочей нагрузки.*

Разрешения на доступ к ресурсу нельзя присвоить, если этот пользователь не добавлен в **подписку**. Мы сделаем это в следующих двух разделах. 

## <a name="resource-management-scope"></a>Область управления ресурсами

По мере роста количества развернутых в организации ресурсов растет также и сложность управления ими. Azure реализует логическую иерархию контейнеров. Это позволяет управлять ресурсами организации в группах с различными уровнями детализации, также известными как **области**. 

Верхний уровень области управления ресурсами — это **подписка**. Подписку создает **владелец учетной записи** Azure, который берет на себя финансовое обязательство и несет ответственность за оплату всех включенных в эту подписку ресурсов:

![Владелец учетной записи Azure создает подписку](../_images/governance-1-3.png)
*Рис. 3. Владелец учетной записи Azure создает подписку.*

При создании подписки **владелец учетной записи** Azure связывает с ней клиент Azure AD. С помощью этого клиента выполняется аутентификация и авторизация пользователей:

![Владелец учетной записи Azure связывает клиент Azure AD с подпиской](../_images/governance-1-4.png)
*Рис. 4. Владелец учетной записи Azure связывает клиент Azure AD с подпиской.*

Как вы могли заметить, сейчас с подпиской не связано ни одного пользователя. Это означает, что ни один пользователь не имеет разрешений на управление ресурсами. На самом деле **владелец учетной записи** также является владельцем подписки и имеет разрешения на выполнение любых действий с ресурсами в подписке. Однако на практике **владелец учетной записи**, скорее всего, связан с финансами и не несет ответственности за создание, чтение, обновление и удаление ресурсов. Эти задачи должен выполнять **владелец рабочей нагрузки**. Таким образом в подписку нужно добавить **владельца рабочей нагрузки** и назначить ему соответствующие разрешения.

Так как сейчас только **владелец учетной записи** имеет разрешение на добавление **владельца рабочей нагрузки** в подписку, этот пользователь должен **сделать следующее**:

![Владелец учетной записи Azure добавляет **владельца рабочей нагрузки** в подписку](../_images/governance-1-5.png)
*Рис. 5. Владелец учетной записи Azure добавляет **владельца рабочей нагрузки** в подписку.*

**Владелец учетной записи** Azure предоставляет разрешения **владельцу рабочей нагрузки**, назначив ему роль [управления доступом на основе ролей (RBAC)](/azure/role-based-access-control/). Роль RBAC предоставляет набор разрешений, которые **владелец рабочей нагрузки** имеет в отдельном типе ресурса или в их наборе.

Обратите внимание, что в этом примере **владелец учетной записи** присвоил [встроенную роль **владельца**](/azure/role-based-access-control/built-in-roles#owner): 

![**Владелец рабочей нагрузки** присвоил встроенную роль владельца](../_images/governance-1-6.png)
*Рис 6. Владелец рабочей нагрузки присвоил встроенную роль владельца.*

Встроенная роль **владельца** предоставляет все разрешения **владельцу рабочей нагрузки** в области подписки. 

> [!IMPORTANT]
> **Владелец учетной записи** Azure отвечает за финансовые обязательства, связанные с подпиской, но **владелец рабочей нагрузки** имеет те же разрешения. **Владелец учетной записи** должен доверять **владельцу рабочей нагрузки** в вопросах развертывания ресурсов, которые находятся в пределах бюджета подписки.

Следующий уровень области управления — это **группа ресурсов**. Группа ресурсов — это логический контейнер ресурсов. Операции, выполняемые на уровне группы, применяются ко всем ресурсам в ней. Кроме того, важно отметить, что каждый пользователь наследует разрешения со следующего более высокого уровня, если эти разрешения явно не изменены в этой области. 

Чтобы показать этот процесс, рассмотрим что происходит, когда **владелец рабочей нагрузки** создает группу ресурсов:

![**Владелец рабочей нагрузки** создает группу ресурсов](../_images/governance-1-7.png)
*Рис. 7. Владелец рабочей нагрузки создает группу ресурсов и наследует встроенную роль владельца в пределах области группы ресурсов.*

И опять же, встроенная роль **владельца** предоставляет все разрешения **владельцу рабочей нагрузки** в области группы ресурсов. Как уже говорилось ранее, эта роль наследуется с уровня подписки. Другая роль, назначенная этому пользователю в этой области, применяется только к этой области.

Самый низкий уровень области управления — это **ресурс**. Операции, выполняемые на уровне ресурса, применяются только к самому ресурсу. И опять же, разрешения на уровне ресурсов наследуются из области группы ресурсов. Например, давайте рассмотрим, что произойдет, если **владелец рабочей нагрузки** развернет [виртуальную сеть](/azure/virtual-network/virtual-networks-overview) в группе ресурсов:

![**Владелец рабочей нагрузки** создает ресурс](../_images/governance-1-8.png)
*Рис. 8. Владелец рабочей нагрузки создает ресурс и наследует встроенную роль владельца в пределах области ресурсов.*

**Владелец рабочей нагрузки** наследует роль владельца в области ресурса, а это означает, что владелец рабочей нагрузки имеет все разрешения в виртуальной сети. 

## <a name="summary"></a>Сводка

Из этой статьи вы узнали следующее:

* Azure доверяет управление удостоверениями только Azure AD.
* Подписка имеет самый высокий уровень управления ресурсами, и каждая подписка связана с клиентом Azure AD. Только пользователи в связанном клиенте Azure AD имеют доступ к ресурсам в подписке.
* Есть три уровня области управления ресурсами: уровень подписки, группы ресурсов и ресурсов. Разрешения назначаются в каждой области с использованием ролей RBAC. Области нижнего уровня наследуют роли RBAC из областей более высокого уровня.

## <a name="next-steps"></a>Дополнительная информация

Вернитесь к статье [Внедрение Azure. Базовый уровень](overview.md) и узнайте, как реализовать эту модель системы управления. Затем выберите тип рабочей нагрузки и узнайте, как развернуть его.