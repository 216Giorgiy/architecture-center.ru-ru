---
title: Основные сведения об управлении доступом к ресурсам в Azure
description: 'Сведения о компонентах управления доступом к ресурсам в Azure: Azure Resource Manager, подписках, ресурсах и их группах.'
author: petertay
ms.openlocfilehash: 02e25e943822ba065d360d687d34283d86a805bd
ms.sourcegitcommit: c704d5d51c8f9bbab26465941ddcf267040a8459
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/24/2018
ms.locfileid: "39229581"
---
# <a name="understanding-resource-access-management-in-azure"></a>Основные сведения об управлении доступом к ресурсам в Azure

Из статьи [Знакомство с системой управления облачными ресурсами](governance-explainer.md) вы узнали, что система управления ссылается на текущий процесс управления, мониторинга и аудита используемых ресурсов Azure для достижения целей и требований организации. Прежде чем переходить к изучению принципов проектирования модели системы управления, важно разобраться с элементами управления доступом к ресурсам в Azure. Конфигурация этих элементов управления доступом к ресурсами — это основа модели системы управления.

Сначала давайте рассмотрим принцип развертывания ресурсов в Azure. 

## <a name="what-is-an-azure-resource"></a>Ресурсы Azure

В Azure **ресурс** — это сущность под управлением Azure. Например, к ресурсам относятся виртуальные машины, виртуальные сети и учетные записи хранения.

![](../_images/governance-1-9.png)   
*Рис. 1. Ресурс.*

## <a name="what-is-an-azure-resource-group"></a>Что такое группа ресурсов Azure?

Каждый ресурс в Azure должен принадлежать [группе ресурсов](/azure/azure-resource-manager/resource-group-overview#resource-groups). Группа ресурсов — это логическая конструкция, в которой сгруппированы несколько ресурсов, что позволяет управлять ими как единой сущностью. Например, ресурсы с аналогичным жизненным циклом, например ресурсы [n-уровневых приложений](/azure/architecture/guide/architecture-styles/n-tier), можно создавать или удалять как группу. 

![](../_images/governance-1-10.png)   
*Рис. 2. Группа ресурсов, которая содержит ресурс.* 

Группы и ресурсы в них связаны с **подпиской** Azure. 

## <a name="what-is-an-azure-subscription"></a>Подписка Azure

Подписка Azure, как и группа ресурсов, — это логическая конструкция, в которой сгруппированы группы и ресурсы в них. Тем не менее подписка Azure также связана с элементами управления, используемыми Azure Resource Manager. Что это означает? Давайте рассмотрим более подробно Azure Resource Manager, чтобы больше узнать о связи между ним и подпиской Azure.

![](../_images/governance-1-11.png)   
*Рис. 3. Подписка Azure.*

## <a name="what-is-azure-resource-manager"></a>Azure Resource Manager

Из статьи [Пояснения. Принцип работы Azure](azure-explainer.md) вы узнали, что Azure включает внешний интерфейс со многими службами, которые оркестрируют работу всех функции Azure. К этим службам относится [Azure Resource Manager](/azure/azure-resource-manager/). В этой службе размещен интерфейс REST API, с помощью которого клиенты управляют ресурсами. 

![](../_images/governance-1-12.png)   
*Рис. 4. Azure Resource Manager.*

На следующем рисунке показаны три клиента: [PowerShell](/powershell/azure/overview),[портал Azure](https://portal.azure.com) и [ интерфейс командной строки (CLI) Azure](/cli/azure):

![](../_images/governance-1-13.png)   
*Рис. 5. Клиенты Azure подключаются к REST API Azure Resource Manager.*

Эти клиенты подключаются к Azure Resource Manager через REST API. Однако Azure Resource Manager не содержит функциональность, чтобы управлять ресурсами напрямую. Вместо этого большинство типов ресурсов в Azure имеют собственный [**поставщик ресурсов**](/azure/azure-resource-manager/resource-group-overview#terminology). 

![](../_images/governance-1-14.png)   
*Рис. 6. Поставщики ресурсов Azure.*

Когда клиент отправляет запрос на управление определенным ресурсом, Azure Resource Manager подключается к поставщику ресурсов этого типа ресурса, чтобы выполнить запрос. Например, если клиент отправляет запрос на управление ресурсами виртуальной машины, Azure Resource Manager подключается к поставщику ресурсов **Microsoft.compute**. 

![](../_images/governance-1-15.png)   
**Рис. 7. Azure Resource Manager подключается к поставщику ресурсов **Microsoft.compute**, чтобы управлять ресурсом, указанным в запросе клиента.*

Обратите внимание на то, что Azure Resource Manager требует, чтобы клиент указал идентификатор подписки и группы ресурсов. Это позволит ему управлять ресурсами виртуальной машины. 

Теперь, когда вы имеете представление о принципе работы Azure Resource Manager, давайте рассмотрим, как используемые этой службой элементы управления связаны с подпиской Azure. Перед выполнением Azure Resource Manager любого запроса на управление ресурсом проверяется набор элементов управления. 

Сначала проверяется, выполняется ли запрос проверенным пользователем. Azure Resource Manager имеет отношения доверия с [Azure Active Directory (Azure AD)](/azure/active-directory/), что позволяет обеспечить механизм удостоверения пользователя.

![](../_images/governance-1-16.png)   
*Рис. 8. Azure Active Directory.*

В Azure AD данные пользователей сегментируются по **клиентам**. Клиент — это логическая структура, представляющая собой защищенный выделенный экземпляр Azure AD, который, как правило, связан с организацией. Каждая подписка связана с клиентом Azure AD.

![](../_images/governance-1-17.png)   
*Рис. 9. Клиент Azure AD, связанный с подпиской.*

Каждый запрос клиента на управление ресурсом в определенной подписке требует наличия у пользователя учетной записи в связанном клиенте Azure AD. 

Следующим проверяется, имеет ли пользователь необходимые права на выполнение запроса. Разрешения присваиваются пользователям с использованием механизма [управления доступом на основе ролей (RBAC)](/azure/role-based-access-control/).

![](../_images/governance-1-18.png)   
*Рис. 10. Каждому пользователю в клиенте назначается одна или несколько ролей RBAC.*

Роль RBAC указывает набор разрешений, которые пользователь имеет в определенном ресурсе. Эти разрешения применяются после назначения роли пользователю. Например, пользователь со [встроенной ролью **владельца**](/azure/role-based-access-control/built-in-roles#owner) может выполнять любые действия в ресурсе.

На следующем этапе проверяется, разрешен ли запрос согласно параметрам, заданным в [политике ресурсов Azure](/azure/azure-policy/). Политики ресурсов Azure указывают операции, разрешенные в конкретном ресурсе. Например, в соответствии с политикой ресурсов Azure пользователи смогут развертывать только определенные типы виртуальной машины.

![](../_images/governance-1-19.png)   
*Рис. 11. Политика ресурсов Azure.*

На следующем этапе проверяется, не превышает ли запрос [ограничения подписки Azure](/azure/azure-subscription-service-limits). Например, каждая подписка может максимально содержать 980 групп ресурсов. Если получен запрос на развертывание групп ресурсов, которые превышают это ограничение, он отклоняется.

![](../_images/governance-1-20.png)   
*Рис. 12. Ограничения ресурсов Azure.* 

В последнюю очередь проверяется, связан ли запрос в рамках финансовых обязательств с подпиской. Например, если отправляется запрос на развертывание виртуальной машины, Azure Resource Manager проверяет платежную информацию в подписке.

![](../_images/governance-1-21.png)   
*Рис. 13. Финансовое обязательство, связанное с подпиской.*

# <a name="summary"></a>Сводка

Из этой статьи вы узнали об управлении доступом к ресурсам в Azure с помощью Azure Resource Manager.

# <a name="next-steps"></a>Дополнительная информация

После того как вы узнали об управлении доступом к ресурсам в Azure, ознакомьтесь со сведениями о [проектировании модели системы управления](governance-how-to.md) с помощью этих служб.