---
title: Схема отдельных серверных частей для каждого интерфейса
description: Создание отдельных серверных служб, которые будут использоваться конкретными внешними приложениями или интерфейсами.
author: dragon119
ms.date: 06/23/2017
ms.openlocfilehash: a0dbc9ab58aa218f6faf40b70dad1bdc22d71458
ms.sourcegitcommit: 94d50043db63416c4d00cebe927a0c88f78c3219
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/28/2018
ms.locfileid: "47428794"
---
# <a name="backends-for-frontends-pattern"></a><span data-ttu-id="c79e9-103">Схема отдельных серверных частей для каждого интерфейса</span><span class="sxs-lookup"><span data-stu-id="c79e9-103">Backends for Frontends pattern</span></span>

<span data-ttu-id="c79e9-104">Создайте отдельные серверные службы, которые будут использоваться конкретными внешними приложениями или интерфейсами.</span><span class="sxs-lookup"><span data-stu-id="c79e9-104">Create separate backend services to be consumed by specific frontend applications or interfaces.</span></span> <span data-ttu-id="c79e9-105">Эта схема полезна в тех случаях, когда нужно избежать настройки одной серверной службы под несколько интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="c79e9-105">This pattern is useful when you want to avoid customizing a single backend for multiple interfaces.</span></span> <span data-ttu-id="c79e9-106">Этот шаблон впервые описал Сэм Ньюмен (Sam Newman).</span><span class="sxs-lookup"><span data-stu-id="c79e9-106">This pattern was first described by Sam Newman.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="c79e9-107">Контекст и проблема</span><span class="sxs-lookup"><span data-stu-id="c79e9-107">Context and problem</span></span>

<span data-ttu-id="c79e9-108">Предположим, что изначально создавалось приложение с классическим веб-интерфейсом.</span><span class="sxs-lookup"><span data-stu-id="c79e9-108">An application may initially be targeted at a desktop web UI.</span></span> <span data-ttu-id="c79e9-109">Как обычно, параллельно разрабатывается серверная служба, которая предоставляет возможности, необходимые именно этому пользовательскому интерфейсу.</span><span class="sxs-lookup"><span data-stu-id="c79e9-109">Typically, a backend service is developed in parallel that provides the features needed for that UI.</span></span> <span data-ttu-id="c79e9-110">По мере роста числа пользователей создается мобильное приложение, которое должно взаимодействовать с той же серверной службой.</span><span class="sxs-lookup"><span data-stu-id="c79e9-110">As the application's user base grows, a mobile application is developed that must interact with the same backend.</span></span> <span data-ttu-id="c79e9-111">Теперь серверная служба становится универсальной и обслуживает потребности сразу двух интерфейсов: классического для настольных компьютеров и нового для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="c79e9-111">The backend service becomes a general-purpose backend, serving the requirements of both the desktop and mobile interfaces.</span></span>

<span data-ttu-id="c79e9-112">Но при этом возможности мобильных устройств существенно отличаются от возможностей браузеров на компьютерах. У них другие размеры экранов, производительность и ограничения по отображению информации.</span><span class="sxs-lookup"><span data-stu-id="c79e9-112">But the capabilities of a mobile device differ significantly from a desktop browser, in terms of screen size, performance, and display limitations.</span></span> <span data-ttu-id="c79e9-113">Это означает, что отличаются и требования к серверной службе для мобильного приложения и веб-интерфейса.</span><span class="sxs-lookup"><span data-stu-id="c79e9-113">As a result, the requirements for a mobile application backend differ from the desktop web UI.</span></span> 

<span data-ttu-id="c79e9-114">Такие отличия приводят к тому, что требования к серверной части становятся противоречивыми.</span><span class="sxs-lookup"><span data-stu-id="c79e9-114">These differences result in competing requirements for the backend.</span></span> <span data-ttu-id="c79e9-115">Разработчику приходится часто и существенно изменять систему, чтобы поддерживать актуальность серверной службы как для веб-интерфейса, так и для мобильного приложения.</span><span class="sxs-lookup"><span data-stu-id="c79e9-115">The backend requires regular and significant changes to serve both the desktop web UI and the mobile application.</span></span> <span data-ttu-id="c79e9-116">При этом над интерфейсами часто работают разные команды разработчиков, и в результате серверная части становится узким местом в процессе разработки.</span><span class="sxs-lookup"><span data-stu-id="c79e9-116">Often, separate interface teams work on each frontend, causing the backend to become a bottleneck in the development process.</span></span> <span data-ttu-id="c79e9-117">Противоречивые требования к обновлениям и необходимость поддерживать работоспособность обоих интерфейсов вынуждают тратить слишком много усилий на этот единый ресурс.</span><span class="sxs-lookup"><span data-stu-id="c79e9-117">Conflicting update requirements, and the need to keep the service working for both frontends, can result in spending a lot of effort on a single deployable resource.</span></span>

![](./_images/backend-for-frontend.png) 

<span data-ttu-id="c79e9-118">По мере увеличения трудоемкости разработки серверной службы иногда создается даже отдельная группа разработчиков для обслуживания этой серверной службы и управления ею.</span><span class="sxs-lookup"><span data-stu-id="c79e9-118">As the development activity focuses on the backend service, a separate team may be created to manage and maintain the backend.</span></span> <span data-ttu-id="c79e9-119">Все эти факторы приводят к разрыву связей между разработчиками интерфейсной и серверной частей и полностью переносят на разработчиков серверной службы ответственность за выполнение несогласованных требований разработчиков интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="c79e9-119">Ultimately, this results in a disconnect between the interface and backend development teams, placing a burden on the backend team to balance the competing requirements of the different UI teams.</span></span> <span data-ttu-id="c79e9-120">Но если разработчики одного из интерфейсов требуют внести изменения в серверную часть, эти изменения необходимо согласовать с другими командами разработки интерфейса, прежде чем реализовать их в серверной службе.</span><span class="sxs-lookup"><span data-stu-id="c79e9-120">When one interface team requires changes to the backend, those changes must be validated with other interface teams before they can be integrated into the backend.</span></span> 

## <a name="solution"></a><span data-ttu-id="c79e9-121">Решение</span><span class="sxs-lookup"><span data-stu-id="c79e9-121">Solution</span></span>

<span data-ttu-id="c79e9-122">Создайте отдельную серверную часть для каждого пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="c79e9-122">Create one backend per user interface.</span></span> <span data-ttu-id="c79e9-123">Теперь поведение и производительность каждой серверной части можно привести в соответствие требованиям интерфейса среды, при этом эти изменения не повлияют на взаимодействие с другими интерфейсами.</span><span class="sxs-lookup"><span data-stu-id="c79e9-123">Fine tune the behavior and performance of each backend to best match the needs of the frontend environment, without worrying about affecting other frontend experiences.</span></span>

![](./_images/backend-for-frontend-example.png) 

<span data-ttu-id="c79e9-124">Поскольку каждая серверная часть работает только с одним интерфейсом, ее можно оптимизировать для этого интерфейса.</span><span class="sxs-lookup"><span data-stu-id="c79e9-124">Because each backend is specific to one interface, it can be optimized for that interface.</span></span> <span data-ttu-id="c79e9-125">В результате она станет менее крупной и менее громоздкой, а скорее всего и более быстрой, чем универсальная серверная часть, в которой пересекаются требования для всех интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="c79e9-125">As a result, it will be smaller, less complex, and likely faster than a generic backend that tries to satisfy the requirements for all interfaces.</span></span> <span data-ttu-id="c79e9-126">Каждая команда разработчиков интерфейса получает возможность автономно управлять требованиями к своей серверной части, и не зависит от проблем, связанных с разработкой единой серверной части.</span><span class="sxs-lookup"><span data-stu-id="c79e9-126">Each interface team has autonomy to control their own backend and doesn't rely on a centralized backend development team.</span></span> <span data-ttu-id="c79e9-127">Это дает гибкость в выборе языков, последовательности выпусков, приоритетах рабочих нагрузок и интеграции функций для серверной части.</span><span class="sxs-lookup"><span data-stu-id="c79e9-127">This gives the interface team flexibility in language selection, release cadence, prioritization of workload, and feature integration in their backend.</span></span>

<span data-ttu-id="c79e9-128">Дополнительные сведения см. в статье [Pattern: Backends For Frontends](https://samnewman.io/patterns/architectural/bff/) (Схема отдельных серверных частей для каждого интерфейса).</span><span class="sxs-lookup"><span data-stu-id="c79e9-128">For more information, see [Pattern: Backends For Frontends](https://samnewman.io/patterns/architectural/bff/).</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="c79e9-129">Проблемы и рекомендации</span><span class="sxs-lookup"><span data-stu-id="c79e9-129">Issues and considerations</span></span>

- <span data-ttu-id="c79e9-130">Оцените, сколько потребуется серверных служб.</span><span class="sxs-lookup"><span data-stu-id="c79e9-130">Consider how many backends to deploy.</span></span>
- <span data-ttu-id="c79e9-131">Если несколько разных интерфейсов (например, разные мобильные клиенты) будут создавать одинаковые запросы, оцените наиболее подходящий для них вариант: отдельная серверная часть для каждого интерфейса или единая серверная часть.</span><span class="sxs-lookup"><span data-stu-id="c79e9-131">If different interfaces (such as mobile clients) will make the same requests, consider whether it is necessary to implement a backend for each interface, or if a single backend will suffice.</span></span>
- <span data-ttu-id="c79e9-132">Реализация этой схемы чаще всего приводит к дублированию кода в службах.</span><span class="sxs-lookup"><span data-stu-id="c79e9-132">Code duplication across services is highly likely when implementing this pattern.</span></span>
- <span data-ttu-id="c79e9-133">Серверная служба, ориентированная на конкретный интерфейс, должна содержать только логику и поведение, имеющие отношение к этому клиенту.</span><span class="sxs-lookup"><span data-stu-id="c79e9-133">Frontend-focused backend services should only contain client-specific logic and behavior.</span></span> <span data-ttu-id="c79e9-134">Общую бизнес-логику и другие глобальные компоненты следует реализовать в другой части приложения.</span><span class="sxs-lookup"><span data-stu-id="c79e9-134">General business logic and other global features should be managed elsewhere in your application.</span></span>
- <span data-ttu-id="c79e9-135">Подумайте о том, как эта схема повлияет на распределение обязанностей в команде разработчиков.</span><span class="sxs-lookup"><span data-stu-id="c79e9-135">Think about how this pattern might be reflected in the responsibilities of a development team.</span></span>
- <span data-ttu-id="c79e9-136">Оцените, сколько времени потребуется для ее реализации.</span><span class="sxs-lookup"><span data-stu-id="c79e9-136">Consider how long it will take to implement this pattern.</span></span> <span data-ttu-id="c79e9-137">Не приведет ли создание новой серверной службы к появлению технического долга, пока вы продолжаете поддерживать существующую универсальную серверную часть?</span><span class="sxs-lookup"><span data-stu-id="c79e9-137">Will the effort of building the new backends incur technical debt, while you continue to support the existing generic backend?</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="c79e9-138">Когда следует использовать этот шаблон</span><span class="sxs-lookup"><span data-stu-id="c79e9-138">When to use this pattern</span></span>

<span data-ttu-id="c79e9-139">Используйте этот шаблон в следующих случаях:</span><span class="sxs-lookup"><span data-stu-id="c79e9-139">Use this pattern when:</span></span>

- <span data-ttu-id="c79e9-140">если поддержка единой или универсальной серверной службы приводит к существенным издержкам на разработку;</span><span class="sxs-lookup"><span data-stu-id="c79e9-140">A shared or general purpose backend service must be maintained with significant development overhead.</span></span>
- <span data-ttu-id="c79e9-141">если вы хотите оптимизировать серверную часть под требования конкретных интерфейсов;</span><span class="sxs-lookup"><span data-stu-id="c79e9-141">You want to optimize the backend for the requirements of specific client interfaces.</span></span>
- <span data-ttu-id="c79e9-142">если в универсальную серверную часть вносятся изменения для поддержки нескольких интерфейсов;</span><span class="sxs-lookup"><span data-stu-id="c79e9-142">Customizations are made to a general-purpose backend to accommodate multiple interfaces.</span></span>
- <span data-ttu-id="c79e9-143">если другой язык разработки лучше подходит для поддержки дополнительного пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="c79e9-143">An alternative language is better suited for the backend of a different user interface.</span></span>

<span data-ttu-id="c79e9-144">Эту схему не стоит применять в следующих случаях:</span><span class="sxs-lookup"><span data-stu-id="c79e9-144">This pattern may not be suitable:</span></span>

- <span data-ttu-id="c79e9-145">если интерфейсы создают одинаковые или очень похожие запросы к серверной части;</span><span class="sxs-lookup"><span data-stu-id="c79e9-145">When interfaces make the same or similar requests to the backend.</span></span>
- <span data-ttu-id="c79e9-146">если существует только один интерфейс для взаимодействия с серверной частью.</span><span class="sxs-lookup"><span data-stu-id="c79e9-146">When only one interface is used to interact with the backend.</span></span>

## <a name="related-guidance"></a><span data-ttu-id="c79e9-147">Связанные руководства</span><span class="sxs-lookup"><span data-stu-id="c79e9-147">Related guidance</span></span>

- [<span data-ttu-id="c79e9-148">Схема агрегирования на шлюзе</span><span class="sxs-lookup"><span data-stu-id="c79e9-148">Gateway Aggregation pattern</span></span>](./gateway-aggregation.md)
- [<span data-ttu-id="c79e9-149">Схема разгрузки шлюза</span><span class="sxs-lookup"><span data-stu-id="c79e9-149">Gateway Offloading pattern</span></span>](./gateway-offloading.md)
- [<span data-ttu-id="c79e9-150">Схема маршрутизации шлюза</span><span class="sxs-lookup"><span data-stu-id="c79e9-150">Gateway Routing pattern</span></span>](./gateway-routing.md)


