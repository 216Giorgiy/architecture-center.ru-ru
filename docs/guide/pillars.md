---
title: "Основные аспекты качества программного обеспечения"
description: "Здесь описаны следующие пять основных аспектов качества программного обеспечения: масштабируемость, доступность, устойчивость, управление и безопасность."
author: MikeWasson
ms.openlocfilehash: 1d5e30602cafa0d39f92de3101974e77ae258595
ms.sourcegitcommit: a7aae13569e165d4e768ce0aaaac154ba612934f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/30/2018
---
# <a name="pillars-of-software-quality"></a>Основные аспекты качества программного обеспечения 

Чтобы успешно разработать облачное приложение, обратите внимание на следующие пять основных аспектов качества программного обеспечения: масштабируемость, доступность, устойчивость, управление и безопасность.

| Аспект | ОПИСАНИЕ |
|--------|-------------|
| Масштабируемость | Способность системы успешно функционировать при повышении нагрузки. |
| Доступность | Доля времени, на протяжении которого система работает надлежащим образом. |
| Устойчивость | Способность системы к восстановлению и возобновлению работы после сбоев. |
| управления | Рабочие процессы, обеспечивающие работу системы в производственной среде. |
| Безопасность | Защита приложений и данных от угроз. |

## <a name="scalability"></a>Масштабируемость

Масштабируемость — это способность системы успешно функционировать при повышении нагрузки. Есть два основных способа масштабирования приложения. Вертикальное масштабирование (*увеличение* масштаба) означает увеличение емкости ресурса, например, за счет увеличения размера виртуальной машины. Горизонтальное масштабирование (*развертывание*) — это добавление новых экземпляров ресурса, например виртуальных машин или реплик базы данных. 

Горизонтальное масштабирование имеет значительные преимущества по сравнению с вертикальным:

- Истинный масштаб облака. Приложения можно разрабатывать так, чтобы они выполнялись на сотнях или даже тысячах узлов, достигая масштабов, которые невозможно реализовать на одном узле.
- Горизонтальное масштабирование является эластичным. При повышении нагрузки можно добавлять экземпляры, а при ее понижении — удалять их.
- Масштабирование может активироваться автоматически, по расписанию или в соответствии с изменением нагрузки. 
- Затраты на горизонтальное масштабирование могут быть меньше, чем на вертикальное. Несколько небольших виртуальных машин могут обойтись дешевле, чем одна большая. 
- Кроме того, горизонтальное масштабирование повышает устойчивость за счет избыточности. Если экземпляр выходит из строя, приложение продолжает работать.

Преимущество вертикального масштабирования состоит в том, что его можно реализовать, не внося изменения в приложение. Но в определенный момент будет достигнут предел и увеличить масштаб больше не удастся. В таком случае дальнейшее масштабирование должно быть горизонтальным. 

Горизонтальное масштабирование необходимо разрабатывать в составе системы. Например, можно развернуть виртуальные машины, поместив их за подсистемой балансировки нагрузки. Но каждая виртуальная машина в пуле должна быть способна обработать любой клиентский запрос. Поэтому для приложения не должно отслеживаться состояние или данные состояния должны сохраняться во внешних ресурсах (скажем, в распределенном кэше). В управляемых службах PaaS часто есть встроенные функции горизонтального и автоматического масштабирования. Простота масштабирования является важным преимуществом использования служб PaaS.

Но для масштабирования недостаточно просто добавить дополнительные экземпляры. После этого узкое место может попросту образоваться на другом участке. Например, если масштабировать внешний веб-интерфейс для обработки большего количества клиентских запросов, в базе данных могут возникнуть конфликты блокировки. В таком случае необходимо учитывать дополнительные показатели, например оптимистическую блокировку или секционирование данных, чтобы повысить пропускную способность при подключении к базе данных.

Обязательно выполняйте проверки производительности и нагрузочное тестирование для определения этих потенциальных узких мест. Части системы с отслеживанием состояния, такие как базы данных, чаще всего становятся причиной образования узких мест и требуют тщательного планирования при горизонтальном масштабировании. Устранение узкого места на одном участке может привести к его образованию на другом.

Воспользуйтесь [контрольным списком масштабируемости][scalability-checklist], чтобы проверить разработку с точки зрения этого аспекта.

### <a name="scalability-guidance"></a>Руководства по обеспечению масштабируемости:

- [Конструктивные шаблоны для обеспечения масштабируемости и производительности][scalability-patterns].
- Рекомендации по [автоматическому масштабированию][autoscale], [фоновым заданиям][background-jobs], [кэшированию][caching], [CDN][cdn] и [секционированию данных][data-partitioning]

## <a name="availability"></a>Доступность

Доступность — это доля времени, на протяжении которого система работает надлежащим образом. Обычно этот показатель измеряется в процентах от времени непрерывной работы. Ошибки приложения, проблемы с инфраструктурой и загрузка системы могут понизить доступность. 

Для целевого уровня служб облачного приложения нужно четко определить ожидаемую доступность и способ ее оценки. При определении доступности учитывайте критический путь. Внешний веб-интерфейс может обрабатывать клиентские запросы, но если каждая транзакция завершается ошибкой подключения к базе данных, приложение не будет доступно для пользователей. 

Доступность данных часто описывается в "девятках" &mdash; например, "четыре девятки" означает 99,99 % времени непрерывной работы. В следующей таблице показано потенциальное суммарное время простоя для различных уровней доступности:

| % времени доступности | Время простоя в неделю | Время простоя в месяц | Время простоя в год |
|----------|-------------------|--------------------|-------------------|
| 99 % | 1,68 часа | 7,2 часа | 3,65 дня |
| 99,9 % | 10 минут | 43,2 мин | 8,76 часа |
| 99,95 % | 5 мин | 21,6 мин | 4,38 часа |
| 99,99 % | 1 минута | 4,32 минуты | 52,56 минуты |
| 99,999 % | 6 секунд | 26 секунд | 5,26 минуты |

Обратите внимание, что 99 % времени доступности может означать простой службы в течение почти 2 часов в неделю. Для многих приложений, особенно ориентированных на конечного пользователя, такой целевой уровень обслуживания недопустим. А пять девяток (99,999 %) означает не более 5 минут простоя в *год*. На таком уровне довольно сложно даже определить простой, не говоря уж об устранении неполадок. Чтобы достичь очень высокого уровня доступности (99,99 % или выше), восстановление после сбоев нельзя проводить вручную. Приложение должно выполнять самостоятельную диагностику и самовосстановление. При этом аспект устойчивости становится ключевым.

В соглашении Azure об уровне обслуживания (SLA) приводится описание обязательств корпорации Майкрософт в отношении доступности и подключения. Если в SLA для конкретной службы указано 99,95 %, это означает, что вы должны ожидать, что служба будет доступна 99,95 % времени.

Приложения часто зависят от нескольких служб. Как правило, вероятность простоя для каждой службы индивидуальна. Например, предположим, что ваше приложение зависит от двух служб, соглашение об уровне обслуживания для каждой из которых гарантирует доступность на уровне 99,9 %. Совокупное соглашение об уровне обслуживания для обеих служб гарантирует доступность на уровне 99,9 % &times; 99,9 % &asymp; 99,8 %. Это немного меньше, чем для каждой службы в отдельности. 

Воспользуйтесь [контрольным списком доступности][availability-checklist], чтобы проверить разработку с точки зрения этого аспекта.

### <a name="availability-guidance"></a>Руководства по обеспечению доступности:

- [Конструктивные шаблоны для обеспечения доступности][availability-patterns].
- Рекомендации по [автомасштабированию][autoscale] и [заданиям в фоновом режиме][background-jobs].

## <a name="resiliency"></a>Устойчивость

Устойчивость — это способность системы к восстановлению и возобновлению работы после сбоев. Задача устойчивости заключается в том, чтобы вернуть приложение в полностью рабочее состояние после сбоя. Устойчивость тесно связана с доступностью.

При традиционной разработке приложений основное внимание уделялось сокращению среднего времени между сбоями. Все усилия были направлены на попытки предотвратить сбои в системе. Для облачных вычислений требуется другой подход. Это объясняется несколькими факторами:

- Распределенные системы являются сложными, и сбой в одной точке может привести к каскаду проблем во всей системе.
- Затраты для облачных сред сокращаются за счет использования недорогого оборудования общего назначения. Поэтому время от времени в его работе могут происходить сбои. 
- Приложения часто зависят от внешних служб, которые могут временно стать недоступными, или же может сработать регулирование при поступлении большого количества запросов. 
- Современные пользователи ожидают, что приложение будет круглосуточно и ежедневно работать в оперативном режиме.

Все эти факторы означают, что при разработке облачных приложений следует предусмотреть возможность случайных сбоев и средства для последующего восстановления. В платформу Azure встроено множество функций обеспечения устойчивости. Например, 

- Служба хранилища Azure, служба "База данных SQL" и Cosmos DB обеспечивают встроенную репликацию данных как в одном, так и в нескольких регионах.
- Управляемые диски Azure автоматически размещаются в разных единицах масштабирования хранилища, чтобы ограничить влияние сбоев оборудования.
- Виртуальные машины в группе доступности распределены между несколькими доменами сбоя. Домен сбоя — это группа виртуальных машин, совместно использующих общий источник питания и сетевой коммутатор. Распределив виртуальные машины между несколькими доменами сбоя, можно ограничить воздействие сбоев физического оборудования, сети или электропитания.

И все же вам необходимо обеспечить дополнительную устойчивость приложения. Стратегии устойчивости можно применять на всех уровнях архитектуры. Некоторые методы устранения рисков имеют тактический характер &mdash; например, позволяют повторить попытку удаленного вызова после временного сбоя сети. Другие же разработаны стратегически, как, например, отработка отказа всего приложения в дополнительный регион. Тактическое устранение рисков может играть очень важную роль. Вероятность того, что во всем регионе произойдет сбой, мала. Но временные проблемы, такие как перегрузка сети, происходят довольно часто, поэтому на них следует сосредоточиться в первую очередь. Очень важно проводить надлежащий мониторинг и диагностику. Это позволит оперативно выявлять сбои и определять их первопричины.

При разработке устойчивого приложения нужно составить представление о требованиях к доступности. Какое время простоя приемлемо? Это отчасти зависит от затрат. Во сколько возможный простой обойдется вашему бизнесу? Сколько вы должны инвестировать в высокую доступность приложения?

Воспользуйтесь [контрольным списком устойчивости][resiliency-checklist], чтобы проверить разработку с точки зрения этого аспекта.

### <a name="resiliency-guidance"></a>Руководство по обеспечению устойчивости

- [Проектирование устойчивых приложений для Azure][resiliency]
- [Конструктивные шаблоны для обеспечения устойчивости][resiliency-patterns].
- Рекомендации по [обработке временных сбоев][transient-fault-handling] и [повторным попыткам запроса для определенных служб][retry-service-specific].

## <a name="management-and-devops"></a>Управление и DevOps

Этот аспект охватывает рабочие процессы, которые обеспечивают выполнение приложений в производственной среде.

Развертывания должны быть надежными и прогнозируемыми. Чтобы уменьшить вероятность ошибки вследствие человеческого фактора, развертывания следует автоматизировать. Это должен быть оперативный типовой процесс, который не влияет на скорость выпуска новых функций и исправления ошибок. Не менее важно, чтобы можно было быстро выполнить откат или накат при наличии проблем с обновлением.

Мониторинг и диагностика имеют огромное значение. Облачные приложения выполняются в удаленном центре обработки данных, где у вас нет полного контроля над инфраструктурой или (в некоторых случаях) над операционной системой. В больших приложениях нецелесообразно выполнять вход на виртуальную машину, чтобы устранить проблему или проанализировать файлы журналов. При использовании служб PaaS может и не быть выделенной виртуальной машины, на которую можно выполнить вход. Мониторинг и диагностика помогут получить аналитические сведения о системе, чтобы вы знали, когда и где именно произошел сбой. Все системы должны быть доступны для отслеживания. Используйте общую согласованную схему ведения журналов, которая позволит сопоставлять события в различных системах.

Процессы мониторинга и диагностики состоят из нескольких этапов:

- Инструментирование. Создание необработанных данных, полученных из журналов приложений, веб-серверов, средств диагностики, встроенных в платформу Azure, и других источников.
- Сбор и хранение. Объединение данных в одном расположении.
- Анализ и диагностика. Выполняются для устранения неполадок и проверки общей работоспособности.
- Визуализация и оповещения. Использование данных телеметрии для определения тенденций или оповещения рабочих групп.

Воспользуйтесь [контрольным списком DevOps][devops-checklist], чтобы проверить разработку с точки зрения этого аспекта.

### <a name="management-and-devops-guidance"></a>Руководства по управлению и DevOps:

- [Конструктивные шаблоны для управления и мониторинга][management-patterns].
- Рекомендации по [мониторингу и диагностике][monitoring].

## <a name="security"></a>Безопасность

Аспекты безопасности нужно учитывать на протяжении всего жизненного цикла приложения — от разработки и реализации до развертывания и эксплуатации. Платформа Azure предоставляет средства защиты от различных угроз, таких как сетевые атаки и атаки DDoS. Но вам нужно обеспечить дополнительную безопасность приложения и процессов DevOps.

Ниже описаны широкие области, требующие поддержки безопасности. 

### <a name="identity-management"></a>Управление удостоверениями

Для аутентификации и авторизации пользователей рекомендуем использовать Azure Active Directory (Azure AD). Azure AD — это полностью управляемая служба для управления удостоверениями и доступом. Вы можете использовать ее для создания доменов, которые существуют только в Azure, или интегрировать с локальными удостоверениями Active Directory. Azure AD также интегрируется с Office 365, Dynamics CRM Online и многими приложениями SaaS сторонних производителей. Для приложений, ориентированных на конечных пользователей, Azure Active Directory B2C позволяет проходить аутентификацию при помощи существующих учетных записей в социальных сетях (например, Facebook, Google или LinkedIn) или создать новую учетную запись пользователя под управлением Azure AD.

Есть несколько способов интегрировать локальную среду Active Directory с сетью Azure. Вы можете выбрать тот, который в наибольшей степени соответствует вашим потребностям. Дополнительные сведения см. в статье об эталонных архитектурах для [управления удостоверениями][identity-ref-arch].

### <a name="protecting-your-infrastructure"></a>Защита инфраструктуры 

Контролируйте доступ к развертываемым ресурсам Azure. Между каждой подпиской Azure и клиентом Azure AD установлено [отношение доверия][ad-subscriptions]. Используйте [управление доступом на основе ролей][rbac] (RBAC), чтобы предоставлять пользователям в своей организации необходимые разрешения на использование ресурсов Azure. Предоставляйте доступ, назначая пользователям или группам в определенной области роли RBAC. Областью может быть подписка, группа ресурсов или отдельный ресурс. Выполняйте [аудит][resource-manager-auditing] всех изменений в инфраструктуре. 

### <a name="application-security"></a>Безопасность приложения

Как правило, рекомендации по обеспечению безопасности при разработке приложений применимы и в облаке. К ним относятся повсеместное использование протокола SSL, защита от атак CSRF и XSS, предотвращение атак путем внедрения кода SQL и т. д. 

В облачных приложениях часто используются управляемые службы с ключами доступа. Их ни в коем случае не следует проверять при помощи системы управления версиями. Рекомендуем хранить секреты приложений в Azure Key Vault.

### <a name="data-sovereignty-and-encryption"></a>Независимость и шифрование данных

Убедитесь, что данные остаются в надлежащей геополитической зоне при использовании функции высокой доступности Azure. В хранилище Azure с георепликацией используется понятие [пар регионов][paired-region] в одном геополитическом регионе. 

Для защиты криптографических ключей и секретов используйте Key Vault. В Key Vault вы можете зашифровать ключи и секреты с использованием ключей, которые защищены аппаратными модулями безопасности (HSM). Многие службы хранилищ и баз данных Azure поддерживают шифрование неактивных данных, включая [службу хранилища Azure][storage-encryption], [службу "База данных SQL Azure"][sql-db-encryption], [хранилище данных SQL Azure][data-warehouse-encryption] и [Cosmos DB][cosmosdb-encryption].

### <a name="security-resources"></a>Ресурсы, посвященные безопасности:

- [Центр безопасности Azure.][security-center] Предоставляет встроенные функции мониторинга безопасности и управления политиками для подписок Azure. 
- [Документация по системе безопасности Azure][security-documentation].
- [Центр управления безопасностью Майкрософт][trust-center].



<!-- links -->

[dr-guidance]: ../resiliency/disaster-recovery-azure-applications.md
[identity-ref-arch]: ../reference-architectures/identity/index.md
[resiliency]: ../resiliency/index.md

[ad-subscriptions]: /azure/active-directory/active-directory-how-subscriptions-associated-directory
[data-warehouse-encryption]: /azure/data-lake-store/data-lake-store-security-overview#data-protection
[cosmosdb-encryption]: /azure/cosmos-db/database-security
[rbac]: /azure/active-directory/role-based-access-control-what-is
[paired-region]: /azure/best-practices-availability-paired-regions
[resource-manager-auditing]: /azure/azure-resource-manager/resource-group-audit
[security-blog]: https://azure.microsoft.com/blog/tag/security/
[security-center]: https://azure.microsoft.com/services/security-center/
[security-documentation]: /azure/security/
[sql-db-encryption]: /azure/sql-database/sql-database-always-encrypted-azure-key-vault
[storage-encryption]: /azure/storage/storage-service-encryption
[trust-center]: https://azure.microsoft.com/support/trust-center/
 

<!-- patterns -->
[availability-patterns]: ../patterns/category/availability.md
[management-patterns]: ../patterns/category/management-monitoring.md
[resiliency-patterns]: ../patterns/category/resiliency.md
[scalability-patterns]: ../patterns/category/performance-scalability.md


<!-- practices -->
[autoscale]: ../best-practices/auto-scaling.md
[background-jobs]: ../best-practices/background-jobs.md
[caching]: ../best-practices/caching.md
[cdn]: ../best-practices/cdn.md
[data-partitioning]: ../best-practices/data-partitioning.md
[monitoring]: ../best-practices/monitoring.md
[retry-service-specific]: ../best-practices/retry-service-specific.md
[transient-fault-handling]: ../best-practices/transient-faults.md


<!-- checklist -->
[availability-checklist]: ../checklist/availability.md
[devops-checklist]: ../checklist/dev-ops.md
[resiliency-checklist]: ../checklist/resiliency.md
[scalability-checklist]: ../checklist/scalability.md
