---
title: Критерии выбора хранилища данных
titleSuffix: Azure Application Architecture Guide
description: Общие сведения о вычислительных возможностях в Azure.
author: MikeWasson
ms.date: 06/01/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seojan19
ms.openlocfilehash: f7c19501b9f28db3892285b5f35a33f02edd87ab
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2019
ms.locfileid: "54488143"
---
# <a name="criteria-for-choosing-a-data-store"></a>Критерии выбора хранилища данных

Azure поддерживает различные типы решений для хранения данных с различными функциями и возможностями. В этой статье описываются критерии сравнения, которые следует применять при оценке хранилища данных. Эти сведения помогут выбрать оптимальное хранилище данных в соответствии с требованиями решения.

## <a name="general-considerations"></a>Общие рекомендации

Для начала соберите как можно больше сведений о требованиях к данным. Эти сведения помогут определить тип хранилища данных в соответствии с вашими требованиями.

### <a name="functional-requirements"></a>Функциональные требования

- **Формат данных.** Данные какого типа требуется хранить? Распространенные типы: данные о транзакциях, объекты JSON, телеметрия, индексы поиска или неструктурированные файлы.

- **Размер данных.** Каков размер сущностей, которые нужно хранить? Эти сущности следует использовать как один документ или их можно разбить на несколько документов, таблиц, коллекций и т. д.?

- **Масштаб и структура.** Какова требуемая емкость хранилища? Планируется ли секционирование данных?

- **Связи между данными.** Какой тип связи требуется реализовать в данных: "один ко многим" или "многие ко многим"? Сами связи являются важной частью данных? Вам понадобится объединить данные из одного набора данных или из внешних наборов данных?

- **Модель согласованности.** Насколько важно, чтобы обновления одного узла отображались на других узлах перед дальнейшим внесением изменений? Возможно ли принять итоговую согласованность? Требуются ли гарантии ACID для транзакций?

- **Гибкость схемы.** Какие схемы будут применяться к данным? Какой подход будет применяться: фиксированная схема, схема по записи или схема по чтению?

- **Параллелизм.** Какой механизм параллелизма следует использовать при обновлении и синхронизации данных? Будет ли в приложении выполняться большое количество обновлений, которые потенциально могут конфликтовать? В этом случае может потребоваться блокировка записей и контроль пессимистичной блокировки. Кроме того, поддерживает ли система элементы управления оптимистичной блокировкой? Если ответ положительный, достаточно ли простого контроля параллелизма на основе меток времени или требуются дополнительные возможности по контролю параллелизма в нескольких версиях?

- **Перемещение данных.** Понадобится ли решению выполнять задачи ETL для переноса данных в другие хранилища данных?

- **Жизненный цикл данных.** Принадлежат ли данные к типу "однократная запись, многократное чтение"? Можно ли их переместить в "горячее" или "холодное" хранилище?

- **Другие поддерживаемые функции.** Требуются ли другие специальные функции, например проверка схемы, агрегирование, индексирование, полнотекстовый поиск, MapReduce или другие возможности запросов?

### <a name="non-functional-requirements"></a>Нефункциональные требования

- **Производительность и масштабирование.** Каковы требования к производительности данных? Имеются ли специальные требования к приему и скорости обработки данных? Каково приемлемое время отклика для обращения к данным и их статистической обработки после приема? На сколько требуется увеличить масштаб хранилища данных? Каких операций больше в рабочей нагрузке: чтения или записи?

- **Надежность.** Какие общие Соглашения об уровне обслуживания требуется поддерживать? Какой уровень отказоустойчивости необходимо предоставить для потребителей данных? Какие возможности резервного копирования и восстановления требуются?

- **Репликация.** Понадобится ли распределить данные по нескольким репликам или регионам? Какие возможности репликации данных требуются?

- **Ограничения.** Будут ли ограничения конкретного хранилища данных поддерживать ваши требования к масштабированию, числу подключений и пропускной способности?

### <a name="management-and-cost"></a>Управление и затраты

- **Управляемая служба.** По возможности используйте управляемую службу данных, если вам не требуются конкретные возможности, доступные только в хранилище данных, размещенном в IaaS.

- **Доступность по регионам.** Доступна ли управляемая служба во всех регионах Azure? Нужно ли разместить решение в определенных регионах Azure?

- **Мобильность.** Потребуется ли переносить данные в локальную среду, во внешние центры обработки данных или другие облачные среды размещения?

- **Лицензирование.** Что вы предпочитаете: частную лицензию или лицензию OSS? Существуют ли другие внешние ограничения по типу лицензии, который следует использовать?

- **Общая стоимость.** Какова общая стоимость использования службы в решении? Сколько экземпляров потребуется в соответствии с требованиями к бесперебойной работе и пропускной способности? Рассчитывая это, учтите эксплуатационные расходы. Одна из причин для выбора управляемых служб — низкие эксплуатационные расходы.

- **Экономичность.** Можно ли секционировать данные для более экономичного хранения? Например, можно ли переместить большие объекты из дорогой реляционной базы данных в хранилище объектов?

### <a name="security"></a>Безопасность

- **Безопасность**. Какой тип шифрования нужен? Требуется ли шифрование неактивных данных? Какой метод аутентификации нужно использовать для подключения к данным?

- **Аудит.** Журнал какого типа аудита необходимо создать?

- **Требования к сети.** Необходимо ли ограничить доступ к данным из других сетевых ресурсов или управлять доступом иным образом? Данные должны быть доступны только в среде Azure? Требуется ли использовать конкретный IP-адрес или подсеть для доступа к данным? Нужно ли предоставить доступ к данным из приложений или служб, размещенных локально или в других внешних центрах обработки данных?

### <a name="devops"></a>DevOps

- **Навыки.** Освоила ли ваша команда определенные языки программирования, работу с операционными системами или с другими технологиями? При работе с какими технологиями и системами у вашей команды возникают проблемы?

- **Клиенты.** Предоставляется ли поддержка клиентов для ваших языков разработки на должном уровне?

В следующих разделах сравниваются различные модели хранилища данных с точки зрения профиля рабочей нагрузки, типов данных и примеров использования.

## <a name="relational-database-management-systems-rdbms"></a>Реляционные СУБД

<!-- markdownlint-disable MD033 -->

<table>
<tr><td><strong>Рабочая нагрузка</strong></td>
    <td>
        <ul>
            <li>Записи создаются и имеющиеся данные обновляются регулярно.</li>
            <li>Несколько операций должны выполниться в одной транзакции.</li>
            <li>Требуются функции агрегирования для выполнения перекрестной табуляции.</li>
            <li>Требуется тесная интеграция с инструментами создания отчетов.</li>
            <li>Связи задаются по ограничениям базы данных.</li>
            <li>Индексы используются для оптимизации производительности запросов.</li>
            <li>Разрешается доступ к определенному подмножеству данных.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Тип данных</strong></td>
    <td>
        <ul>
            <li>Данные имеют высокую степень нормализации.</li>
            <li>Схемы базы данных требуются и принудительно применяются.</li>
            <li>Для данных в базе данных настроена связь "многие ко многим".</li>
            <li>Ограничения определяются в схеме и применяются к любым данным в базе данных.</li>
            <li>Данные требуют высокого уровня целостности. Индексы и связи требуют осторожного использования.</li>
            <li>Данные требуют строгой согласованности. Транзакции осуществляются таким образом, который гарантирует, что все данные полностью согласованы для всех пользователей и процессов</li>
            <li>Отдельные записи представлены в малом и среднем размере.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Примеры</strong></td>
    <td>
        <ul>
            <li>Бизнес-приложения (управление человеческими ресурсами, управление взаимоотношениями с клиентами, планирование ресурсов предприятия)</li>
            <li>Управление запасами</li>
            <li>База данных отчетов</li>
            <li>Учет</li>
            <li>Управление ресурсами</li>
            <li>Управление средствами</li>
            <li>Управление заказами</li>
        </ul>
    </td>
</tr>
</table>

## <a name="document-databases"></a>Базы данных документов

<table>
<tr><td><strong>Рабочая нагрузка</strong></td>
    <td>
        <ul>
            <li>Общего назначения.</li>
            <li>Операции вставки и обновления являются общими. Записи создаются и имеющиеся данные обновляются регулярно.</li>
            <li>Нет объектно-реляционной несогласованности. Документы можно эффективнее сопоставить со структурами объектов, используемыми в коде приложения.</li>
            <li>Чаще используется оптимистичная блокировка.</li>
            <li>Данные должно изменять и обрабатывать использующее их приложение.</li>
            <li>Данным требуется индекс по нескольким полям.</li>
            <li>Отдельные документы извлекаются и записываются как единый блок.</li>
    </td>
</tr>
<tr><td><strong>Тип данных</strong></td>
    <td>
        <ul>
            <li>Данными можно управлять не нормализованно.</li>
            <li>Размер отдельных блоков данных документа относительно невелик.</li>
            <li>Тип каждого документа может использовать собственную схему.</li>
            <li>Документы могут содержать дополнительные поля.</li>
            <li>Данные документа полуструктурированные. Это означает, что типы данных каждого поля не строго определены.</li>
            <li>Объединение данных поддерживается.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Примеры</strong></td>
    <td>
        <ul>
            <li>Каталог продукции</li>
            <li>Учетные записи пользователей</li>
            <li>Спецификация</li>
            <li>Персонализация</li>
            <li>Управление содержимым</li>
            <li>Рабочие данные</li>
            <li>Управление запасами</li>
            <li>Данные журнала транзакций</li>
            <li>Материализованное представление других хранилищ NoSQL Заменяет индексацию файлов или больших двоичных объектов.</li>
        </ul>
    </td>
</tr>
</table>

## <a name="keyvalue-stores"></a>Хранилище пар "ключ — значение"

<table>
<tr><td><strong>Рабочая нагрузка</strong></td>
    <td>
        <ul>
            <li>Данные идентифицируются, и к ним получается доступ с помощью одного ключа идентификатора, например словаря.</li>
            <li>Высокая масштабируемость.</li>
            <li>Соединения, блокировки или объединения не нужны.</li>
            <li>Механизмы статистической обработки не используются.</li>
            <li>Как правило, вторичные индексы не используются.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Тип данных</strong></td>
    <td>
        <ul>
            <li>Размер данных, как правило, большой.</li>
            <li>Каждый ключ связан с одним значением, которое является неуправляемым большим двоичным объектом данных.</li>
            <li>Схема не применяется.</li>
            <li>Сущности не связаны.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Примеры</strong></td>
    <td>
        <ul>
            <li>Кэширование данных</li>
            <li>Управление сеансом</li>
            <li>Управления параметрами и профилями пользователя</li>
            <li>Рекомендации по продуктам и реклама</li>
            <li>Словари</li>
        </ul>
    </td>
</tr>
</table>

## <a name="graph-databases"></a>Базы данных графов

<table>
<tr><td><strong>Рабочая нагрузка</strong></td>
    <td>
        <ul>
            <li>Связи между элементами данных очень сложные и включают много переходов между связанными элементами данных.</li>
            <li>Связи между элементами данных динамические и изменяются со временем.</li>
            <li>Отношения между объектами являются привилегированными. Для обхода не требуются внешние ключи и соединения.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Тип данных</strong></td>
    <td>
        <ul>
            <li>Данные состоят из узлов и связей.</li>
            <li>Узлы похожи на строки таблицы или документы JSON.</li>
            <li>Связи так же важны, как и узлы, и явно предоставляются на языке запросов.</li>
            <li>Составные объекты, такие как пользователь с несколькими телефонными номерами, как правило, разделяются на несколько отдельных небольших узлов в сочетании с переходными связями. </li>
        </ul>
    </td>
</tr>
<tr><td><strong>Примеры</strong></td>
    <td>
        <ul>
            <li>Организационные диаграммы</li>
            <li>Графы социальных сетей</li>
            <li>Обнаружение мошенничества.</li>
            <li>Analytics</li>
            <li>Системы рекомендаций</li>
        </ul>
    </td>
</tr>
</table>

## <a name="column-family-databases"></a>Базы данных столбцов

<table>
<tr><td><strong>Рабочая нагрузка</strong></td>
    <td>
        <ul>
            <li>В большинстве баз данных столбцов операции записи выполняются очень быстро.</li>
            <li>Операции обновления и удаления выполняются редко.</li>
            <li>Предназначены для обеспечения доступа с высокой пропускной способностью и малой задержкой.</li>
            <li>Поддерживают простой доступ с выполнением запроса к конкретному набору полей в большой записи.</li>
            <li>Высокая масштабируемость.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Тип данных</strong></td>
    <td>
        <ul>
            <li>Данные хранятся в таблицах, состоящих из ключевого столбца и одного или нескольких наборов столбцов.</li>
            <li>Определенные столбцы изменяются в зависимости от отдельных строк.</li>
            <li>Доступ к отдельным ячейкам осуществляется с использованием команд GET и PUT.</li>
            <li>Несколько строк возвращаются с использованием команды проверки.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Примеры</strong></td>
    <td>
        <ul>
            <li>Рекомендации</li>
            <li>Персонализация</li>
            <li>Данные от датчиков</li>
            <li>Телеметрия</li>
            <li>Обмен сообщениями</li>
            <li>Анализ социальных сетей</li>
            <li>Веб-аналитика</li>
            <li>Мониторинг активности</li>
            <li>Прогнозные данные и другие данные временных рядов</li>
        </ul>
    </td>
</tr>
</table>

## <a name="search-engine-databases"></a>Базы данных поисковой системы

<table>
<tr><td><strong>Рабочая нагрузка</strong></td>
    <td>
        <ul>
            <li>Индексирование данных из нескольких источников и служб.</li>
            <li>Запросы являются специализированными и могут быть сложными.</li>
            <li>Требуется статистическая обработка.</li>
            <li>Требуется полнотекстовый поиск.</li>
            <li>Требуется специализированный запрос на самообслуживание.</li>
            <li>Требуется анализ данных с индексом по всем полям.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Тип данных</strong></td>
    <td>
        <ul>
            <li>Полуструктурированные и неструктурированные данные</li>
            <li>текст</li>
            <li>Текст со ссылкой на структурированные данные</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Примеры</strong></td>
    <td>
        <ul>
            <li>Каталоги продуктов</li>
            <li>Поиск на сайте</li>
            <li>Ведение журналов</li>
            <li>Analytics</li>
            <li>Сайты покупок</li>
        </ul>
    </td>
</tr>
</table>

## <a name="data-warehouse"></a>Хранилище данных

<table>
<tr><td><strong>Рабочая нагрузка</strong></td>
    <td>
        <ul>
            <li>Аналитика данных</li>
            <li>Корпоративная бизнес-аналитика</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Тип данных</strong></td>
    <td>
        <ul>
            <li>Исторические данные из нескольких источников.</li>
            <li>Обычно денормализовано в схеме типа &quot;звезда&quot; или &quot;снежинка&quot;, состоящей из таблиц фактов и измерений.</li>
            <li>Как правило, новые данные загружаются по расписанию.</li>
            <li>Таблицы измерений часто включают в себя несколько исторических версий сущности, называемых <em>медленно изменяющимися измерениями</em>.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Примеры</strong></td>
    <td>Корпоративное хранилище данных, предоставляющее данные для аналитических моделей, отчетов и панелей мониторинга.
    </td>
</tr>
</table>

## <a name="time-series-databases"></a>Базы данных временных рядов

<table>
<tr><td><strong>Рабочая нагрузка</strong></td>
    <td>
        <ul>
            <li>Большая часть операций (95–99 %) — это операции записи.</li>
            <li>Записи обычно добавляются последовательно по времени.</li>
            <li>Обновления происходят редко.</li>
            <li>Удаление выполняется в пакетном режиме. Удаляются смежные блоки или записи.</li>
            <li>Размер запросов на чтение может превышать доступный объем памяти.</li>
            <li>Довольно часто несколько операций чтения выполняются одновременно.</li>
            <li>Данные считываются последовательно в порядке возрастания или убывания по времени.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Тип данных</strong></td>
    <td>
        <ul>
            <li>Метка времени используется в качестве первичного ключа и механизма сортировки.</li>
            <li>Измерения из записи или описания записи.</li>
            <li>Теги, определяющие дополнительные сведения о типе, источнике и другие данные о записи.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Примеры</strong></td>
    <td>
        <ul>
            <li>Мониторинг и телеметрия событий.</li>
            <li>Данные датчиков или другие данные Интернета вещей.</li>
        </ul>
    </td>
</tr>
</table>

## <a name="object-storage"></a>Хранилище объектов

<table>
<tr><td><strong>Рабочая нагрузка</strong></td>
    <td>
        <ul>
            <li>Определяется ключом.</li>
            <li>Объекты могут быть общедоступными или частными.</li>
            <li>Содержимое обычно является ресурсом, например электронная таблица, изображение или видеофайл.</li>
            <li>Содержимое должно быть устойчивыми (постоянным) и внешним для любого уровня приложения или виртуальной машины.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Тип данных</strong></td>
    <td>
        <ul>
            <li>Данные большого размера.</li>
            <li>Данные большого двоичного объекта.</li>
            <li>Значение является непрозрачным.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Примеры</strong></td>
    <td>
        <ul>
            <li>Изображения, видео, офисные документы, PDF-файлы</li>
            <li>CSS, сценарии, CSV</li>
            <li>Статический HTML, JSON</li>
            <li>Файлы журнала и аудита</li>
            <li>Резервные копии базы данных</li>
        </ul>
    </td>
</tr>
</table>

## <a name="shared-files"></a>Общие файлы

<table>
<tr><td><strong>Рабочая нагрузка</strong></td>
    <td>
        <ul>
            <li>Миграция из имеющихся приложений, взаимодействующих с файловой системой.</li>
            <li>Требуется интерфейс SMB.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Тип данных</strong></td>
    <td>
        <ul>
            <li>Файлы в наборе папок иерархической структуры.</li>
            <li>Доступны в стандартных библиотеках ввода-вывода.</li>
        </ul>
    </td>
</tr>
<tr><td><strong>Примеры</strong></td>
    <td>
        <ul>
            <li>Устаревшие файлы</li>
            <li>Общее содержимое доступно в нескольких виртуальных машинах или экземплярах приложения</li>
        </ul>
    </td>
</tr>
</table>

<!-- markdownlint-enable MD033 -->
