---
title: Использование подходящего хранилища данных для задания
description: Выберите подходящую технологию хранения в соответствии с типом данных и методами их использования.
author: MikeWasson
ms.date: 08/30/2018
ms.openlocfilehash: 25839f5a749881f415c923db5497984d32b8ac91
ms.sourcegitcommit: ae8a1de6f4af7a89a66a8339879843d945201f85
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/31/2018
ms.locfileid: "43326097"
---
# <a name="use-the-best-data-store-for-the-job"></a>Использование подходящего хранилища данных для задания

## <a name="pick-the-storage-technology-that-is-the-best-fit-for-your-data-and-how-it-will-be-used"></a>Выберите подходящую технологию хранения в соответствии с типом данных и методами их использования.

Те времена, когда можно было просто поместить все данные в большую реляционную базу данных SQL, остались в прошлом. Реляционные базы данных отлично справляются со своей основной задачей &mdash; поддержкой гарантий ACID для транзакций с реляционными данными. Но у них есть и ряд недостатков:

- Для запросов могут потребоваться дорогостоящие соединения.
- Нужна дополнительная нормализация данных и соблюдение предварительно определенной схемы (схема при записи).
- Конфликты блокировки могут снижать производительность.

Скорее всего, в любом крупном решении одной технологии хранилища данных окажется недостаточно. Кроме реляционных баз данных есть множество альтернативных технологий: хранилище ключей и значений, база данных документов, базы данных для поисковых систем, базы данных временных рядов, базы данных семейства столбцов, базы данных графов и т. д. Каждый из этих вариантов имеет свои преимущества и недостатки и каждый хорошо подходит для определенных типов данных. 

Например, каталог продуктов можно хранить в базе данных документов, такой как Cosmos DB, которая позволяет использовать гибкую схему данных. В этом примере каждое описание продукта является полностью автономным документом. Чтобы выполнять запросы по всему каталогу, проиндексируйте его и сохраните полученный индекс в службе "Поиск Azure". Список товаров лучше разместить в базе данных SQL, так как для этих данных нужны гарантии ACID.

И не забывайте, что работать нужно не только с основными данными приложения. Есть еще и журналы приложений, события, сообщения и кэши.

## <a name="recommendations"></a>Рекомендации

**Не используйте реляционную базу данных для всех задач.** Когда это целесообразно, выбирайте другие хранилища данных. См. статью [Choose the right data store][data-store-overview] (Выбор правильного хранилища данных).

**Предусмотрите возможность многоязычного хранения.** Скорее всего, в любом крупном решении одной технологии хранилища данных окажется недостаточно. 

**Учитывайте типы данных.** Например, данные о транзакциях лучше хранить в формате SQL, документы JSON — в базе данных документов, данные телеметрии — в базе данных временных рядов, журналы приложений — в Elasticsearch, а большие двоичные объекты — в хранилище BLOB-объектов Azure.

**Доступность данных важнее строгой согласованности.** Теорема CAP свидетельствует о том, что в распределенной системе неизбежен компромисс между доступностью и согласованностью. (Невозможно полностью избавиться от сетевых сегментов, которые входят в теорему CAP.) Иногда можно повысить доступность данных, применив модель *согласованности в конечном счете*. 

**Учитывайте опыт и навыки разработчиков.** Многоязычное хранение дает значительные преимущества, но важно не перейти границы. Внедрение новых технологий хранилища данных требует и новых навыков. Команда разработчиков должна хорошо понимать, как применить их наиболее эффективно. Им предстоит изучить все применимые шаблоны использования, методы оптимизации запросов, настройки производительности и т. д. Обязательно учитывайте это при выборе технологий хранилища данных. 

**Используйте компенсирующие транзакции.** Побочный эффект многоязычного хранения заключается в том, что одна транзакция может записывать данные в разные хранилища. Если что-то пойдет не так, примените компенсирующие транзакции для отмены всех выполненных действий.

**Изучите ограниченные контексты.** Понятие *ограниченный контекст* пришло к нам из предметно-ориентированного проектирования. Ограниченный контекст — это четкий лимит для модели предметной области, который определяет, к каким частям предметной области она применяется. В идеальном случае ограниченный контекст обозначает конкретный сегмент предметной области. Ограниченные контексты в системе — самая логичная область применения многоязычного хранения. Например, сущность "товар" может существовать одновременно в сегменте каталога товаров и в сегменте запаса товаров. Но, скорее всего, для этих сегментов существуют разные требования к хранению, обновлению и получению данных.

[data-store-overview]: ../technology-choices/data-store-overview.md