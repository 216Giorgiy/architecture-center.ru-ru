---
title: "Восстановление после потери региона Azure"
description: "Эта статья поможет вам понять и освоить процедуру создания надежных, высокодоступных, отказоустойчивых приложений, а также планирование аварийного восстановления."
author: adamglick
ms.date: 08/18/2016
ms.openlocfilehash: 42a7d865e101b43279f3198f3dd75df1b15a8565
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/14/2017
---
[!INCLUDE [header](../_includes/header.md)]
# <a name="azure-resiliency-technical-guidance-recovery-from-a-region-wide-service-disruption"></a><span data-ttu-id="61d7d-103">Техническое руководство по обеспечению устойчивости в Azure. Восстановление после прерывания работы служб во всем регионе</span><span class="sxs-lookup"><span data-stu-id="61d7d-103">Azure resiliency technical guidance: recovery from a region-wide service disruption</span></span>
<span data-ttu-id="61d7d-104">Azure физически и логически разделяется на единицы, называемые регионами.</span><span class="sxs-lookup"><span data-stu-id="61d7d-104">Azure is divided physically and logically into units called regions.</span></span> <span data-ttu-id="61d7d-105">Регион состоит из одного или нескольких центров обработки данных, расположенных в непосредственной близости друг от друга.</span><span class="sxs-lookup"><span data-stu-id="61d7d-105">A region consists of one or more datacenters in close proximity.</span></span> 

<span data-ttu-id="61d7d-106">В редких случаях ресурсы целого региона могут стать недоступными (например, из-за сбоев сети)</span><span class="sxs-lookup"><span data-stu-id="61d7d-106">Under rare circumstances, it is possible that facilities in an entire region can become inaccessible, for example due to network failures.</span></span> <span data-ttu-id="61d7d-107">или полностью потерянными (например, из-за стихийных бедствий).</span><span class="sxs-lookup"><span data-stu-id="61d7d-107">Or facilities can be lost entirely, for example due to a natural disaster.</span></span> <span data-ttu-id="61d7d-108">Здесь объясняются возможности Azure по созданию приложений, которые распределяются по регионам.</span><span class="sxs-lookup"><span data-stu-id="61d7d-108">This section explains the capabilities of Azure for creating applications that are distributed across regions.</span></span> <span data-ttu-id="61d7d-109">Такое распределение позволяет минимизировать вероятность того, что сбой в одном регионе повлияет на другие регионы.</span><span class="sxs-lookup"><span data-stu-id="61d7d-109">Such distribution helps to minimize the possibility that a failure in one region could affect other regions.</span></span>

## <a name="cloud-services"></a><span data-ttu-id="61d7d-110">Облачные службы</span><span class="sxs-lookup"><span data-stu-id="61d7d-110">Cloud services</span></span>
### <a name="resource-management"></a><span data-ttu-id="61d7d-111">Управление ресурсами</span><span class="sxs-lookup"><span data-stu-id="61d7d-111">Resource management</span></span>
<span data-ttu-id="61d7d-112">Вы можете распределить вычислительные операции по регионам, создав отдельную облачную службу в каждом целевом регионе и опубликовав пакет развертывания в каждой из служб.</span><span class="sxs-lookup"><span data-stu-id="61d7d-112">You can distribute compute instances across regions by creating a separate cloud service in each target region, and then publishing the deployment package to each cloud service.</span></span> <span data-ttu-id="61d7d-113">Однако обратите внимание, что распределение трафика по облачным службам в разных регионах должно быть реализовано разработчиком приложения или с помощью службы управления трафиком.</span><span class="sxs-lookup"><span data-stu-id="61d7d-113">However, note that distributing traffic across cloud services in different regions must be implemented by the application developer or with a traffic management service.</span></span>

<span data-ttu-id="61d7d-114">Определение необходимого количества запасных экземпляров роли, которые нужно предварительно развертывать для аварийного восстановления, — это важный аспект планирования ресурсов.</span><span class="sxs-lookup"><span data-stu-id="61d7d-114">Determining the number of spare role instances to deploy in advance for disaster recovery is an important aspect of capacity planning.</span></span> <span data-ttu-id="61d7d-115">Наличие полномасштабной дополнительной развернутой службы гарантирует, что при необходимости ресурсы уже будут доступны, однако стоимость при этом увеличится вдвое.</span><span class="sxs-lookup"><span data-stu-id="61d7d-115">Having a full-scale secondary deployment ensures that capacity is already available when needed; however, this effectively doubles the cost.</span></span> <span data-ttu-id="61d7d-116">Распространенный подход — развернуть небольшую дополнительную службу, достаточную для запуска критически важных служб.</span><span class="sxs-lookup"><span data-stu-id="61d7d-116">A common pattern is to have a small, secondary deployment, just large enough to run critical services.</span></span> <span data-ttu-id="61d7d-117">Это целесообразно для создания резервной мощности и тестирования конфигурации дополнительной среды.</span><span class="sxs-lookup"><span data-stu-id="61d7d-117">This small secondary deployment is a good idea, both to reserve capacity, and for testing the configuration of the secondary environment.</span></span>

> [!NOTE]
> <span data-ttu-id="61d7d-118">Квота подписки не гарантирует наличие ресурсов.</span><span class="sxs-lookup"><span data-stu-id="61d7d-118">The subscription quota is not a capacity guarantee.</span></span> <span data-ttu-id="61d7d-119">Квота — просто кредитный лимит.</span><span class="sxs-lookup"><span data-stu-id="61d7d-119">The quota is simply a credit limit.</span></span> <span data-ttu-id="61d7d-120">Чтобы обеспечить достаточное количество ресурсов, в модели службы нужно задать необходимое количество ролей, при этом роли должны быть развернуты.</span><span class="sxs-lookup"><span data-stu-id="61d7d-120">To guarantee capacity, the required number of roles must be defined in the service model, and the roles must be deployed.</span></span>
> 
> 

### <a name="load-balancing"></a><span data-ttu-id="61d7d-121">Балансировка нагрузки</span><span class="sxs-lookup"><span data-stu-id="61d7d-121">Load Balancing</span></span>
<span data-ttu-id="61d7d-122">Чтобы распределить нагрузку по трафику между регионами, требуется решение по управлению трафиком.</span><span class="sxs-lookup"><span data-stu-id="61d7d-122">To load balance traffic across regions requires a traffic management solution.</span></span> <span data-ttu-id="61d7d-123">Azure предоставляет [диспетчер трафика Azure](https://azure.microsoft.com/services/traffic-manager/).</span><span class="sxs-lookup"><span data-stu-id="61d7d-123">Azure provides [Azure Traffic Manager](https://azure.microsoft.com/services/traffic-manager/).</span></span> <span data-ttu-id="61d7d-124">Кроме того, вы можете воспользоваться сторонними службами, которые предоставляют аналогичные возможности по управлению трафиком.</span><span class="sxs-lookup"><span data-stu-id="61d7d-124">You can also take advantage of third-party services that provide similar traffic management capabilities.</span></span>

### <a name="strategies"></a><span data-ttu-id="61d7d-125">Стратегии</span><span class="sxs-lookup"><span data-stu-id="61d7d-125">Strategies</span></span>
<span data-ttu-id="61d7d-126">Существует множество альтернативных стратегий для реализации распределенных вычислительных ресурсов в разных регионах.</span><span class="sxs-lookup"><span data-stu-id="61d7d-126">Many alternative strategies are available for implementing distributed compute across regions.</span></span> <span data-ttu-id="61d7d-127">Они должны быть приспособлены к конкретным бизнес-требованиям и обстоятельствам применения приложения.</span><span class="sxs-lookup"><span data-stu-id="61d7d-127">These must be tailored to the specific business requirements and circumstances of the application.</span></span> <span data-ttu-id="61d7d-128">В сущности, подходы можно разделить на следующие категории.</span><span class="sxs-lookup"><span data-stu-id="61d7d-128">At a high level, the approaches can be divided into the following categories:</span></span>

* <span data-ttu-id="61d7d-129">**Повторное развертывание после аварии**. Этот подход предусматривает повторное развертывание приложения с нуля в случае аварии.</span><span class="sxs-lookup"><span data-stu-id="61d7d-129">**Redeploy on disaster**: In this approach the application is redeployed from scratch at the time of disaster.</span></span> <span data-ttu-id="61d7d-130">Такой вариант подходит для некритических приложений, которые не требуют гарантированного времени восстановления.</span><span class="sxs-lookup"><span data-stu-id="61d7d-130">This is appropriate for non-critical applications that don’t require a guaranteed recovery time.</span></span>
* <span data-ttu-id="61d7d-131">**"Теплая" замена (активная/пассивная)**. Дополнительная размещенная служба создается в альтернативном регионе. Роли развертываются, чтобы обеспечить минимальное количество ресурсов. Однако роли не получают рабочий трафик.</span><span class="sxs-lookup"><span data-stu-id="61d7d-131">**Warm Spare (Active/Passive)**: A secondary hosted service is created in an alternate region, and roles are deployed to guarantee minimal capacity; however, the roles don’t receive production traffic.</span></span> <span data-ttu-id="61d7d-132">Этот подход можно использовать для приложений, которые не предназначены для распределения трафика по регионам.</span><span class="sxs-lookup"><span data-stu-id="61d7d-132">This approach is useful for applications that have not been designed to distribute traffic across regions.</span></span>
* <span data-ttu-id="61d7d-133">**Горячая замена (активная/активная)**.</span><span class="sxs-lookup"><span data-stu-id="61d7d-133">**Hot Spare (Active/Active)**: The application is designed to receive production load in multiple regions.</span></span> <span data-ttu-id="61d7d-134">Приложение предназначено для получения рабочей нагрузки в нескольких регионах.</span><span class="sxs-lookup"><span data-stu-id="61d7d-134">The cloud services in each region might be configured for higher capacity than required for disaster recovery purposes.</span></span> <span data-ttu-id="61d7d-135">Облачные службы в каждом регионе могут быть настроены для большего количества ресурсов, чем требуется для целей аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="61d7d-135">Alternatively, the cloud services might scale out as necessary at the time of a disaster and failover.</span></span> <span data-ttu-id="61d7d-136">Кроме того, в случае необходимости облачные службы можно развернуть при аварии и отработке отказа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-136">This approach requires substantial investment in application design, but it has significant benefits.</span></span> <span data-ttu-id="61d7d-137">включая малое и гарантированное время восстановления, непрерывное тестирование всех расположений для восстановления и эффективное использование ресурсов.</span><span class="sxs-lookup"><span data-stu-id="61d7d-137">These include low and guaranteed recovery time, continuous testing of all recovery locations, and efficient usage of capacity.</span></span>

<span data-ttu-id="61d7d-138">Полное описание распределенной архитектуры выходит за рамки данного документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-138">A complete discussion of distributed design is outside the scope of this document.</span></span> <span data-ttu-id="61d7d-139">Дополнительные сведения см. в статье, посвященной [аварийному восстановлению и высокой доступности для приложений Azure](https://aka.ms/drtechguide).</span><span class="sxs-lookup"><span data-stu-id="61d7d-139">For further information, see [Disaster Recovery and High Availability for Azure Applications](https://aka.ms/drtechguide).</span></span>

## <a name="virtual-machines"></a><span data-ttu-id="61d7d-140">Виртуальные машины</span><span class="sxs-lookup"><span data-stu-id="61d7d-140">Virtual Machines</span></span>
<span data-ttu-id="61d7d-141">Восстановление виртуальных машин IaaS ("инфраструктура как услуга") во многом подобно восстановлению вычислений приложений PaaS ("платформа как услуга").</span><span class="sxs-lookup"><span data-stu-id="61d7d-141">Recovery of infrastructure as a service (IaaS) virtual machines (VMs) is similar to platform as a service (PaaS) compute recovery in many respects.</span></span> <span data-ttu-id="61d7d-142">Однако между ними есть важные различия, потому что виртуальная машина IaaS включает в себя как саму виртуальную машину, так и диск виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="61d7d-142">There are important differences, however, due to the fact that an IaaS VM consists of both the VM and the VM disk.</span></span>

* <span data-ttu-id="61d7d-143">**Использование службы архивации Azure для создания согласованных межрегиональных резервных копий приложения**.</span><span class="sxs-lookup"><span data-stu-id="61d7d-143">**Use Azure Backup to create cross region backups that are application consistent**.</span></span>
  <span data-ttu-id="61d7d-144">[службы архивации Azure](https://azure.microsoft.com/services/backup/) пользователи могут создавать согласованные резервные копии приложения с нескольких дисков виртуальных машин и поддерживать репликацию резервных копий по регионам.</span><span class="sxs-lookup"><span data-stu-id="61d7d-144">[Azure Backup](https://azure.microsoft.com/services/backup/) enables customers to create application consistent backups across multiple VM disks, and support replication of backups across regions.</span></span> <span data-ttu-id="61d7d-145">Для этого при создании хранилища резервных копий для него нужно выбрать георепликацию.</span><span class="sxs-lookup"><span data-stu-id="61d7d-145">You can do this by choosing to geo-replicate the backup vault at the time of creation.</span></span> <span data-ttu-id="61d7d-146">Обратите внимание, что репликацию хранилища резервных копий необходимо настроить во время создания.</span><span class="sxs-lookup"><span data-stu-id="61d7d-146">Note that replication of the backup vault must be configured at the time of creation.</span></span> <span data-ttu-id="61d7d-147">Ее нельзя настроить позже.</span><span class="sxs-lookup"><span data-stu-id="61d7d-147">It can't be set later.</span></span> <span data-ttu-id="61d7d-148">В случае потери региона корпорация Майкрософт делает резервные копии доступными для пользователей.</span><span class="sxs-lookup"><span data-stu-id="61d7d-148">If a region is lost, Microsoft will make the backups available to customers.</span></span> <span data-ttu-id="61d7d-149">Благодаря этому пользователи могут восстановить данные в любой из своих настроенных точек восстановления.</span><span class="sxs-lookup"><span data-stu-id="61d7d-149">Customers will be able to restore to any of their configured restore points.</span></span>
* <span data-ttu-id="61d7d-150">**Разделение диска данных и диска операционной системы**.</span><span class="sxs-lookup"><span data-stu-id="61d7d-150">**Separate the data disk from the operating system disk**.</span></span> <span data-ttu-id="61d7d-151">Важным аспектом использования виртуальных машин IaaS является то, что нельзя изменить диск операционной системы без повторного создания виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="61d7d-151">An important consideration for IaaS VMs is that you cannot change the operating system disk without re-creating the VM.</span></span> <span data-ttu-id="61d7d-152">Это не проблема, если стратегия восстановления заключается в повторном развертывании после аварии.</span><span class="sxs-lookup"><span data-stu-id="61d7d-152">This is not a problem if your recovery strategy is to redeploy after disaster.</span></span> <span data-ttu-id="61d7d-153">Тем не менее это может стать проблемой, если вы используете подход "теплой замены" для резервной мощности.</span><span class="sxs-lookup"><span data-stu-id="61d7d-153">However, it might be a problem if you are using the Warm Spare approach to reserve capacity.</span></span> <span data-ttu-id="61d7d-154">Чтобы правильно реализовать этот подход, и в основном, и в дополнительном расположениях должен быть развернут правильный диск операционной системы, а данные приложений должны храниться на отдельном диске.</span><span class="sxs-lookup"><span data-stu-id="61d7d-154">To implement this properly, you must have the correct operating system disk deployed to both the primary and secondary locations, and the application data must be stored on a separate drive.</span></span> <span data-ttu-id="61d7d-155">По возможности используйте стандартную конфигурацию операционной системы, которая может быть предоставлена в обоих расположениях.</span><span class="sxs-lookup"><span data-stu-id="61d7d-155">If possible, use a standard operating system configuration that can be provided on both locations.</span></span> <span data-ttu-id="61d7d-156">После отработки отказа следует подключить диск данных к имеющимся виртуальным машинам IaaS на дополнительном контроллере домена.</span><span class="sxs-lookup"><span data-stu-id="61d7d-156">After a failover, you must then attach the data drive to your existing IaaS VMs in the secondary DC.</span></span> <span data-ttu-id="61d7d-157">Используйте AzCopy для копирования моментальных снимков дисков с данными на удаленный сайт.</span><span class="sxs-lookup"><span data-stu-id="61d7d-157">Use AzCopy to copy snapshots of the data disk(s) to a remote site.</span></span>
* <span data-ttu-id="61d7d-158">**Возможные проблемы согласованности после географической отработки отказа нескольких дисков виртуальных машин**.</span><span class="sxs-lookup"><span data-stu-id="61d7d-158">**Be aware of potential consistency issues after a geo-failover of multiple VM Disks**.</span></span> <span data-ttu-id="61d7d-159">Диски виртуальных машин реализуются в виде больших двоичных объектов службы хранилища Azure и имеют одинаковые характеристики георепликации.</span><span class="sxs-lookup"><span data-stu-id="61d7d-159">VM Disks are implemented as Azure Storage blobs, and have the same geo-replication characteristic.</span></span> <span data-ttu-id="61d7d-160">Если [служба архивации Azure](https://azure.microsoft.com/services/backup/) не используется, нет гарантий согласованности между дисками, так как георепликация выполняется асинхронно и диски реплицируются независимо друг от друга.</span><span class="sxs-lookup"><span data-stu-id="61d7d-160">Unless [Azure Backup](https://azure.microsoft.com/services/backup/) is used, there are no guarantees of consistency across disks, because geo-replication is asynchronous and replicates independently.</span></span> <span data-ttu-id="61d7d-161">При сбое отдельные диски виртуальных машин гарантированно будут в состоянии отказоустойчивости после географической отработки отказа, но они не будут согласованы между собой.</span><span class="sxs-lookup"><span data-stu-id="61d7d-161">Individual VM disks are guaranteed to be in a crash consistent state after a geo-failover, but not consistent across disks.</span></span> <span data-ttu-id="61d7d-162">В некоторых случаях (например, в случае чередования дисков) это может вызвать проблемы.</span><span class="sxs-lookup"><span data-stu-id="61d7d-162">This could cause problems in some cases (for example, in the case of disk striping).</span></span>

## <a name="storage"></a><span data-ttu-id="61d7d-163">Хранилище</span><span class="sxs-lookup"><span data-stu-id="61d7d-163">Storage</span></span>
### <a name="recovery-by-using-geo-redundant-storage-of-blob-table-queue-and-vm-disk-storage"></a><span data-ttu-id="61d7d-164">Восстановление с использованием геоизбыточного хранилища дискового пространства больших двоичных объектов, таблиц, очередей и виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="61d7d-164">Recovery by using Geo-Redundant Storage of blob, table, queue and VM disk storage</span></span>
<span data-ttu-id="61d7d-165">В Azure все большие двоичные объекты, таблицы, очереди и диски виртуальных машин по умолчанию являются геореплицируемыми.</span><span class="sxs-lookup"><span data-stu-id="61d7d-165">In Azure, blobs, tables, queues, and VM disks are all geo-replicated by default.</span></span> <span data-ttu-id="61d7d-166">Это называется геоизбыточным хранилищем (GRS).</span><span class="sxs-lookup"><span data-stu-id="61d7d-166">This is referred to as Geo-Redundant Storage (GRS).</span></span> <span data-ttu-id="61d7d-167">GRS реплицирует данные хранилища в сопряженный центр обработки данных, расположенный на расстоянии нескольких сотен километров в определенном географическом регионе.</span><span class="sxs-lookup"><span data-stu-id="61d7d-167">GRS replicates storage data to a paired datacenter hundreds of miles apart within a specific geographic region.</span></span> <span data-ttu-id="61d7d-168">Хранилище GRS обеспечивает дополнительный уровень надежности на случай серьезной аварии в центре обработки данных.</span><span class="sxs-lookup"><span data-stu-id="61d7d-168">GRS is designed to provide additional durability in case there is a major datacenter disaster.</span></span> <span data-ttu-id="61d7d-169">Корпорация Майкрософт контролирует отработку отказа. Она происходит только в случае серьезной аварии, при которой восстановить исходное основное расположение в разумные сроки невозможно.</span><span class="sxs-lookup"><span data-stu-id="61d7d-169">Microsoft controls when failover occurs, and failover is limited to major disasters in which the original primary location is deemed unrecoverable in a reasonable amount of time.</span></span> <span data-ttu-id="61d7d-170">В некоторых случаях на это может уйти несколько дней.</span><span class="sxs-lookup"><span data-stu-id="61d7d-170">Under some scenarios, this can be several days.</span></span> <span data-ttu-id="61d7d-171">Данные обычно реплицируются несколько минут, хотя интервал синхронизации еще не регламентирован соглашением об уровне обслуживания.</span><span class="sxs-lookup"><span data-stu-id="61d7d-171">Data is typically replicated within a few minutes, although synchronization interval is not yet covered by a service level agreement.</span></span>

<span data-ttu-id="61d7d-172">При географической отработке отказа способ получения доступа к учетной записи не меняется (URL-адрес и ключ учетной записи остаются неизменными).</span><span class="sxs-lookup"><span data-stu-id="61d7d-172">In the event of a geo-failover, there will be no change to how the account is accessed (the URL and account key will not change).</span></span> <span data-ttu-id="61d7d-173">Однако после отработки отказа учетная запись хранения будет находиться в другом регионе.</span><span class="sxs-lookup"><span data-stu-id="61d7d-173">The storage account will, however, be in a different region after failover.</span></span> <span data-ttu-id="61d7d-174">Это может повлиять на приложения, которые должны находиться в одном регионе с учетной записью хранения.</span><span class="sxs-lookup"><span data-stu-id="61d7d-174">This could impact applications that require regional affinity with their storage account.</span></span> <span data-ttu-id="61d7d-175">Даже если используются службы и приложения, для которых необязательно, чтобы учетная запись хранения находилась в том же центре обработки данных, задержки связи между центрами обработки данных и расходы, связанные с пропускной способностью, могут послужить вескими причинами для временного перемещения трафика в регион отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-175">Even for services and applications that do not require a storage account in the same datacenter, the cross-datacenter latency and bandwidth charges might be compelling reasons to move traffic to the failover region temporarily.</span></span> <span data-ttu-id="61d7d-176">Это может повлиять на общую стратегию аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="61d7d-176">This could factor into an overall disaster recovery strategy.</span></span>

<span data-ttu-id="61d7d-177">Помимо автоматической отработки отказа, предоставляемой в GRS, в Azure появилась служба, которая предоставляет доступ для чтения копии данных в расположении дополнительного хранилища.</span><span class="sxs-lookup"><span data-stu-id="61d7d-177">In addition to automatic failover provided by GRS, Azure has introduced a service that gives you read access to the copy of your data in the secondary storage location.</span></span> <span data-ttu-id="61d7d-178">Она называется так: геоизбыточное хранилище с доступом на чтение (RA-GRS).</span><span class="sxs-lookup"><span data-stu-id="61d7d-178">This is called Read-Access Geo-Redundant Storage (RA-GRS).</span></span>

<span data-ttu-id="61d7d-179">Дополнительные сведения о хранилище GRS и RA-GRS см. в статье [Репликация службы хранилища Azure](/azure/storage/storage-redundancy/).</span><span class="sxs-lookup"><span data-stu-id="61d7d-179">For more information about both GRS and RA-GRS storage, see [Azure Storage replication](/azure/storage/storage-redundancy/).</span></span>

### <a name="geo-replication-region-mappings"></a><span data-ttu-id="61d7d-180">Сопоставления регионов георепликации</span><span class="sxs-lookup"><span data-stu-id="61d7d-180">Geo-Replication region mappings:</span></span>
<span data-ttu-id="61d7d-181">Важно знать, в какой регион выполняется георепликация, чтобы понимать, где развертывать другие экземпляры данных, которые должны находиться в одном регионе с хранилищем данных.</span><span class="sxs-lookup"><span data-stu-id="61d7d-181">It is important to know where your data is geo-replicated, in order to know where to deploy the other instances of your data that require regional affinity with your storage.</span></span> <span data-ttu-id="61d7d-182">Дополнительные сведения см. в статье [Непрерывность бизнес-процессов и аварийное восстановление в службах BizTalk: пары регионов Azure](/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="61d7d-182">For more information see [Azure Paired Regions](/azure/best-practices-availability-paired-regions).</span></span>

### <a name="geo-replication-pricing"></a><span data-ttu-id="61d7d-183">Стоимость георепликации</span><span class="sxs-lookup"><span data-stu-id="61d7d-183">Geo-Replication pricing:</span></span>
<span data-ttu-id="61d7d-184">Георепликация включена в текущую стоимость службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-184">Geo-replication is included in current pricing for Azure Storage.</span></span> <span data-ttu-id="61d7d-185">Это называется геоизбыточным хранилищем (GRS).</span><span class="sxs-lookup"><span data-stu-id="61d7d-185">This is called Geo-Redundant Storage (GRS).</span></span> <span data-ttu-id="61d7d-186">Если георепликация данных не требуется, вы можете отключить ее для своей учетной записи.</span><span class="sxs-lookup"><span data-stu-id="61d7d-186">If you do not want your data geo-replicated you can disable geo-replication for your account.</span></span> <span data-ttu-id="61d7d-187">Это называется локально избыточным хранилищем, и его стоимость меньше стоимости хранилища GRS.</span><span class="sxs-lookup"><span data-stu-id="61d7d-187">This is called Locally Redundant Storage, and it is charged at a discounted price compared to GRS.</span></span>

### <a name="determining-if-a-geo-failover-has-occurred"></a><span data-ttu-id="61d7d-188">Как определить, что произошла географическая отработка отказа</span><span class="sxs-lookup"><span data-stu-id="61d7d-188">Determining if a geo-failover has occurred</span></span>
<span data-ttu-id="61d7d-189">При географической отработке отказа сведения о ней публикуются на [панели мониторинга работоспособности служб Azure](https://azure.microsoft.com/status/).</span><span class="sxs-lookup"><span data-stu-id="61d7d-189">If a geo-failover occurs, this will be posted to the [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span> <span data-ttu-id="61d7d-190">Однако приложения могут автоматически определять это, наблюдая за географическим регионом своей учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="61d7d-190">Applications can implement an automated means of detecting this, however, by monitoring the geo-region for their storage account.</span></span> <span data-ttu-id="61d7d-191">Это можно использовать для запуска других операций восстановления, например активации вычислительных ресурсов в географическом регионе, в который перемещено их хранилище.</span><span class="sxs-lookup"><span data-stu-id="61d7d-191">This can be used to trigger other recovery operations, such as activation of compute resources in the geo-region where their storage moved to.</span></span> <span data-ttu-id="61d7d-192">Для этого можно отправить запрос из API управления службами с помощью процедуры [получения свойств учетной записи хранения](https://msdn.microsoft.com/library/ee460802.aspx).</span><span class="sxs-lookup"><span data-stu-id="61d7d-192">You can perform a query for this from the service management API, by using [Get Storage Account Properties](https://msdn.microsoft.com/library/ee460802.aspx).</span></span> <span data-ttu-id="61d7d-193">Необходимы следующие свойства:</span><span class="sxs-lookup"><span data-stu-id="61d7d-193">The relevant properties are:</span></span>

    <GeoPrimaryRegion>primary-region</GeoPrimaryRegion>
    <StatusOfPrimary>[Available|Unavailable]</StatusOfPrimary>
    <LastGeoFailoverTime>DateTime</LastGeoFailoverTime>
    <GeoSecondaryRegion>secondary-region</GeoSecondaryRegion>
    <StatusOfSecondary>[Available|Unavailable]</StatusOfSecondary>

### <a name="vm-disks-and-geo-failover"></a><span data-ttu-id="61d7d-194">Диски виртуальных машин и географическая отработка отказа</span><span class="sxs-lookup"><span data-stu-id="61d7d-194">VM disks and geo-failover</span></span>
<span data-ttu-id="61d7d-195">Как уже обсуждалось в разделе о дисках виртуальных машин, нет никаких гарантий согласованности данных между различными дисками виртуальных машин после отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-195">As discussed in the section on VM disks, there are no guarantees for data consistency across VM disks after a failover.</span></span> <span data-ttu-id="61d7d-196">Чтобы обеспечить правильность резервных копий, для резервного копирования и восстановления данных приложений следует использовать службу архивации, такую как Data Protection Manager.</span><span class="sxs-lookup"><span data-stu-id="61d7d-196">To ensure correctness of backups, a backup product such as Data Protection Manager should be used to back up and restore application data.</span></span>

## <a name="database"></a><span data-ttu-id="61d7d-197">База данных</span><span class="sxs-lookup"><span data-stu-id="61d7d-197">Database</span></span>
### <a name="sql-database"></a><span data-ttu-id="61d7d-198">База данных SQL</span><span class="sxs-lookup"><span data-stu-id="61d7d-198">SQL Database</span></span>
<span data-ttu-id="61d7d-199">База данных SQL Azure предоставляет два типа восстановления данных: геовосстановление и активная георепликация.</span><span class="sxs-lookup"><span data-stu-id="61d7d-199">Azure SQL Database provides two types of recovery: Geo-Restore and Active Geo-Replication.</span></span>

#### <a name="geo-restore"></a><span data-ttu-id="61d7d-200">Геовосстановление</span><span class="sxs-lookup"><span data-stu-id="61d7d-200">Geo-Restore</span></span>
<span data-ttu-id="61d7d-201">Функция [геовосстановления](/azure/sql-database/sql-database-recovery-using-backups/#geo-restore) также доступна для баз данных уровней "Базовый", "Стандартный" и "Премиум".</span><span class="sxs-lookup"><span data-stu-id="61d7d-201">[Geo-Restore](/azure/sql-database/sql-database-recovery-using-backups/#geo-restore) is also available with Basic, Standard, and Premium databases.</span></span> <span data-ttu-id="61d7d-202">Она используется по умолчанию, когда база данных недоступна из-за происшествия в регионе, где она размещена.</span><span class="sxs-lookup"><span data-stu-id="61d7d-202">It provides the default recovery option when the database is unavailable because of an incident in the region where your database is hosted.</span></span> <span data-ttu-id="61d7d-203">Как и функция восстановления до точки во времени, геовосстановление использует резервные копии базы данных из геоизбыточного хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-203">Similar to Point-In-Time Restore, Geo-Restore relies on database backups in geo-redundant Azure storage.</span></span> <span data-ttu-id="61d7d-204">Восстановление выполняется на основе резервной копии из удаленного хранилища, что позволяет защитить базу данных от сбоев в основном регионе.</span><span class="sxs-lookup"><span data-stu-id="61d7d-204">It restores from the geo-replicated backup copy, and therefore is resilient to the storage outages in the primary region.</span></span> <span data-ttu-id="61d7d-205">Дополнительные сведения см. в статье [Восстановление базы данных SQL Azure или переход на базу данных-получатель при отказе](/azure/sql-database/sql-database-disaster-recovery/).</span><span class="sxs-lookup"><span data-stu-id="61d7d-205">For more details, see [Restore an Azure SQL Database or failover to a secondary](/azure/sql-database/sql-database-disaster-recovery/).</span></span>

#### <a name="active-geo-replication"></a><span data-ttu-id="61d7d-206">Активная георепликация</span><span class="sxs-lookup"><span data-stu-id="61d7d-206">Active Geo-Replication</span></span>
<span data-ttu-id="61d7d-207">[Активная георепликация](/azure/sql-database/sql-database-geo-replication-overview/) доступна для всех уровней баз данных.</span><span class="sxs-lookup"><span data-stu-id="61d7d-207">[Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/) is available for all database tiers.</span></span> <span data-ttu-id="61d7d-208">Она рассчитана на приложения, которые предъявляют более высокие требования к восстановлению по сравнению с теми, которые может обеспечить обычное геовосстановление.</span><span class="sxs-lookup"><span data-stu-id="61d7d-208">It’s designed for applications that have more aggressive recovery requirements than Geo-Restore can offer.</span></span> <span data-ttu-id="61d7d-209">Активная георепликация позволяет создавать до четырех доступных для чтения реплик баз данных на серверах в разных регионах.</span><span class="sxs-lookup"><span data-stu-id="61d7d-209">Using Active Geo-Replication, you can create up to four readable secondaries on servers in different regions.</span></span> <span data-ttu-id="61d7d-210">Отработку отказа можно выполнить на любую из баз данных-получателей.</span><span class="sxs-lookup"><span data-stu-id="61d7d-210">You can initiate failover to any of the secondaries.</span></span> <span data-ttu-id="61d7d-211">Кроме того, активная георепликация применяется при обновлении приложений и их перемещении, а также для балансировки нагрузки (распределения операций чтения).</span><span class="sxs-lookup"><span data-stu-id="61d7d-211">In addition, Active Geo-Replication can be used to support the application upgrade or relocation scenarios, as well as load balancing for read-only workloads.</span></span> <span data-ttu-id="61d7d-212">Чтобы получить дополнительные сведения, ознакомьтесь с [настройкой георепликации](/azure/sql-database/sql-database-geo-replication-portal/) и [отработкой отказа на базу данных-получатель](/azure/sql-database/sql-database-geo-replication-failover-portal/).</span><span class="sxs-lookup"><span data-stu-id="61d7d-212">For details, see [configure Geo-Replication](/azure/sql-database/sql-database-geo-replication-portal/) and to [fail over to the secondary database](/azure/sql-database/sql-database-geo-replication-failover-portal/).</span></span> <span data-ttu-id="61d7d-213">Дополнительные сведения о разработке и реализации приложений и их обновления без простоев см. в статьях [Создание приложения для аварийного восстановления облака с использованием активной георепликации в базе данных SQL](/azure/sql-database/sql-database-designing-cloud-solutions-for-disaster-recovery/) и [Управление последовательными обновлениями для облачных приложений с помощью активной георепликации базы данных SQL](/azure/sql-database/sql-database-manage-application-rolling-upgrade/).</span><span class="sxs-lookup"><span data-stu-id="61d7d-213">Refer to [Design an application for cloud disaster recovery using Active Geo-Replication in SQL Database](/azure/sql-database/sql-database-designing-cloud-solutions-for-disaster-recovery/) and [Managing rolling upgrades of cloud applications using SQL Database Active Geo-Replication](/azure/sql-database/sql-database-manage-application-rolling-upgrade/) for details on how to design and implement applications and applications upgrade without downtime.</span></span>

### <a name="sql-server-on-virtual-machines"></a><span data-ttu-id="61d7d-214">SQL Server на виртуальных машинах</span><span class="sxs-lookup"><span data-stu-id="61d7d-214">SQL Server on Virtual Machines</span></span>
<span data-ttu-id="61d7d-215">Существуют различные способы восстановления и обеспечения высокой доступности службы SQL Server 2012 (и более поздних версий), работающей в виртуальных машинах Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-215">A variety of options are available for recovery and high availability for SQL Server 2012 (and later) running in Azure Virtual Machines.</span></span> <span data-ttu-id="61d7d-216">Дополнительные сведения см. в статье [Высокий уровень доступности и аварийное восстановление для SQL Server на виртуальных машинах Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span><span class="sxs-lookup"><span data-stu-id="61d7d-216">For more information, see [High availability and disaster recovery for SQL Server in Azure Virtual Machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>

## <a name="other-azure-platform-services"></a><span data-ttu-id="61d7d-217">Другие службы платформы Azure</span><span class="sxs-lookup"><span data-stu-id="61d7d-217">Other Azure platform services</span></span>
<span data-ttu-id="61d7d-218">При попытке запуска облачной службы в нескольких регионах Azure необходимо учитывать последствия каждой зависимости.</span><span class="sxs-lookup"><span data-stu-id="61d7d-218">When attempting to run your cloud service in multiple Azure regions, you must consider the implications for each of your dependencies.</span></span> <span data-ttu-id="61d7d-219">В следующих разделах представлено руководство по конкретным службам для пользователей, которым нужно использовать ту же службу Azure в альтернативном центре обработки данных Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-219">In the following sections, the service-specific guidance assumes that you must use the same Azure service in an alternate Azure datacenter.</span></span> <span data-ttu-id="61d7d-220">Это включает в себя как задачи конфигурации, так и задачи репликации данных.</span><span class="sxs-lookup"><span data-stu-id="61d7d-220">This involves both configuration and data-replication tasks.</span></span>

> [!NOTE]
> <span data-ttu-id="61d7d-221">В некоторых случаях эти действия помогают устранить сбой конкретной службы, а не целое событие в центре обработки данных.</span><span class="sxs-lookup"><span data-stu-id="61d7d-221">In some cases, these steps can help to mitigate a service-specific outage rather than an entire datacenter event.</span></span> <span data-ttu-id="61d7d-222">Если говорить о приложении, сбой конкретной службы тоже может ограничивать работу службы и требовать временного переноса ее в альтернативный регион Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-222">From the application perspective, a service-specific outage might be just as limiting and would require temporarily migrating the service to an alternate Azure region.</span></span>
> 
> 

### <a name="service-bus"></a><span data-ttu-id="61d7d-223">Service Bus</span><span class="sxs-lookup"><span data-stu-id="61d7d-223">Service Bus</span></span>
<span data-ttu-id="61d7d-224">Служебная шина Azure использует уникальное пространство имен, которое не охватывает регионы Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-224">Azure Service Bus uses a unique namespace that does not span Azure regions.</span></span> <span data-ttu-id="61d7d-225">Поэтому первым требованием является настройка необходимых пространств имен служебной шины в альтернативном регионе.</span><span class="sxs-lookup"><span data-stu-id="61d7d-225">So the first requirement is to setup the necessary service bus namespaces in the alternate region.</span></span> <span data-ttu-id="61d7d-226">Тем не менее нужно также учитывать факторы, касающиеся надежности сообщений в очереди.</span><span class="sxs-lookup"><span data-stu-id="61d7d-226">However, there are also considerations for the durability of the queued messages.</span></span> <span data-ttu-id="61d7d-227">Существует несколько стратегий репликации сообщений в регионах Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-227">There are several strategies for replicating messages across Azure regions.</span></span> <span data-ttu-id="61d7d-228">Дополнительные сведения об этих стратегиях репликации и других стратегиях аварийного восстановления см. в статье [Рекомендации по изолированию приложений от простоев и аварий служебной шины](/azure/service-bus-messaging/service-bus-outages-disasters/).</span><span class="sxs-lookup"><span data-stu-id="61d7d-228">For the details on these replication strategies and other disaster recovery strategies, see [Best practices for insulating applications against Service Bus outages and disasters](/azure/service-bus-messaging/service-bus-outages-disasters/).</span></span> <span data-ttu-id="61d7d-229">Сведения о других вопросах доступности см. в разделе о [доступности служебной шины](recovery-local-failures.md#other-azure-platform-services).</span><span class="sxs-lookup"><span data-stu-id="61d7d-229">For other availability considerations, see [Service Bus (Availability)](recovery-local-failures.md#other-azure-platform-services).</span></span>

### <a name="app-service"></a><span data-ttu-id="61d7d-230">Служба приложений</span><span class="sxs-lookup"><span data-stu-id="61d7d-230">App Service</span></span>
<span data-ttu-id="61d7d-231">Чтобы переместить приложение Azure службы приложений Azure, например веб-приложение или мобильное приложение, в дополнительный регион Azure, требуется резервная копия веб-сайта, доступная для публикации.</span><span class="sxs-lookup"><span data-stu-id="61d7d-231">To migrate an Azure App Service application, such as Web Apps or Mobile Apps, to a secondary Azure region, you must have a backup of the website available for publishing.</span></span> <span data-ttu-id="61d7d-232">Если сбой охватывает лишь часть центра обработки данных Azure, можно использовать FTP для скачивания последней резервной копии содержимого веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="61d7d-232">If the outage does not involve the entire Azure datacenter, it might be possible to use FTP to download a recent backup of the site content.</span></span> <span data-ttu-id="61d7d-233">После этого создайте приложение в альтернативном регионе, если вы не сделали это ранее для обеспечения резервной мощности.</span><span class="sxs-lookup"><span data-stu-id="61d7d-233">Then create a new app in the alternate region, unless you have previously done this to reserve capacity.</span></span> <span data-ttu-id="61d7d-234">Опубликуйте сайт в новом регионе и внесите все необходимые изменения конфигурации.</span><span class="sxs-lookup"><span data-stu-id="61d7d-234">Publish the site to the new region, and make any necessary configuration changes.</span></span> <span data-ttu-id="61d7d-235">Эти изменения могут включать строки подключения к базе данных или другие параметры для конкретного региона.</span><span class="sxs-lookup"><span data-stu-id="61d7d-235">These changes could include database connection strings or other region-specific settings.</span></span> <span data-ttu-id="61d7d-236">При необходимости добавьте SSL-сертификат сайта и измените запись DNS CNAME таким образом, чтобы пользовательское доменное имя указывало на URL-адрес повторно развернутых веб-приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-236">If necessary, add the site’s SSL certificate and change the DNS CNAME record so that the custom domain name points to the redeployed Azure Web App URL.</span></span>

### <a name="hdinsight"></a><span data-ttu-id="61d7d-237">HDInsight</span><span class="sxs-lookup"><span data-stu-id="61d7d-237">HDInsight</span></span>
<span data-ttu-id="61d7d-238">Данные, связанные с HDInsight, по умолчанию сохраняются в хранилище BLOB-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-238">The data associated with HDInsight is stored by default in Azure Blob Storage.</span></span> <span data-ttu-id="61d7d-239">Для HDInsight требуется, чтобы обрабатывающий задания MapReduce кластер Hadoop находился в том же регионе, что и учетная запись хранения, содержащая анализируемые данные.</span><span class="sxs-lookup"><span data-stu-id="61d7d-239">HDInsight requires that a Hadoop cluster processing MapReduce jobs must be co-located in the same region as the storage account that contains the data being analyzed.</span></span> <span data-ttu-id="61d7d-240">Используя функцию георепликации, доступную для службы хранилища Azure, вы можете получить доступ к своим данным в дополнительном регионе, в который они были реплицированы, если по какой-то причине основной регион больше недоступен.</span><span class="sxs-lookup"><span data-stu-id="61d7d-240">Provided you use the geo-replication feature available to Azure Storage, you can access your data in the secondary region where the data was replicated if for some reason the primary region is no longer available.</span></span> <span data-ttu-id="61d7d-241">Вы можете создать кластер Hadoop в том регионе, в который были реплицированы данные, и продолжить их обработку.</span><span class="sxs-lookup"><span data-stu-id="61d7d-241">You can create a new Hadoop cluster in the region where the data has been replicated and continue processing it.</span></span> <span data-ttu-id="61d7d-242">Сведения о других вопросах доступности см. в разделе [HDInsight](recovery-local-failures.md#other-azure-platform-services).</span><span class="sxs-lookup"><span data-stu-id="61d7d-242">For other availability considerations, see [HDInsight (Availability)](recovery-local-failures.md#other-azure-platform-services).</span></span>

### <a name="sql-reporting"></a><span data-ttu-id="61d7d-243">Служба отчетов SQL Reporting</span><span class="sxs-lookup"><span data-stu-id="61d7d-243">SQL Reporting</span></span>
<span data-ttu-id="61d7d-244">В настоящее время для восстановления после потери региона Azure требуется наличие нескольких экземпляров службы SQL Reporting в разных регионах Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-244">At this time, recovering from the loss of an Azure region requires multiple SQL Reporting instances in different Azure regions.</span></span> <span data-ttu-id="61d7d-245">Эти экземпляры службы SQL Reporting должны получать доступ к одним и тем же данным, и эти данные должны иметь собственный план восстановления на случай аварии.</span><span class="sxs-lookup"><span data-stu-id="61d7d-245">These SQL Reporting instances should access the same data, and that data should have its own recovery plan in the event of a disaster.</span></span> <span data-ttu-id="61d7d-246">Вы также можете создать внешние резервные копии RDL-файла для каждого отчета.</span><span class="sxs-lookup"><span data-stu-id="61d7d-246">You can also maintain external backup copies of the RDL file for each report.</span></span>

### <a name="media-services"></a><span data-ttu-id="61d7d-247">Службы носителей</span><span class="sxs-lookup"><span data-stu-id="61d7d-247">Media Services</span></span>
<span data-ttu-id="61d7d-248">Для кодирования и потоковой передачи службы мультимедиа Azure используют разные способы восстановления.</span><span class="sxs-lookup"><span data-stu-id="61d7d-248">Azure Media Services has a different recovery approach for encoding and streaming.</span></span> <span data-ttu-id="61d7d-249">При региональном сбое, как правило, потоковая передача является более важной.</span><span class="sxs-lookup"><span data-stu-id="61d7d-249">Typically, streaming is more critical during a regional outage.</span></span> <span data-ttu-id="61d7d-250">Чтобы подготовиться к этому, вы должны иметь учетную запись служб мультимедиа в двух разных регионах Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-250">To prepare for this, you should have a Media Services account in two different Azure regions.</span></span> <span data-ttu-id="61d7d-251">Закодированное содержимое должно быть расположено в обоих регионах.</span><span class="sxs-lookup"><span data-stu-id="61d7d-251">The encoded content should be located in both regions.</span></span> <span data-ttu-id="61d7d-252">Во время сбоя вы можете перенаправить потоковый трафик в альтернативный регион.</span><span class="sxs-lookup"><span data-stu-id="61d7d-252">During a failure, you can redirect the streaming traffic to the alternate region.</span></span> <span data-ttu-id="61d7d-253">Кодирование может выполняться в любом регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-253">Encoding can be performed in any Azure region.</span></span> <span data-ttu-id="61d7d-254">Если для кодировки важно время выполнения, например во время обработки интерактивного события, вы должны быть готовы к отправке заданий в альтернативный центр обработки данных во время сбоев.</span><span class="sxs-lookup"><span data-stu-id="61d7d-254">If encoding is time-sensitive, for example during live event processing, you must be prepared to submit jobs to an alternate datacenter during failures.</span></span>

### <a name="virtual-network"></a><span data-ttu-id="61d7d-255">Виртуальная сеть</span><span class="sxs-lookup"><span data-stu-id="61d7d-255">Virtual network</span></span>
<span data-ttu-id="61d7d-256">Файлы конфигурации обеспечивают самый быстрый способ настройки виртуальной сети в альтернативном регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-256">Configuration files provide the quickest way to set up a virtual network in an alternate Azure region.</span></span> <span data-ttu-id="61d7d-257">После настройки виртуальной сети в основном регионе Azure [экспортируйте параметры текущей виртуальной сети](/azure/virtual-network/virtual-networks-create-vnet-classic-portal/) в файл конфигурации сети.</span><span class="sxs-lookup"><span data-stu-id="61d7d-257">After configuring the virtual network in the primary Azure region, [export the virtual network settings](/azure/virtual-network/virtual-networks-create-vnet-classic-portal/) for the current network to a network configuration file.</span></span> <span data-ttu-id="61d7d-258">При возникновении сбоя в основном регионе [восстановите виртуальную сеть](/azure/virtual-network/virtual-networks-create-vnet-classic-portal/) из сохраненного файла конфигурации.</span><span class="sxs-lookup"><span data-stu-id="61d7d-258">In the event of an outage in the primary region, [restore the virtual network](/azure/virtual-network/virtual-networks-create-vnet-classic-portal/) from the stored configuration file.</span></span> <span data-ttu-id="61d7d-259">Затем настройте другие облачные службы, виртуальные машины или распределенные параметры для работы с новой виртуальной сетью.</span><span class="sxs-lookup"><span data-stu-id="61d7d-259">Then configure other cloud services, virtual machines, or cross-premises settings to work with the new virtual network.</span></span>

## <a name="checklists-for-disaster-recovery"></a><span data-ttu-id="61d7d-260">Контрольные списки для аварийного восстановления</span><span class="sxs-lookup"><span data-stu-id="61d7d-260">Checklists for disaster recovery</span></span>
## <a name="cloud-services-checklist"></a><span data-ttu-id="61d7d-261">Контрольный список для облачных служб</span><span class="sxs-lookup"><span data-stu-id="61d7d-261">Cloud Services checklist</span></span>
1. <span data-ttu-id="61d7d-262">Просмотрите раздел "Облачные службы" этого документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-262">Review the Cloud Services section of this document.</span></span>
2. <span data-ttu-id="61d7d-263">Создайте межрегиональную стратегию аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="61d7d-263">Create a cross-region disaster recovery strategy.</span></span>
3. <span data-ttu-id="61d7d-264">Оцените преимущества и недостатки резервирования ресурсов в альтернативных регионах.</span><span class="sxs-lookup"><span data-stu-id="61d7d-264">Understand trade-offs in reserving capacity in alternate regions.</span></span>
4. <span data-ttu-id="61d7d-265">Используйте средства маршрутизации трафика, такие как диспетчер трафика Azure.</span><span class="sxs-lookup"><span data-stu-id="61d7d-265">Use traffic routing tools, such as Azure Traffic Manager.</span></span>

## <a name="virtual-machines-checklist"></a><span data-ttu-id="61d7d-266">Контрольный список для виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="61d7d-266">Virtual Machines checklist</span></span>
1. <span data-ttu-id="61d7d-267">Просмотрите раздел "Виртуальные машины" этого документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-267">Review the Virtual Machines section of this document.</span></span>
2. <span data-ttu-id="61d7d-268">Используйте [службу архивации Azure](https://azure.microsoft.com/services/backup/) для создания согласованных резервных копий приложения по регионам.</span><span class="sxs-lookup"><span data-stu-id="61d7d-268">Use [Azure Backup](https://azure.microsoft.com/services/backup/) to create application consistent backups across regions.</span></span>

## <a name="storage-checklist"></a><span data-ttu-id="61d7d-269">Контрольный список для хранилища</span><span class="sxs-lookup"><span data-stu-id="61d7d-269">Storage checklist</span></span>
1. <span data-ttu-id="61d7d-270">Просмотрите раздел "Хранилище" этого документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-270">Review the Storage section of this document.</span></span>
2. <span data-ttu-id="61d7d-271">Не отключайте георепликацию ресурсов хранилища.</span><span class="sxs-lookup"><span data-stu-id="61d7d-271">Do not disable geo-replication of storage resources.</span></span>
3. <span data-ttu-id="61d7d-272">Определите альтернативный регион георепликации на случай отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-272">Understand alternate region for geo-replication in the event of failover.</span></span>
4. <span data-ttu-id="61d7d-273">Создайте пользовательские стратегии архивирования для управляемых пользователем стратегий отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-273">Create custom backup strategies for user-controlled failover strategies.</span></span>

## <a name="sql-database-checklist"></a><span data-ttu-id="61d7d-274">Контрольный список для Базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="61d7d-274">SQL Database checklist</span></span>
1. <span data-ttu-id="61d7d-275">Просмотрите раздел "База данных SQL" этого документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-275">Review the SQL Database section of this document.</span></span>
2. <span data-ttu-id="61d7d-276">В зависимости от ситуации используйте [геовосстановление](/azure/sql-database/sql-database-recovery-using-backups/#geo-restore) или [георепликацию](/azure/sql-database/sql-database-geo-replication-overview/).</span><span class="sxs-lookup"><span data-stu-id="61d7d-276">Use [Geo-Restore](/azure/sql-database/sql-database-recovery-using-backups/#geo-restore) or [Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/) as appropriate.</span></span>

## <a name="sql-server-on-virtual-machines-checklist"></a><span data-ttu-id="61d7d-277">Контрольный список для SQL Server на виртуальных машинах</span><span class="sxs-lookup"><span data-stu-id="61d7d-277">SQL Server on Virtual Machines checklist</span></span>
1. <span data-ttu-id="61d7d-278">Просмотрите раздел "SQL Server на виртуальных машинах" этого документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-278">Review the SQL Server on Virtual Machines section of this document.</span></span>
2. <span data-ttu-id="61d7d-279">Используйте межрегиональные группы доступности AlwaysOn или зеркальное отображение базы данных.</span><span class="sxs-lookup"><span data-stu-id="61d7d-279">Use cross-region AlwaysOn Availability Groups or database mirroring.</span></span>
3. <span data-ttu-id="61d7d-280">Можно также использовать архивацию и восстановление в хранилище BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="61d7d-280">Alternately use backup and restore to blob storage.</span></span>

## <a name="service-bus-checklist"></a><span data-ttu-id="61d7d-281">Контрольный список для служебной шины</span><span class="sxs-lookup"><span data-stu-id="61d7d-281">Service Bus checklist</span></span>
1. <span data-ttu-id="61d7d-282">Просмотрите раздел "Служебная шина" этого документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-282">Review the Service Bus section of this document.</span></span>
2. <span data-ttu-id="61d7d-283">Настройте пространство имен служебной шины в альтернативном регионе.</span><span class="sxs-lookup"><span data-stu-id="61d7d-283">Configure a Service Bus namespace in an alternate region.</span></span>
3. <span data-ttu-id="61d7d-284">Рассмотрите пользовательские стратегии репликации для сообщений между регионами.</span><span class="sxs-lookup"><span data-stu-id="61d7d-284">Consider custom replication strategies for messages across regions.</span></span>

## <a name="app-service-checklist"></a><span data-ttu-id="61d7d-285">Контрольный список для службы приложений</span><span class="sxs-lookup"><span data-stu-id="61d7d-285">App Service checklist</span></span>
1. <span data-ttu-id="61d7d-286">Просмотрите раздел "Служба приложений" этого документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-286">Review the App Service section of this document.</span></span>
2. <span data-ttu-id="61d7d-287">Сохраните резервные копии сайта за пределами основного региона.</span><span class="sxs-lookup"><span data-stu-id="61d7d-287">Maintain site backups outside of the primary region.</span></span>
3. <span data-ttu-id="61d7d-288">Если сбой частичный, попробуйте получить доступ к текущему сайту при помощи протокола FTP.</span><span class="sxs-lookup"><span data-stu-id="61d7d-288">If outage is partial, attempt to retrieve current site with FTP.</span></span>
4. <span data-ttu-id="61d7d-289">Спланируйте развертывание сайта на новом или существующем сайте в альтернативном регионе.</span><span class="sxs-lookup"><span data-stu-id="61d7d-289">Plan to deploy the site to new or existing site in an alternate region.</span></span>
5. <span data-ttu-id="61d7d-290">Создайте план изменений конфигурации для приложения и для записей DNS CNAME.</span><span class="sxs-lookup"><span data-stu-id="61d7d-290">Plan configuration changes for both application and DNS CNAME records.</span></span>

## <a name="hdinsight-checklist"></a><span data-ttu-id="61d7d-291">Контрольный список для HDInsight</span><span class="sxs-lookup"><span data-stu-id="61d7d-291">HDInsight checklist</span></span>
1. <span data-ttu-id="61d7d-292">Просмотрите раздел "HDInsight" этого документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-292">Review the HDInsight section of this document.</span></span>
2. <span data-ttu-id="61d7d-293">Создайте новый кластер Hadoop в регионе с реплицированными данными.</span><span class="sxs-lookup"><span data-stu-id="61d7d-293">Create a new Hadoop cluster in the region with replicated data.</span></span>

## <a name="sql-reporting-checklist"></a><span data-ttu-id="61d7d-294">Контрольный список для службы SQL Reporting</span><span class="sxs-lookup"><span data-stu-id="61d7d-294">SQL Reporting checklist</span></span>
1. <span data-ttu-id="61d7d-295">Просмотрите раздел "Служба SQL Reporting" этого документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-295">Review the SQL Reporting section of this document.</span></span>
2. <span data-ttu-id="61d7d-296">Настройте альтернативный экземпляр службы SQL Reporting в другом регионе.</span><span class="sxs-lookup"><span data-stu-id="61d7d-296">Maintain an alternate SQL Reporting instance in a different region.</span></span>
3. <span data-ttu-id="61d7d-297">Разработайте отдельный план для репликации целевых данных в этот регион.</span><span class="sxs-lookup"><span data-stu-id="61d7d-297">Maintain a separate plan to replicate the target to that region.</span></span>

## <a name="media-services-checklist"></a><span data-ttu-id="61d7d-298">Контрольный список для служб мультимедиа</span><span class="sxs-lookup"><span data-stu-id="61d7d-298">Media Services checklist</span></span>
1. <span data-ttu-id="61d7d-299">Просмотрите раздел "Службы мультимедиа" этого документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-299">Review the Media Services section of this document.</span></span>
2. <span data-ttu-id="61d7d-300">Создайте учетную запись служб мультимедиа в альтернативном регионе.</span><span class="sxs-lookup"><span data-stu-id="61d7d-300">Create a Media Services account in an alternate region.</span></span>
3. <span data-ttu-id="61d7d-301">Закодируйте одинаковое содержимое в обоих регионах для поддержки отработки отказа потоковой передачи.</span><span class="sxs-lookup"><span data-stu-id="61d7d-301">Encode the same content in both regions to support streaming failover.</span></span>
4. <span data-ttu-id="61d7d-302">Отправьте задания кодирования в альтернативный регион в случае нарушения работы службы.</span><span class="sxs-lookup"><span data-stu-id="61d7d-302">Submit encoding jobs to an alternate region in the event of a service disruption.</span></span>

## <a name="virtual-network-checklist"></a><span data-ttu-id="61d7d-303">Контрольный список для виртуальной сети</span><span class="sxs-lookup"><span data-stu-id="61d7d-303">Virtual Network checklist</span></span>
1. <span data-ttu-id="61d7d-304">Просмотрите раздел "Виртуальная сеть" этого документа.</span><span class="sxs-lookup"><span data-stu-id="61d7d-304">Review the Virtual Network section of this document.</span></span>
2. <span data-ttu-id="61d7d-305">Используйте экспортированные параметры виртуальной сети, чтобы повторно создать ее в другом регионе.</span><span class="sxs-lookup"><span data-stu-id="61d7d-305">Use exported virtual network settings to re-create it in another region.</span></span>

