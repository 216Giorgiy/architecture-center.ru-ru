---
title: "Техническое руководство по обеспечению устойчивости. Восстановление из локальной инфраструктуры в Azure"
description: "Это статья посвящена описанию и разработке систем восстановления из локальной инфраструктуры в Azure"
author: adamglick
ms.date: 08/18/2016
ms.openlocfilehash: f5ce86dbd605fa7dc74e6a7cc97f0d6c6acd79e5
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/14/2017
---
[!INCLUDE [header](../_includes/header.md)]
# <a name="azure-resiliency-technical-guidance-recovery-from-on-premises-to-azure"></a><span data-ttu-id="5958b-103">Техническое руководство по обеспечению устойчивости в Azure. Восстановление из локальной среды в Azure</span><span class="sxs-lookup"><span data-stu-id="5958b-103">Azure resiliency technical guidance: Recovery from on-premises to Azure</span></span>
<span data-ttu-id="5958b-104">Azure предоставляет широкий набор служб для расширения локального центра обработки данных в Azure. Это позволяет повысить доступность и использовать аварийное восстановление.</span><span class="sxs-lookup"><span data-stu-id="5958b-104">Azure provides a comprehensive set of services for enabling the extension of an on-premises datacenter to Azure for high availability and disaster recovery purposes:</span></span>

* <span data-ttu-id="5958b-105">**Сеть**. Виртуальная частная сеть безопасно расширяет локальную сеть до облака.</span><span class="sxs-lookup"><span data-stu-id="5958b-105">**Networking**: With a virtual private network, you securely extend your on-premises network to the cloud.</span></span>
* <span data-ttu-id="5958b-106">**Среда выполнения**. Клиенты, использующие в локальной сети технологию Hyper-V, могут легко перенести существующие виртуальные машины в Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-106">**Compute**: Customers using Hyper-V on-premises can “lift and shift” existing virtual machines (VMs) to Azure.</span></span>
* <span data-ttu-id="5958b-107">**Хранилище**. StorSimple расширяет файловую систему до службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-107">**Storage**: StorSimple extends your file system to Azure Storage.</span></span> <span data-ttu-id="5958b-108">Служба архивации Azure позволяет архивировать файлы и базы данных SQL в службу хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-108">The Azure Backup service provides backup for files and SQL databases to Azure Storage.</span></span>
* <span data-ttu-id="5958b-109">**Репликация базы данных**. Группы доступности для SQL Server 2014 или более поздней версии обеспечивают высокую доступность и аварийное восстановление локальных данных.</span><span class="sxs-lookup"><span data-stu-id="5958b-109">**Database replication**: With SQL Server 2014 (or later) Availability Groups, you can implement high availability and disaster recovery for your on-premises data.</span></span>

## <a name="networking"></a><span data-ttu-id="5958b-110">Сеть</span><span class="sxs-lookup"><span data-stu-id="5958b-110">Networking</span></span>
<span data-ttu-id="5958b-111">Виртуальная сеть Azure позволяет создавать логически изолированный раздел в среде Azure и безопасно подключать его к вашему локальному центру обработки данных или отдельному клиентскому компьютеру с помощью подключения IPsec.</span><span class="sxs-lookup"><span data-stu-id="5958b-111">You can use Azure Virtual Network to create a logically isolated section in Azure and securely connect it to your on-premises datacenter or a single client machine by using an IPsec connection.</span></span> <span data-ttu-id="5958b-112">Виртуальная сеть упрощает использование масштабируемой и доступной по запросу инфраструктуры Azure, обеспечивая при этом подключение к локальным данным и приложениям, в том числе к системам под управлением Windows Server или UNIX и мейнфреймам.</span><span class="sxs-lookup"><span data-stu-id="5958b-112">With Virtual Network, you can take advantage of the scalable, on-demand infrastructure in Azure while providing connectivity to data and applications on-premises, including systems running on Windows Server, mainframes, and UNIX.</span></span> <span data-ttu-id="5958b-113">Дополнительные сведения см. в документации по [сетям Azure](/azure/virtual-network/virtual-networks-overview/).</span><span class="sxs-lookup"><span data-stu-id="5958b-113">See [Azure networking documentation](/azure/virtual-network/virtual-networks-overview/) for more information.</span></span>

## <a name="compute"></a><span data-ttu-id="5958b-114">Среда выполнения приложений</span><span class="sxs-lookup"><span data-stu-id="5958b-114">Compute</span></span>
<span data-ttu-id="5958b-115">Если в локальной среде используется технология Hyper-V, вы можете перенести существующие виртуальные машины в среду Azure или других поставщиков услуг под управлением Windows Server 2012 или более поздней версии. Для этого не нужно вносить изменения в виртуальную машину или преобразовывать используемые ею форматы.</span><span class="sxs-lookup"><span data-stu-id="5958b-115">If you're using Hyper-V on-premises, you can “lift and shift” existing virtual machines to Azure and service providers running Windows Server 2012 (or later), without making changes to the VM or converting VM formats.</span></span> <span data-ttu-id="5958b-116">Дополнительные сведения см. в статье [О дисках и виртуальных жестких дисках для виртуальных машин](/azure/virtual-machines/virtual-machines-linux-about-disks-vhds/?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="5958b-116">For more information, see [About disks and VHDs for Azure virtual machines](/azure/virtual-machines/virtual-machines-linux-about-disks-vhds/?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

## <a name="azure-site-recovery"></a><span data-ttu-id="5958b-117">Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="5958b-117">Azure Site Recovery</span></span>
<span data-ttu-id="5958b-118">Azure предоставляет службу [Azure Site Recovery](https://azure.microsoft.com/services/site-recovery/) в формате DRaaS ("аварийное восстановление как услуга").</span><span class="sxs-lookup"><span data-stu-id="5958b-118">If you want disaster recovery as a service (DRaaS), Azure provides [Azure Site Recovery](https://azure.microsoft.com/services/site-recovery/).</span></span> <span data-ttu-id="5958b-119">Azure Site Recovery обеспечивает комплексную защиту для VMware, Hyper-V и физических серверов.</span><span class="sxs-lookup"><span data-stu-id="5958b-119">Azure Site Recovery offers comprehensive protection for VMware, Hyper-V, and physical servers.</span></span> <span data-ttu-id="5958b-120">Azure Site Recovery позволяет использовать для аварийного восстановления другой локальный сервер или платформу Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-120">With Azure Site Recovery, you can use another on-premises server or Azure as your recovery site.</span></span> <span data-ttu-id="5958b-121">Дополнительные сведения об Azure Site Recovery см. [здесь](https://azure.microsoft.com/documentation/services/site-recovery/).</span><span class="sxs-lookup"><span data-stu-id="5958b-121">For more information on Azure Site Recovery, see the [Azure Site Recovery documentation](https://azure.microsoft.com/documentation/services/site-recovery/).</span></span>

## <a name="storage"></a><span data-ttu-id="5958b-122">Хранилище</span><span class="sxs-lookup"><span data-stu-id="5958b-122">Storage</span></span>
<span data-ttu-id="5958b-123">Есть несколько вариантов использования Azure для резервного копирования локальных данных.</span><span class="sxs-lookup"><span data-stu-id="5958b-123">There are several options for using Azure as a backup site for on-premises data.</span></span>

### <a name="storsimple"></a><span data-ttu-id="5958b-124">StorSimple</span><span class="sxs-lookup"><span data-stu-id="5958b-124">StorSimple</span></span>
<span data-ttu-id="5958b-125">StorSimple безопасно и прозрачно интегрирует облачное хранилище и локальные приложения.</span><span class="sxs-lookup"><span data-stu-id="5958b-125">StorSimple securely and transparently integrates cloud storage for on-premises applications.</span></span> <span data-ttu-id="5958b-126">Это единое устройство, объединяющее высокопроизводительное многоуровневое локальное и облачное хранилище, динамическую архивацию, функции защиты данных на основе облака и аварийное восстановление.</span><span class="sxs-lookup"><span data-stu-id="5958b-126">It also offers a single appliance that delivers high-performance tiered local and cloud storage, live archiving, cloud-based data protection, and disaster recovery.</span></span> <span data-ttu-id="5958b-127">Дополнительные сведения см. на [странице продукта StorSimple](https://azure.microsoft.com/services/storsimple/).</span><span class="sxs-lookup"><span data-stu-id="5958b-127">For more information, see the [StorSimple product page](https://azure.microsoft.com/services/storsimple/).</span></span>

### <a name="azure-backup"></a><span data-ttu-id="5958b-128">Служба архивации Azure</span><span class="sxs-lookup"><span data-stu-id="5958b-128">Azure Backup</span></span>
<span data-ttu-id="5958b-129">Служба архивации Azure позволяет создавать резервные копии с помощью знакомых инструментов резервного копирования, доступных в Windows Server 2012 (или более поздней версии), Windows Server 2012 Essentials (или более поздней версии) и System Center 2012 Data Protection Manager (или более поздней версии).</span><span class="sxs-lookup"><span data-stu-id="5958b-129">Azure Backup enables cloud backups by using the familiar backup tools in Windows Server 2012 (or later), Windows Server 2012 Essentials (or later), and System Center 2012 Data Protection Manager (or later).</span></span> <span data-ttu-id="5958b-130">Эти средства позволяют управлять резервным копированием, как рабочим процессом, не зависящим от расположения хранилища резервных копий. При этом можно использовать как локальный диск, так и службу хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-130">These tools provide a workflow for backup management that is independent of the storage location of the backups, whether a local disk or Azure Storage.</span></span> <span data-ttu-id="5958b-131">После резервного копирования данных в облако авторизованные пользователи могут легко восстанавливать резервные копии на любом сервере.</span><span class="sxs-lookup"><span data-stu-id="5958b-131">After data is backed up to the cloud, authorized users can easily recover backups to any server.</span></span>

<span data-ttu-id="5958b-132">Если использовать добавочное резервное копирование, в облако передаются только изменения в файлах.</span><span class="sxs-lookup"><span data-stu-id="5958b-132">With incremental backups, only changes to files are transferred to the cloud.</span></span> <span data-ttu-id="5958b-133">Это позволяет эффективнее использовать место в хранилище и снижает потребности в пропускной способности. При этом поддерживается восстановление до точки во времени для нескольких версий данных.</span><span class="sxs-lookup"><span data-stu-id="5958b-133">This helps to efficiently use storage space, reduce bandwidth consumption, and support point-in-time recovery of multiple versions of the data.</span></span> <span data-ttu-id="5958b-134">Вы также можете использовать дополнительные функции, например политики хранения данных, сжатие данных и регулирование передачи данных.</span><span class="sxs-lookup"><span data-stu-id="5958b-134">You can also choose to use additional features, such as data retention policies, data compression, and data transfer throttling.</span></span> <span data-ttu-id="5958b-135">Использование Azure для размещения резервной копии имеет еще одно очевидное преимущество — резервные копии автоматически создаются во внешнем хранилище.</span><span class="sxs-lookup"><span data-stu-id="5958b-135">Using Azure as the backup location has the obvious advantage that the backups are automatically “offsite”.</span></span> <span data-ttu-id="5958b-136">Это снимает ряд вопросов по защите локальных носителей резервных копий.</span><span class="sxs-lookup"><span data-stu-id="5958b-136">This eliminates the extra requirements to secure and protect on-site backup media.</span></span>

<span data-ttu-id="5958b-137">Дополнительные сведения см. в статье [Что такое служба архивации Azure?](/azure/backup/backup-introduction-to-azure-backup/) и в разделе [Настройка резервного копирования Azure для данных DPM](https://technet.microsoft.com/library/jj728752.aspx).</span><span class="sxs-lookup"><span data-stu-id="5958b-137">For more information, see [What is Azure Backup?](/azure/backup/backup-introduction-to-azure-backup/) and [Configure Azure Backup for DPM data](https://technet.microsoft.com/library/jj728752.aspx).</span></span>

## <a name="database"></a><span data-ttu-id="5958b-138">База данных</span><span class="sxs-lookup"><span data-stu-id="5958b-138">Database</span></span>
<span data-ttu-id="5958b-139">У вас может быть решение аварийного восстановления для баз данных SQL Server в гибридной ИТ-среде, использующее группы доступности AlwaysOn, зеркальное отображение базы данных и доставку журналов, а также резервное копирование и восстановление с помощью хранилища BLOB-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-139">You can have a disaster recovery solution for your SQL Server databases in a hybrid-IT environment by using AlwaysOn Availability Groups, database mirroring, log shipping, and backup and restore with Azure Blob storage.</span></span> <span data-ttu-id="5958b-140">Все эти решения используют SQL Server, работающий на виртуальных машинах Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-140">All of these solutions use SQL Server running on Azure Virtual Machines.</span></span>

<span data-ttu-id="5958b-141">Группы доступности AlwaysOn можно применять в гибридной ИТ-среде, где реплики баз данных существуют как локально, так и в облаке.</span><span class="sxs-lookup"><span data-stu-id="5958b-141">AlwaysOn Availability Groups can be used in a hybrid-IT environment where database replicas exist both on-premises and in the cloud.</span></span> <span data-ttu-id="5958b-142">Это показано на схеме ниже.</span><span class="sxs-lookup"><span data-stu-id="5958b-142">This is shown in the following diagram.</span></span>

![Группы доступности AlwaysOn SQL Server в гибридной облачной архитектуре](./images/technical-guidance-recovery-on-premises-azure/SQL_Server_Disaster_Recovery-3.png)

<span data-ttu-id="5958b-144">Зеркальное отображение базы данных также может выполняться на локальных серверах и в облаке с управлением на основе сертификатов.</span><span class="sxs-lookup"><span data-stu-id="5958b-144">Database mirroring can also span on-premises servers and the cloud in a certificate-based setup.</span></span> <span data-ttu-id="5958b-145">Эта концепция представлена на схеме ниже.</span><span class="sxs-lookup"><span data-stu-id="5958b-145">The following diagram illustrates this concept.</span></span>

![Зеркальное отображение базы данных SQL Server в гибридной облачной архитектуре](./images/technical-guidance-recovery-on-premises-azure/SQL_Server_Disaster_Recovery-4.png)

<span data-ttu-id="5958b-147">Доставка журналов может использоваться для синхронизации локальной базы данных с базой данных SQL Server на виртуальной машине Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-147">Log shipping can be used to synchronize an on-premises database with a SQL Server database in an Azure virtual machine.</span></span>

![Доставка журналов SQL Server в гибридной облачной архитектуре](./images/technical-guidance-recovery-on-premises-azure/SQL_Server_Disaster_Recovery-5.png)

<span data-ttu-id="5958b-149">И наконец, вы можете создать резервную копию локальной базы данных прямо в хранилище BLOB-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-149">Finally, you can back up an on-premises database directly to Azure Blob storage.</span></span>

![Резервное копирование SQL Server в хранилище BLOB-объектов Azure в гибридной облачной архитектуре](./images/technical-guidance-recovery-on-premises-azure/SQL_Server_Disaster_Recovery-6.png)

<span data-ttu-id="5958b-151">Дополнительные сведения см. в статьях [Высокий уровень доступности и аварийное восстановление для SQL Server на виртуальных машинах Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/) и [Резервное копирование и восстановление SQL Server в виртуальных машинах Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery/).</span><span class="sxs-lookup"><span data-stu-id="5958b-151">For more information, see [High availability and disaster recovery for SQL Server in Azure virtual machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/) and [Backup and restore for SQL Server in Azure virtual machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery/).</span></span>

## <a name="checklists-for-on-premises-recovery-in-microsoft-azure"></a><span data-ttu-id="5958b-152">Контрольные списки для локального восстановления в Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="5958b-152">Checklists for on-premises recovery in Microsoft Azure</span></span>
### <a name="networking"></a><span data-ttu-id="5958b-153">Сеть</span><span class="sxs-lookup"><span data-stu-id="5958b-153">Networking</span></span>
1. <span data-ttu-id="5958b-154">Просмотрите раздел "Сеть" этого документа.</span><span class="sxs-lookup"><span data-stu-id="5958b-154">Review the Networking section of this document.</span></span>
2. <span data-ttu-id="5958b-155">Используйте виртуальную сеть для безопасного подключения локальных ресурсов к облаку.</span><span class="sxs-lookup"><span data-stu-id="5958b-155">Use Virtual Network to securely connect on-premises to the cloud.</span></span>

### <a name="compute"></a><span data-ttu-id="5958b-156">Среда выполнения приложений</span><span class="sxs-lookup"><span data-stu-id="5958b-156">Compute</span></span>
1. <span data-ttu-id="5958b-157">Просмотрите раздел "Среда выполнения приложений" этого документа.</span><span class="sxs-lookup"><span data-stu-id="5958b-157">Review the Compute section of this document.</span></span>
2. <span data-ttu-id="5958b-158">Переместите виртуальные машины из среды Hyper-V в Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-158">Relocate VMs between Hyper-V and Azure.</span></span>

### <a name="storage"></a><span data-ttu-id="5958b-159">Хранение</span><span class="sxs-lookup"><span data-stu-id="5958b-159">Storage</span></span>
1. <span data-ttu-id="5958b-160">Просмотрите раздел "Хранилище" этого документа.</span><span class="sxs-lookup"><span data-stu-id="5958b-160">Review the Storage section of this document.</span></span>
2. <span data-ttu-id="5958b-161">Используйте службы StorSimple для реализации преимуществ облачного хранилища.</span><span class="sxs-lookup"><span data-stu-id="5958b-161">Take advantage of StorSimple services for using cloud storage.</span></span>
3. <span data-ttu-id="5958b-162">Используйте службу архивации Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-162">Use the Azure Backup service.</span></span>

### <a name="database"></a><span data-ttu-id="5958b-163">База данных</span><span class="sxs-lookup"><span data-stu-id="5958b-163">Database</span></span>
1. <span data-ttu-id="5958b-164">Просмотрите раздел "База данных" этого документа.</span><span class="sxs-lookup"><span data-stu-id="5958b-164">Review the Database section of this document.</span></span>
2. <span data-ttu-id="5958b-165">Попробуйте использовать SQL Server в виртуальных машинах Azure для резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="5958b-165">Consider using SQL Server on Azure VMs as the backup.</span></span>
3. <span data-ttu-id="5958b-166">Настройте группы доступности AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="5958b-166">Set up AlwaysOn Availability Groups.</span></span>
4. <span data-ttu-id="5958b-167">Настройте зеркальное отображение базы данных на основе сертификатов.</span><span class="sxs-lookup"><span data-stu-id="5958b-167">Configure certificate-based database mirroring.</span></span>
5. <span data-ttu-id="5958b-168">Используйте доставку журналов.</span><span class="sxs-lookup"><span data-stu-id="5958b-168">Use log shipping.</span></span>
6. <span data-ttu-id="5958b-169">Создайте резервную копию локальной базы данных в хранилище BLOB-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="5958b-169">Back up on-premises databases to Azure Blob storage.</span></span>


