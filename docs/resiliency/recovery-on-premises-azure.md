---
title: Восстановление из локальной среды в Azure
titleSuffix: Azure Resiliency Technical Guidance
description: Описание систем восстановления из локальной инфраструктуры в Azure и сведения об их разработке.
author: adamglick
ms.date: 08/18/2016
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.custom: seojan19, resiliency
ms.openlocfilehash: 768e53e1024533b384c610378385c96d88d8571f
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2019
ms.locfileid: "54487378"
---
[!INCLUDE [header](../_includes/header.md)]

# <a name="azure-resiliency-technical-guidance-recovery-from-on-premises-to-azure"></a>Техническое руководство по обеспечению устойчивости в Azure. Восстановление из локальной среды в Azure

Azure предоставляет широкий набор служб для расширения локального центра обработки данных в Azure. Это позволяет повысить доступность и использовать аварийное восстановление.

- **Сеть**. Виртуальная частная сеть безопасно расширяет локальную сеть до облака.
- **Среда выполнения приложений** Клиенты, использующие в локальной сети технологию Hyper-V, могут легко перенести существующие виртуальные машины в Azure.
- **Хранилище** StorSimple расширяет файловую систему до службы хранилища Azure. Служба архивации Azure позволяет архивировать файлы и базы данных SQL в службу хранилища Azure.
- **Репликация базы данных**. Группы доступности для SQL Server 2014 или более поздней версии обеспечивают высокую доступность и аварийное восстановление локальных данных.

## <a name="networking"></a>Сеть

Виртуальная сеть Azure позволяет создавать логически изолированный раздел в среде Azure и безопасно подключать его к вашему локальному центру обработки данных или отдельному клиентскому компьютеру с помощью подключения IPsec. Виртуальная сеть упрощает использование масштабируемой и доступной по запросу инфраструктуры Azure, обеспечивая при этом подключение к локальным данным и приложениям, в том числе к системам под управлением Windows Server или UNIX и мейнфреймам. Дополнительные сведения см. в документации по [сетям Azure](/azure/virtual-network/virtual-networks-overview/).

## <a name="compute"></a>Службы вычислений

Если в локальной среде используется технология Hyper-V, вы можете перенести существующие виртуальные машины в среду Azure или других поставщиков услуг под управлением Windows Server 2012 или более поздней версии. Для этого не нужно вносить изменения в виртуальную машину или преобразовывать используемые ею форматы. Дополнительные сведения см. в статье [О дисках и виртуальных жестких дисках для виртуальных машин](/azure/virtual-machines/virtual-machines-linux-about-disks-vhds/?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

## <a name="azure-site-recovery"></a>Azure Site Recovery

Azure предоставляет службу [Azure Site Recovery](https://azure.microsoft.com/services/site-recovery/) в формате DRaaS ("аварийное восстановление как услуга"). Azure Site Recovery обеспечивает комплексную защиту для VMware, Hyper-V и физических серверов. Azure Site Recovery позволяет использовать для аварийного восстановления другой локальный сервер или платформу Azure. Дополнительные сведения об Azure Site Recovery см. [здесь](https://azure.microsoft.com/documentation/services/site-recovery/).

## <a name="storage"></a>Хранилище

Есть несколько вариантов использования Azure для резервного копирования локальных данных.

### <a name="storsimple"></a>StorSimple

StorSimple безопасно и прозрачно интегрирует облачное хранилище и локальные приложения. Это единое устройство, объединяющее высокопроизводительное многоуровневое локальное и облачное хранилище, динамическую архивацию, функции защиты данных на основе облака и аварийное восстановление. Дополнительные сведения см. на [странице продукта StorSimple](https://azure.microsoft.com/services/storsimple/).

### <a name="azure-backup"></a>Служба архивации Azure

Служба архивации Azure позволяет создавать резервные копии с помощью знакомых инструментов резервного копирования, доступных в Windows Server 2012 (или более поздней версии), Windows Server 2012 Essentials (или более поздней версии) и System Center 2012 Data Protection Manager (или более поздней версии). Эти средства позволяют управлять резервным копированием, как рабочим процессом, не зависящим от расположения хранилища резервных копий. При этом можно использовать как локальный диск, так и службу хранилища Azure. После резервного копирования данных в облако авторизованные пользователи могут легко восстанавливать резервные копии на любом сервере.

Если использовать добавочное резервное копирование, в облако передаются только изменения в файлах. Это позволяет эффективнее использовать место в хранилище и снижает потребности в пропускной способности. При этом поддерживается восстановление до точки во времени для нескольких версий данных. Вы также можете использовать дополнительные функции, например политики хранения данных, сжатие данных и регулирование передачи данных. Использование Azure для размещения резервной копии имеет еще одно очевидное преимущество — резервные копии автоматически создаются во внешнем хранилище. Это снимает ряд вопросов по защите локальных носителей резервных копий.

Дополнительные сведения см. в статье [Что такое служба архивации Azure?](/azure/backup/backup-introduction-to-azure-backup/) и в разделе [Настройка резервного копирования Azure для данных DPM](https://technet.microsoft.com/library/jj728752.aspx).

## <a name="database"></a>База данных

У вас может быть решение аварийного восстановления для баз данных SQL Server в гибридной ИТ-среде, использующее группы доступности AlwaysOn, зеркальное отображение базы данных и доставку журналов, а также резервное копирование и восстановление с помощью хранилища BLOB-объектов Azure. Все эти решения используют SQL Server, работающий на виртуальных машинах Azure.

Группы доступности AlwaysOn можно применять в гибридной ИТ-среде, где реплики баз данных существуют как локально, так и в облаке. Это показано на схеме ниже.

![Группы доступности AlwaysOn SQL Server в гибридной облачной архитектуре](./images/technical-guidance-recovery-on-premises-azure/SQL_Server_Disaster_Recovery-3.png)

Зеркальное отображение базы данных также может выполняться на локальных серверах и в облаке с управлением на основе сертификатов. Эта концепция представлена на схеме ниже.

![Зеркальное отображение базы данных SQL Server в гибридной облачной архитектуре](./images/technical-guidance-recovery-on-premises-azure/SQL_Server_Disaster_Recovery-4.png)

Доставка журналов может использоваться для синхронизации локальной базы данных с базой данных SQL Server на виртуальной машине Azure.

![Доставка журналов SQL Server в гибридной облачной архитектуре](./images/technical-guidance-recovery-on-premises-azure/SQL_Server_Disaster_Recovery-5.png)

И наконец, вы можете создать резервную копию локальной базы данных прямо в хранилище BLOB-объектов Azure.

![Резервное копирование SQL Server в хранилище BLOB-объектов Azure в гибридной облачной архитектуре](./images/technical-guidance-recovery-on-premises-azure/SQL_Server_Disaster_Recovery-6.png)

Дополнительные сведения см. в статьях [Высокий уровень доступности и аварийное восстановление для SQL Server на виртуальных машинах Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/) и [Резервное копирование и восстановление SQL Server в виртуальных машинах Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery/).

## <a name="checklists-for-on-premises-recovery-in-microsoft-azure"></a>Контрольные списки для локального восстановления в Microsoft Azure

<!-- markdownlint-disable MD024 -->

### <a name="networking"></a>Сеть

1. Просмотрите раздел "Сеть" этого документа.
2. Используйте виртуальную сеть для безопасного подключения локальных ресурсов к облаку.

### <a name="compute"></a>Службы вычислений

1. Просмотрите раздел "Среда выполнения приложений" этого документа.
2. Переместите виртуальные машины из среды Hyper-V в Azure.

### <a name="storage"></a>Хранение

1. Просмотрите раздел "Хранилище" этого документа.
2. Используйте службы StorSimple для реализации преимуществ облачного хранилища.
3. Используйте службу архивации Azure.

### <a name="database"></a>База данных

1. Просмотрите раздел "База данных" этого документа.
2. Попробуйте использовать SQL Server в виртуальных машинах Azure для резервного копирования.
3. Настройте группы доступности AlwaysOn.
4. Настройте зеркальное отображение базы данных на основе сертификатов.
5. Используйте доставку журналов.
6. Создайте резервную копию локальной базы данных в хранилище BLOB-объектов Azure.

<!-- markdownlint-enable MD024 -->
