---
title: Антишаблоны производительности для облачных приложений
titleSuffix: Azure Architecture Center
description: Распространенная практика, которая, скорее всего, приведет к проблемам масштабируемости.
author: dragon119
ms.date: 06/05/2017
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: 212930368942728fc0be0c9b2af1a90293906b39
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2019
ms.locfileid: "58344841"
---
# <a name="performance-antipatterns-for-cloud-applications"></a><span data-ttu-id="4d1d6-103">Антишаблоны производительности для облачных приложений</span><span class="sxs-lookup"><span data-stu-id="4d1d6-103">Performance antipatterns for cloud applications</span></span>

<span data-ttu-id="4d1d6-104">*Антишаблон производительности* — это распространенная практика, которая приводит к проблемам масштабируемости, если приложение испытывает нагрузку.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-104">A *performance antipattern* is a common practice that is likely to cause scalability problems when an application is under pressure.</span></span>

<span data-ttu-id="4d1d6-105">Один из распространенных сценариев — приложение нормально функционирует при тестировании производительности.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-105">Here is a common scenario: An application behaves well during performance testing.</span></span> <span data-ttu-id="4d1d6-106">Затем оно помещается в рабочую среду и начинает обрабатывать реальные рабочие нагрузки.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-106">It's released to production, and begins to handle real workloads.</span></span> <span data-ttu-id="4d1d6-107">На этом этапе приложение начинает хуже работать &mdash; отклоняются запросы пользователя, замедляется работа или вызываются исключения.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-107">At that point, it starts to perform poorly &mdash; rejecting user requests, stalling, or throwing exceptions.</span></span> <span data-ttu-id="4d1d6-108">Перед командой разработчиков возникают два вопроса:</span><span class="sxs-lookup"><span data-stu-id="4d1d6-108">The development team is then faced with two questions:</span></span>

- <span data-ttu-id="4d1d6-109">Почему во время тестирования такое поведение не наблюдалось?</span><span class="sxs-lookup"><span data-stu-id="4d1d6-109">Why didn't this behavior show up during testing?</span></span>
- <span data-ttu-id="4d1d6-110">Как это исправить?</span><span class="sxs-lookup"><span data-stu-id="4d1d6-110">How do we fix it?</span></span>

<span data-ttu-id="4d1d6-111">Ответ на первый вопрос достаточно прост.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-111">The answer to the first question is straightforward.</span></span> <span data-ttu-id="4d1d6-112">В тестовой среде очень сложно сымитировать реальных пользователей, шаблоны их поведения и объемы работы, которую они могут выполнять.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-112">It's very difficult in a test environment to simulate real users, their behavior patterns, and the volumes of work they might perform.</span></span> <span data-ttu-id="4d1d6-113">Наблюдение за системой в рабочей среде — это единственный способ понять ее поведение под нагрузкой.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-113">The only completely sure way to understand how a system behaves under load is to observe it in production.</span></span> <span data-ttu-id="4d1d6-114">Мы не предлагаем пропускать тестирование производительности.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-114">To be clear, we aren't suggesting that you should skip performance testing.</span></span> <span data-ttu-id="4d1d6-115">Это важный этап для получения базовых показателей производительности.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-115">Performance tests are crucial for getting baseline performance metrics.</span></span> <span data-ttu-id="4d1d6-116">Однако вы должны быть готовы к появлению проблем с производительностью в действующей системе. Вам также необходимо знать, как их устранить.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-116">But you must be prepared to observe and correct performance issues when they arise in the live system.</span></span>

<span data-ttu-id="4d1d6-117">Ответ на второй вопрос (Как решить проблему?) не так прост.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-117">The answer to the second question, how to fix the problem, is less straightforward.</span></span> <span data-ttu-id="4d1d6-118">Любое количество факторов может способствовать возникновению проблемы, а иногда она проявляется только при определенных обстоятельствах.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-118">Any number of factors might contribute, and sometimes the problem only manifests under certain circumstances.</span></span> <span data-ttu-id="4d1d6-119">Инструментирование и ведение журнала являются ключом для поиска первопричины, но вам также необходимо знать, что именно вы ищете.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-119">Instrumentation and logging are key to finding the root cause, but you also have to know what to look for.</span></span>

<span data-ttu-id="4d1d6-120">Исходя из отзывов наших клиентов Microsoft Azure, мы определили наиболее распространенные проблемы с производительностью в рабочей среде,</span><span class="sxs-lookup"><span data-stu-id="4d1d6-120">Based on our engagements with Microsoft Azure customers, we've identified some of the most common performance issues that customers see in production.</span></span> <span data-ttu-id="4d1d6-121">а также описали причины возникновения, признаки и способы устранения проблемы для каждого антишаблона.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-121">For each antipattern, we describe why the antipattern typically occurs, symptoms of the antipattern, and techniques for resolving the problem.</span></span> <span data-ttu-id="4d1d6-122">Мы предоставили образец кода, демонстрирующий антишаблон и предлагаемое решение.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-122">We also provide sample code that illustrates both the antipattern and a suggested solution.</span></span>

<span data-ttu-id="4d1d6-123">Во время чтения описания некоторые из этих антишаблонов могут показаться вам очевидными, но они встречаются чаще, чем вы думаете.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-123">Some of these antipatterns may seem obvious when you read the descriptions, but they occur more often than you might think.</span></span> <span data-ttu-id="4d1d6-124">Иногда приложение наследует архитектуру, которая работает в локальной среде, но не выполняет масштабирование в облаке.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-124">Sometimes an application inherits a design that worked on-premises, but doesn't scale in the cloud.</span></span> <span data-ttu-id="4d1d6-125">А иногда приложение может иметь идеальную архитектуру, но по мере добавления новых функций начинают появляться антишаблоны.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-125">Or an application might start with a very clean design, but as new features are added, one or more of these antipatterns creeps in.</span></span> <span data-ttu-id="4d1d6-126">В любом случае данное руководство поможет вам определить и устранить эти антишаблоны.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-126">Regardless, this guide will help you to identify and fix these antipatterns.</span></span>

<span data-ttu-id="4d1d6-127">Ниже приведен список антишаблонов, которые мы определили:</span><span class="sxs-lookup"><span data-stu-id="4d1d6-127">Here is the list of the antipatterns that we've identified:</span></span>

| <span data-ttu-id="4d1d6-128">Антишаблон</span><span class="sxs-lookup"><span data-stu-id="4d1d6-128">Antipattern</span></span> | <span data-ttu-id="4d1d6-129">ОПИСАНИЕ</span><span class="sxs-lookup"><span data-stu-id="4d1d6-129">Description</span></span> |
|-------------|-------------|
| <span data-ttu-id="4d1d6-130">[Занятость базы данных][BusyDatabase]</span><span class="sxs-lookup"><span data-stu-id="4d1d6-130">[Busy Database][BusyDatabase]</span></span> | <span data-ttu-id="4d1d6-131">Разгрузка слишком большого объема обработки в хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-131">Offloading too much processing to a data store.</span></span> |
| <span data-ttu-id="4d1d6-132">[Занятость внешнего интерфейса][BusyFrontEnd]</span><span class="sxs-lookup"><span data-stu-id="4d1d6-132">[Busy Front End][BusyFrontEnd]</span></span> | <span data-ttu-id="4d1d6-133">Перемещение ресурсоемких задач в фоновые потоки.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-133">Moving resource-intensive tasks onto background threads.</span></span> |
| <span data-ttu-id="4d1d6-134">[Отправка множественных операций ввода-вывода][ChattyIO]</span><span class="sxs-lookup"><span data-stu-id="4d1d6-134">[Chatty I/O][ChattyIO]</span></span> | <span data-ttu-id="4d1d6-135">Постоянная отправка большого количества небольших сетевых запросов.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-135">Continually sending many small network requests.</span></span> |
| <span data-ttu-id="4d1d6-136">[Лишняя выборка][ExtraneousFetching]</span><span class="sxs-lookup"><span data-stu-id="4d1d6-136">[Extraneous Fetching][ExtraneousFetching]</span></span> | <span data-ttu-id="4d1d6-137">Получение большего объема данных, чем требуется. Это приводит к ненужным операциям ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-137">Retrieving more data than is needed, resulting in unnecessary I/O.</span></span> |
| <span data-ttu-id="4d1d6-138">[Неправильное создание экземпляров][ImproperInstantiation]</span><span class="sxs-lookup"><span data-stu-id="4d1d6-138">[Improper Instantiation][ImproperInstantiation]</span></span> | <span data-ttu-id="4d1d6-139">Многократное создание и удаление объектов, которые предназначены для общего доступа и повторного использования.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-139">Repeatedly creating and destroying objects that are designed to be shared and reused.</span></span> |
| <span data-ttu-id="4d1d6-140">[Монолитная сохраняемость][MonolithicPersistence]</span><span class="sxs-lookup"><span data-stu-id="4d1d6-140">[Monolithic Persistence][MonolithicPersistence]</span></span> | <span data-ttu-id="4d1d6-141">Использование одного хранилища для данных с совершенно разными шаблонами потребления.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-141">Using the same data store for data with very different usage patterns.</span></span> |
| <span data-ttu-id="4d1d6-142">[Без кэширования][NoCaching]</span><span class="sxs-lookup"><span data-stu-id="4d1d6-142">[No Caching][NoCaching]</span></span> | <span data-ttu-id="4d1d6-143">Нет возможности выполнить кэширование данных.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-143">Failing to cache data.</span></span> |
| <span data-ttu-id="4d1d6-144">[Синхронный ввод-вывод][SynchronousIO]</span><span class="sxs-lookup"><span data-stu-id="4d1d6-144">[Synchronous I/O][SynchronousIO]</span></span> | <span data-ttu-id="4d1d6-145">Блокировка вызывающего потока до завершения операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="4d1d6-145">Blocking the calling thread while I/O completes.</span></span> |

[BusyDatabase]: ./busy-database/index.md
[BusyFrontEnd]: ./busy-front-end/index.md
[ChattyIO]: ./chatty-io/index.md
[ExtraneousFetching]: ./extraneous-fetching/index.md
[ImproperInstantiation]: ./improper-instantiation/index.md
[MonolithicPersistence]: ./monolithic-persistence/index.md
[NoCaching]: ./no-caching/index.md
[SynchronousIO]: ./synchronous-io/index.md
