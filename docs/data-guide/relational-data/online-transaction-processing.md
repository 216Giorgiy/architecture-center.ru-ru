---
title: Оперативная обработка транзакций (OLTP)
description: ''
author: zoinerTejada
ms:date: 02/12/2018
ms.openlocfilehash: 8650b919fc1a59240343015493a1fe41c8729a72
ms.sourcegitcommit: e67b751f230792bba917754d67789a20810dc76b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30848705"
---
# <a name="online-transaction-processing-oltp"></a>Оперативная обработка транзакций (OLTP)

Оперативная обработка транзакций (OLTP) — это управление данными о транзакциях с помощью компьютерных систем. Системы OLTP записывают операции обмена данными в организации, выполняющиеся каждый день, и поддерживают запрашивание этих данных, чтобы на их основе делать выводы.

## <a name="transactional-data"></a>Данные о транзакциях

Данные о транзакциях — это сведения, полученные в результате отслеживания взаимодействий, связанных с деятельностью организации. Как правило, это бизнес-транзакции, например полученные от клиентов платежи, отправленные поставщикам платежи, поступление продуктов на склад или их перемещение со склада, оформленные заказы или предоставленные услуги. События транзакций, которые сами по себе являются транзакциями, обычно содержат измерение времени, некоторые числовые значения и ссылки на другие данные. 

Транзакции обычно должны быть *атомарными* и *согласованными*. Атомарность означает, что транзакция всегда полностью завершается успешно либо неудачно как одна элементарная операция и никогда не остается в состоянии частичной завершенности. Если не удается выполнить транзакцию, система базы данных должна откатить все шаги, которые уже выполнены в рамках этой транзакции. В традиционной реляционной СУБД, если не удалось завершить транзакцию, откат происходит автоматически. Согласованность означает, что после выполнения транзакции данные всегда остаются в допустимом состоянии. (Это очень простые описания атомарности и согласованности. Существуют более формальные определения этих свойств, например [ACID](https://en.wikipedia.org/wiki/ACID).)

В транзакционных базах данных строгая согласованность транзакций может поддерживаться с помощью различных стратегий блокировки, например пессимистической блокировки. Это обеспечивает строгую согласованность всех данных в контексте предприятия для всех пользователей и процессов. 

Уровень хранилища данных в трехуровневой архитектуре чаще всего используется для развертываний с использованием данных о транзакциях. Как правило, трехуровневая архитектура состоит из уровня представления, уровня бизнес-логики и уровня хранилища данных. Соответствующая архитектура развертывания — [n-уровневая](/azure/architecture/guide/architecture-styles/n-tier) архитектура, в которой может быть несколько средних уровней для бизнес-логики.

## <a name="typical-traits-of-transactional-data"></a>Стандартные характеристики данных о транзакциях

Как правило, данные о транзакциях имеют следующие характеристики:

| Требование | ОПИСАНИЕ |
| --- | --- |
| Нормализация | Высокая степень нормализации |
| Схема | Схема при записи (строгое соблюдение)|
| Целостность | Строгая согласованность (гарантии ACID) |
| Целостность | Высокая степень целостности данных |
| Использование транзакций | Yes |
| Стратегия блокировки | Пессимистическая или оптимистическая|
| Возможность обновления | Yes |
| Возможность добавления | Yes |
| Рабочая нагрузка | Большое число операций записи, среднее число операций чтения |
| Индексация | Первичный и вторичные индексы |
| Размер данных | Небольшой и средний размер |
| Модель | Реляционная |
| Форма представления данных | Табличная |
| Гибкость запросов | Высокая гибкость |
| Масштаб | Небольшой (МБ) и большой (несколько ТБ) | 

## <a name="when-to-use-this-solution"></a>Когда следует использовать это решение

Выбирайте OLTP, чтобы обеспечить эффективную обработку и хранение бизнес-транзакций, а также быстро и согласованно предоставлять доступ к ним для клиентских приложений. Используйте эту архитектуру, если любые ощутимые задержки при обработке отрицательно повлияют на повседневную работу организации.

Системы OLTP предназначены для эффективной обработки и хранения транзакций, а также для запрашивания данных о транзакциях. Эффективная обработка и хранение отдельных транзакций в системе OLTP частично достигается путем нормализации данных &mdash; разделения данных на более мелкие и менее избыточные блоки. Это обеспечивает эффективность, так как система OLTP может независимо обрабатывать большое число транзакций, и позволяет избежать дополнительной обработки, необходимой для поддержания целостности данных при наличии избыточных данных.

## <a name="challenges"></a>Сложности
При реализации и использовании системы OLTP могут возникнуть некоторые сложности:

- Системы OLTP не всегда подходят для обработки статистических выражений при больших объемах данных. Хотя существуют исключения, например хорошо продуманное решение на основе SQL Server. Анализ данных, которые основаны на статистических вычислениях более миллиона отдельных транзакций, является очень ресурсоемким для системы OLTP. Он может медленно выполняться и привести к снижению производительности из-за блокировки других транзакций в базе данных.
- При проведении анализа и создании отчетов по данным с высокой степенью нормализации запросы, как правило, будут сложными, так как для большинства запросов требуется денормализовать данные с помощью соединений. Кроме того, соглашения об именовании для объектов базы данных в системах OLTP, как правило, являются неполными и сжатыми. Из-за высокой нормализации и неполного соглашения об именовании бизнес-пользователям трудно выполнять запросы в системах OLTP без помощи разработчика архитектуры данных или администратора базы данных.
- Бессрочное хранение журналов транзакций и хранение большого количества данных в одной таблице могут снизить производительность запросов в зависимости от числа хранящихся транзакций. Распространенным решением является поддержание соответствующего периода времени (например, текущий финансовый год) в системе OLTP и перезапись данных журнала в другие системы, такие как киоск данных или [хранилище данных](./data-warehousing.md).

## <a name="oltp-in-azure"></a>OLTP в Azure

Как правило, такие приложения, как веб-сайты, размещенные в [веб-приложениях службы приложений](/azure/app-service/app-service-web-overview), REST API, запущенные в службе приложений, а также мобильные и классические приложения, взаимодействуют с системой OLTP через промежуточный интерфейс REST API.

На практике большинство рабочих нагрузок выполняются не только в системе OLTP. Для них также требуется аналитический компонент. Кроме того, растет потребность в создании отчетов в режиме реального времени, например создание отчетов в операционной системе. Также это называют HTAP (гибридная транзакционно-аналитическая обработка). Дополнительные сведения см. в статье [об оперативной аналитической обработке (OLAP)](./online-analytical-processing.md).

Все следующие хранилища данных в Azure соответствуют основным требованиям к OLTP и управлению данными о транзакциях:

- [база данных SQL Azure;](/azure/sql-database/)
- [SQL Server на виртуальной машине Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-server-iaas-overview?toc=%2Fazure%2Fvirtual-machines%2Fwindows%2Ftoc.json);
- [База данных Azure для MySQL](/azure/mysql/)
- [База данных Azure для PostgreSQL](/azure/postgresql/)

## <a name="key-selection-criteria"></a>Основные критерии выбора

Чтобы ограничить количество вариантов, сначала ответьте на следующие вопросы:

- Вы хотите использовать управляемую службу, а не управлять собственными серверами?

- Зависит ли ваше решение от совместимости с Microsoft SQL Server, MySQL или PostgreSQL? Количество вариантов для хранилищ данных может быть ограничено приложением из-за драйверов, поддерживаемых для взаимодействия с хранилищем данных, или на основе предположений касательно используемой базы данных.

- Выдвигаются ли особенно высокие требования к пропускной способности операций записи? Если да, выберите вариант с поддержкой таблиц в памяти. 

- Является ли ваше решение мультитенантным? Если да, выберите варианты с поддержкой пулов емкости, где большое количество экземпляров баз данных подготавливаются на основе эластичного пула ресурсов, вместо фиксированных ресурсов на одну базу данных. Это позволит лучше распределить емкость для всех экземпляров базы данных и сделать ваше решение более экономичным.

- Нужно ли обеспечить чтение данных с низкой задержкой в нескольких регионах? Если да, выберите вариант с поддержкой вторичных реплик, доступных для чтения.

- Нужно ли обеспечить высокий уровень доступности баз данных в нескольких географических регионах? Если да, выберите вариант с поддержкой георепликации. Также рассмотрите варианты, которые поддерживают автоматический переход с первичной реплики на вторичную реплику.

- Есть ли у вашей базы данных особые требования к безопасности? Если да, выберите варианты, которые предоставляют такие возможности, как безопасность на уровне строк, маскирование данных и прозрачное шифрование данных.

## <a name="capability-matrix"></a>Матрица возможностей

В следующих таблицах перечислены основные различия в возможностях.

### <a name="general-capabilities"></a>Общие возможности 

|                              | Базы данных SQL Azure | SQL Server на виртуальной машине Azure | База данных Azure для MySQL | База данных Azure для PostgreSQL |
|------------------------------|--------------------|----------------------------------------|--------------------------|-------------------------------|
|      Управляемая служба      |        Yes         |                   Нет                    |           Yes            |              Yes              |
|       Запуск на платформе       |        Недоступно         |         Windows, Linux, Docker         |           Недоступно            |              Недоступно              |
| Программируемость <sup>1</sup> |   T-SQL, .NET, R   |         T-SQL, .NET, R, Python         |  T-SQL, .NET, R, Python  |              SQL              |

[1] Без поддержки клиентского драйвера, что позволяет подключать различные языки программирования и использовать хранилище данных OLTP.

### <a name="scalability-capabilities"></a>Масштабируемость

| | Базы данных SQL Azure | SQL Server на виртуальной машине Azure| База данных Azure для MySQL | База данных Azure для PostgreSQL|
| --- | --- | --- | --- | --- | --- |
| Максимальный размер экземпляра базы данных | [4 ТБ](/azure/sql-database/sql-database-resource-limits) | 256 ТБ | [1 ТБ](/azure/mysql/concepts-limits) | [1 ТБ](/azure/postgresql/concepts-limits) |
| Поддержка пулов емкости  | Yes | Yes | Нет  | Нет  |
| Поддержка масштабирования кластеров  | Нет  | Yes | Нет  | Нет  |
| Динамическая масштабируемость (увеличение масштаба)  | Yes | Нет  | Yes | Yes |

### <a name="analytic-workload-capabilities"></a>Возможности для поддержки аналитических рабочих нагрузок

| | Базы данных SQL Azure | SQL Server на виртуальной машине Azure| База данных Azure для MySQL | База данных Azure для PostgreSQL|
| --- | --- | --- | --- | --- | --- | 
| Временные таблицы | Yes | Yes | Нет  | Нет  |
| Таблицы в памяти (оптимизированные для памяти) | Yes | Yes | Нет  | Нет  |
| Поддержка columnstore | Yes | Yes | Нет  | Нет  |
| Адаптивная обработка запросов | Yes | Yes | Нет  | Нет  |

### <a name="availability-capabilities"></a>Возможности доступности

| | Базы данных SQL Azure | SQL Server на виртуальной машине Azure| База данных Azure для MySQL | База данных Azure для PostgreSQL|
| --- | --- | --- | --- | --- | --- | 
| Вторичные реплики, доступные для чтения | Yes | Yes | Нет  | Нет  | 
| Георепликация | Yes | Yes | Нет  | Нет  | 
| Автоматический переход на вторичный ресурс | Yes | Нет  | Нет  | Нет |
| Восстановление до точки во времени | Yes | Yes | Yes | Yes |

### <a name="security-capabilities"></a>Возможности системы безопасности

|                                                                                                             | Базы данных SQL Azure | SQL Server на виртуальной машине Azure | База данных Azure для MySQL | База данных Azure для PostgreSQL |
|-------------------------------------------------------------------------------------------------------------|--------------------|----------------------------------------|--------------------------|-------------------------------|
|                                             Безопасность на уровне строк                                              |        Yes         |                  Yes                   |           Yes            |              Yes              |
|                                                Маскирование данных                                                 |        Yes         |                  Yes                   |            Нет             |              Нет                |
|                                         Прозрачное шифрование данных                                         |        Yes         |                  Yes                   |           Yes            |              Yes              |
|                                  Ограничение доступа для определенных IP-адресов                                   |        Yes         |                  Yes                   |           Yes            |              Yes              |
|                                  Ограничение доступа для разрешения доступа только к виртуальной сети                                  |        Yes         |                  Yes                   |            Нет             |              Нет                |
|                                    Аутентификация Azure Active Directory                                    |        Yes         |                  Yes                   |            Нет             |              Нет                |
|                                       Аутентификация Active Directory                                       |         Нет          |                  Yes                   |            Нет             |              Нет                |
|                                         Многофакторная Идентификация                                         |        Yes         |                  Yes                   |            Нет             |              Нет                |
| Поддержка функции [Always Encrypted](/sql/relational-databases/security/encryption/always-encrypted-database-engine) |        Yes         |                  Yes                   |           Yes            |              Нет                |
|                                                 Частный IP-адрес                                                  |         Нет          |                  Yes                   |           Yes            |              Нет                |

