---
title: Выбор технологии приема сообщений в реальном времени
description: ''
author: zoinerTejada
ms.date: 02/12/2018
ms.openlocfilehash: 961e377591f67aec995c8495fa9188c851e464fc
ms.sourcegitcommit: 1f4cdb08fe73b1956e164ad692f792f9f635b409
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2019
ms.locfileid: "54111246"
---
# <a name="choosing-a-real-time-message-ingestion-technology-in-azure"></a>Выбор технологии приема сообщений в реальном времени в Azure

Под обработкой в реальном времени подразумевается запись потоков данных в режиме реального времени и их обработка с минимальной задержкой. Для приема сообщений многим решениям для обработки в реальном времени требуется хранилище, которое можно использовать в качестве буфера. Такое хранилище должно поддерживать обработку с горизонтальным масштабированием, надежную доставку и другую семантику очереди сообщений.

<!-- markdownlint-disable MD026 -->

## <a name="what-are-your-options-for-real-time-message-ingestion"></a>Варианты при выборе технологии приема сообщений в реальном времени

<!-- markdownlint-enable MD026 -->

- [Центры событий Azure](/azure/event-hubs/)
- [Центр Интернета вещей Azure](/azure/iot-hub/)
- [Kafka в HDInsight](/azure/hdinsight/kafka/apache-kafka-get-started).

## <a name="azure-event-hubs"></a>Центры событий Azure

[Центры событий Azure](/azure/event-hubs/) — это высокомасштабируемая платформа потоковой передачи данных и служба приема событий, принимающая и обрабатывающая миллионы событий в секунду. Центры событий могут обрабатывать и сохранять события, данные и телеметрию, созданные распределенным программным обеспечением и устройствами. Данные, отправляемые в концентратор событий, можно преобразовывать и сохранять с помощью любого поставщика аналитики в реальном времени, а также с помощью адаптеров пакетной обработки или хранения. Центры событий предоставляют возможности публикации и подписки с низкой задержкой в большом масштабе, что делает их подходящими для сценариев работы с большими данными.

## <a name="azure-iot-hub"></a>Центр Интернета вещей Azure

[Центр Интернета вещей Azure](/azure/iot-hub/) — это управляемая служба, которая обеспечивает надежный и защищенный двунаправленный обмен данными между миллионами устройств Интернета вещей и облачным сервером.

Функции Центра Интернета вещей:

- несколько вариантов взаимодействия между устройствами и облаком, в частности одностороннюю передачу сообщений, передачу файлов и методы типа "запрос — ответ";
- перенаправление сообщений в другие службы Azure;
- хранилище для метаданных устройств и информации о состоянии синхронизации с возможностью запрашивания данных;
- безопасная связь и управление доступом с использованием отдельных ключей безопасности или сертификатов X.509 для каждого устройства;
- мониторинг событий управления взаимодействием и удостоверениями устройств.

С точки зрения приема сообщений функции Центра Интернета вещей и Центров событий похожи. Но Центр Интернета вещей специально разработан для управления взаимодействием между устройствами Интернета вещей, а не только для приема сообщений. Дополнительные сведения см. в статье [Сравнение Центра Интернета вещей Azure и Центров событий Azure](/azure/iot-hub/iot-hub-compare-event-hubs).

## <a name="kafka-on-hdinsight"></a>Kafka HDInsight

[Apache Kafka](https://kafka.apache.org/) — это распределенная платформа потоковой передачи с открытым кодом, которую можно использовать для создания приложений потоковой передачи и конвейеров данных в режиме реального времени. Kafka также предоставляет функцию брокера сообщений, подобную очереди сообщений, с помощью которой можно выполнять публикацию и подписываться на именованные потоки данных. Эта платформа поддерживает горизонтальное масштабирование, отличается отказоустойчивостью и высокой скоростью работы. [Kafka в HDInsight](/azure/hdinsight/kafka/apache-kafka-get-started) предоставляет управляемую высокомасштабируемую службу с высоким уровнем доступности в Azure.

Наиболее распространенные варианты использования Kafka:

- **Обмен сообщениями**. Благодаря поддержке модели обмена сообщениями по схеме "публикация — подписка" Kafka часто используется в качестве брокера сообщений.
- **Отслеживание действий**. Благодаря возможности ведения журнала записей в определенном порядке Kafka можно использовать для отслеживания и воссоздания действий, например действий пользователя на веб-сайте.
- **Агрегирование**. С помощью потоковой обработки можно объединить информацию из разных потоков для ее централизации в качестве оперативных данных.
- **Преобразование**. С помощью потоковой обработки можно объединять и дополнять данные из нескольких входных разделов в один или несколько выходных разделов.

## <a name="key-selection-criteria"></a>Основные критерии выбора

Чтобы ограничить количество вариантов, сначала ответьте на следующие вопросы:

- Вам нужно двустороннее взаимодействие между устройствами Интернета вещей и Azure? Если да, выберите Центр Интернета вещей.

- Вам нужно управлять доступом для отдельных устройств и иметь возможность отменить доступ к определенному устройству? Если да, выберите Центр Интернета вещей.

## <a name="capability-matrix"></a>Матрица возможностей

В следующих таблицах перечислены основные различия в возможностях.

<!-- markdownlint-disable MD033 -->

| | Центр Интернета вещей | Центры событий; | Kafka HDInsight |
| --- | --- | --- | --- |
| обмен данными между облаком и устройством; | Yes | Нет  | Нет  |
| Отправка файлов, инициированная устройством | Yes | Нет  | Нет  |
| Сведения о состоянии устройства | [Двойники устройств](/azure/iot-hub/iot-hub-devguide-device-twins) | Нет  | Нет  |
| Поддержка протоколов | MQTT, AMQP, HTTPS <sup>1</sup> | AMQP, HTTPS | [Протокол Kafka](https://cwiki.apache.org/confluence/display/KAFKA/A+Guide+To+The+Kafka+Protocol) |
| Безопасность | Идентификация каждого устройства и управление доступом с возможностью его отмены. | Политики общего доступа с ограниченными возможностями отмены доступа с помощью политик издателя. | Поддержка аутентификации с использованием SASL, модульной авторизации, интеграция с внешними службами аутентификации. |

<!-- markdownlint-enable MD026 -->

[1] [Шлюз протокола Интернета вещей Azure](/azure/iot-hub/iot-hub-protocol-gateway) можно также использовать как пользовательский шлюз для включения адаптации протокола для Центра Интернета вещей.

Дополнительные сведения см. в статье [Сравнение Центра Интернета вещей Azure и Центров событий Azure](/azure/iot-hub/iot-hub-compare-event-hubs).
