---
title: Выбор хранилища аналитических данных
description: ''
author: zoinerTejada
ms:date: 02/12/2018
ms.openlocfilehash: 3cf7dc533cc6ae3e6d7e2326852b585da8613e18
ms.sourcegitcommit: 94d50043db63416c4d00cebe927a0c88f78c3219
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/28/2018
ms.locfileid: "47428879"
---
# <a name="choosing-an-analytical-data-store-in-azure"></a>Выбор хранилища аналитических данных в Azure

В архитектуре для обработки [больших данных](../big-data/index.md) часто возникает потребность сохранить обработанные данные в структурированном формате, удобном для выполнения запросов из средств аналитики. Для этого применяется хранилище аналитических данных. Хранилища аналитических данных, поддерживающие запросы к данным критического и некритического путей, совокупно обозначаются как уровень обслуживания или хранилище обслуживания данных.

Уровень обслуживания используется для обработанных данными как критического, так и некритического путей. В [лямбда-архитектуре](../big-data/index.md#lambda-architecture) уровень обслуживания разделяется на уровень _быстрого обслуживания_, где хранятся данные с добавочной обработкой, и уровень _пакетного обслуживания_, где содержатся выходные данные пакетной обработки. Уровень обслуживания требует надежной поддержки операций произвольного чтения с низкой задержкой. Кроме того, хранилище данных для уровня быстрого обслуживания должно поддерживать операции произвольной записи, так как пакетная загрузка данных в это хранилище может привести к нежелательным задержкам. Для хранилища данных пакетного уровня поддержка операций произвольной записи не требуется, здесь достаточно пакетной записи.

Единственного решения для управления данными, идеально подходящего для любых задач хранения данных, не существует. Для разных задач оптимизированы разные решения управления данными. У большинства реальных облачных приложений и процессов обработки больших данных различные сочетания требований к хранилищу данных. Поэтому чаще всего используется сочетание нескольких решений для хранения данных.

## <a name="what-are-your-options-when-choosing-an-analytical-data-store"></a>Варианты при выборе хранилища аналитических данных

В Azure есть несколько вариантов для обслуживания данных, которые вы можете выбрать в зависимости от конкретных потребностей:

- [Хранилище данных SQL](/azure/sql-data-warehouse/sql-data-warehouse-overview-what-is)
- [база данных SQL Azure;](/azure/sql-database/)
- [SQL Server на виртуальной машине Azure](/sql/sql-server/sql-server-technical-documentation);
- [HBase/Phoenix в HDInsight](/azure/hdinsight/hbase/apache-hbase-overview);
- [Hive LLAP в HDInsight](/azure/hdinsight/interactive-query/apache-interactive-query-get-started);
- [Azure Analysis Services](/azure/analysis-services/analysis-services-overview);
- [Azure Cosmos DB](/azure/cosmos-db/)

Эти варианты предоставляют разные модели баз данных, оптимизированные для разных типов задач.

- В базах данных для пар ["ключ-значение"](https://msdn.microsoft.com/library/dn313285.aspx#sec7) хранится один сериализованный объект для каждого значения ключа. Они хорошо подходят для хранения больших объемов данных, которые нужно извлекать по одному элементу с известным значением ключа, если при этом совершенно не требуются запросы по другим свойствам элемента.
- Базы данных [документов](https://msdn.microsoft.com/library/dn313285.aspx#sec8), по сути, являются базами данных для пар "ключ-значение", в которых значениями являются *документы*. Под документами здесь подразумеваются любые коллекции именованных полей и значений. Обычно в таких базах данные хранятся в специальных форматах, например XML, YAML, BSON и (или) JSON. Но можно использовать и обычный текст. Базы данных документов позволяют применять запросы по полям, не являющимся ключами, а также определять дополнительные индексы для повышения эффективности таких запросов. Благодаря этому базы данных документов больше подходят для приложений, в которых нужно извлекать данные по более сложным критериям, чем одиночное значение ключа документа. Например, вы можете создать запрос по идентификаторам продуктов, идентификаторам клиентов или именам клиентов.
- Базы данных [семейств столбцов](https://msdn.microsoft.com/library/dn313285.aspx#sec9) являются хранилищами для пар "ключ-значение", которые структурируются в несколько коллекций связанных столбцов, называемых семействами столбцов. Например, в базе данных переписи населения можно создать одну группу столбцов для обозначения человека (имя, фамилия, отчество), другую группу — для сведений об адресе и третью — для информации профиля (дата рождения, пол и т. п.). Каждое семейство столбцов может храниться в отдельном сегменте базы данных с привязкой всех данных об определенном человеке к одному и тому же ключу. Тогда приложение сможет считывать одно семейство столбцов отдельно от остальных данных для одной и той же сущности.
- В базе данных [графов](https://msdn.microsoft.com/library/dn313285.aspx#sec10) сведения хранятся в виде коллекции объектов и отношений. База данных графов позволяет эффективно выполнять запросы в сети объектов и связей между ними. Например, в базе данных персонала объектами могут являться сотрудники и вам может потребоваться выполнить такой запрос, как "найти всех сотрудников, которые прямо или косвенно подчиняются Сергею".

## <a name="key-selection-criteria"></a>Основные критерии выбора

Чтобы ограничить количество вариантов, сначала ответьте на следующие вопросы:

- Нужно ли вам хранилище обслуживания, которое можно использовать в критическом пути данных? Если да, исключите варианты, которые не оптимизированы для уровня быстрого обслуживания.

- Нужна ли вам поддержка обработки с массовым параллелизмом (MPP), при которой запросы автоматически распространяются на несколько процессов или узлов? Если да, то выберите вариант, который поддерживает масштабирование запросов.

- Намерены ли вы использовать реляционное хранилище данных? Если да, исключите варианты, не поддерживающие модель реляционной базы данных. При этом не забывайте, что некоторые нереляционные хранилища поддерживают синтаксис запросов SQL и что для получения данных в нереляционных хранилищах можно применять такие средства, как PolyBase.

## <a name="capability-matrix"></a>Матрица возможностей

В следующих таблицах перечислены основные различия в возможностях.

### <a name="general-capabilities"></a>Общие возможности

| | База данных SQL | Хранилище данных SQL | HBase/Phoenix в HDInsight | Hive LLAP в HDInsight | Службы Azure Analysis Services | База данных Cosmos |
| --- | --- | --- | --- | --- | --- | --- |
| Является управляемой службой | Yes | Yes | Да <sup>1</sup> | Да <sup>1</sup> | Yes | Yes |
| Модель базы данных-источника | Реляционная (табличный формат при использовании индексов columnstore) | Реляционные таблицы с хранением по столбцам | Хранилище широких столбцов | Hive (с выполнением в памяти) | Табличная (семантические модели MOLAP) | Хранилище документов, граф, хранилище пар "ключ-значение", хранилище широких столбцов |
| Поддержка языка SQL | Yes | Yes | Да (с помощью драйвера [Phoenix](https://phoenix.apache.org/) JDBC) | Yes | Нет  | Yes |
| Оптимизация для уровня быстрого обслуживания | Да <sup>2</sup> | Нет  | Yes | Да | Нет  | Yes |

[1] Настройка и масштабирование вручную.

[2] С применением оптимизированных для памяти таблиц и хэша или некластеризованных индексов.
 
### <a name="scalability-capabilities"></a>Масштабируемость

|                                                  | База данных SQL | Хранилище данных SQL | HBase/Phoenix в HDInsight | Hive LLAP в HDInsight | Службы Azure Analysis Services | База данных Cosmos |
|--------------------------------------------------|--------------|--------------------|----------------------------|------------------------|-------------------------|-----------|
| Избыточные региональные серверы для высокого уровня доступности |     Yes      |        Да         |            Да             |           Нет            |           Нет             |    Yes    |
|             Поддержка масштабирования запросов             |      Нет       |        Yes         |            Да             |          Да           |           Да           |    Yes    |
|          Динамическая масштабируемость (увеличение масштаба)          |     Yes      |        Да         |             Нет              |           Нет            |           Yes           |    Yes    |
|        Выполняющееся в памяти кэширование данных        |     Yes      |        Да         |             Нет              |          Yes           |           Да           |    Нет      |

### <a name="security-capabilities"></a>Возможности системы безопасности

| | База данных SQL | Хранилище данных SQL | HBase/Phoenix в HDInsight | Hive LLAP в HDInsight | Службы Azure Analysis Services | База данных Cosmos |
| --- | --- | --- | --- | --- | --- | --- |
| Authentication  | SQL / Azure Active Directory (Azure AD) | SQL / Azure AD | Локальные средства или Azure AD <sup>1</sup> | Локальные средства или Azure AD <sup>1</sup> | Azure AD | Пользователи базы данных или Azure AD с механизмом управления доступом (IAM) |
| Шифрование неактивных данных | Да <sup>2</sup> | Да <sup>2</sup> | Да <sup>1</sup> | Да <sup>1</sup> | Yes | Yes |
| Безопасность на уровне строк | Yes | Нет  | Да <sup>1</sup> | Да <sup>1</sup> | Да (защита на уровне объектов в модели) | Нет  |
| Поддержка брандмауэров | Yes | Yes | Да <sup>3</sup> | Да <sup>3</sup> | Yes | Yes |
| Динамическое маскирование данных | Yes | Нет  | Да <sup>1</sup> | Да * | Нет  | Нет  |

[1] Требуется использовать [присоединенный к домену кластер HDInsight](/azure/hdinsight/domain-joined/apache-domain-joined-introduction).

[2] Требуется использовать прозрачное шифрование данных (TDE) для шифрования и расшифровки неактивных данных.

[3] При использовании в виртуальной сети Azure. См. статью [Расширение возможностей HDInsight с помощью виртуальной сети Azure](/azure/hdinsight/hdinsight-extend-hadoop-virtual-network).
