---
title: "Выбор технологии хранения данных"
description: 
author: zoinerTejada
ms:date: 02/12/2018
ms.openlocfilehash: d8f831e758ddc8604758392644a68b56dc51cf57
ms.sourcegitcommit: 475064f0a3c2fac23e1286ba159aaded287eec86
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2018
---
# <a name="choosing-a-big-data-storage-technology-in-azure"></a>Выбор технологии хранения больших данных в Azure

В этой статье сравниваются варианты хранения данных для решений больших данных, в частности варианты хранения для массового приема данных и пакетной обработки. Эти задачи отличаются от [хранения аналитических данных](./analytical-data-stores.md) или [приема потоковой передачи в режиме реального времени](./real-time-ingestion.md).

## <a name="what-are-your-options-when-choosing-data-storage-in-azure"></a>Варианты при выборе хранилища данных в Azure

Существует несколько вариантов для приема данных в Azure, которые вы можете выбрать в зависимости от конкретных потребностей.

**Хранилище файлов**

- [Большие двоичные объекты службы хранилища Azure](/azure/storage/blobs/storage-blobs-introduction)
- [Хранилище озера данных Azure](/azure/data-lake-store/)

**Базы данных NoSQL**

- [База данных Azure Cosmos](/azure/cosmos-db/)
- [HBase в HDInsight](http://hbase.apache.org/)

## <a name="azure-storage-blobs"></a>Большие двоичные объекты службы хранилища Azure

Служба хранилища Azure — управляемая облачная служба с высоким уровнем доступности, безопасности, надежности, масштабируемости и избыточности. Корпорация Майкрософт отвечает за обслуживание и решает критические проблемы, не требуя вашего участия. Служба хранилища Azure является самым универсальным решением для хранения данных в Azure, так как с ней можно сочетать множество служб и средств.

Существует несколько служб хранилища Azure, которые можно использовать для хранения данных. Самый гибкий вариант для хранения больших двоичных объектов из нескольких источников данных — это [хранилище BLOB-объектов](/azure/storage/blobs/storage-blobs-introduction). Большие двоичные объекты по сути являются файлами. Это могут быть изображения, документы, HTML-файлы, виртуальные жесткие диски (VHD), большие данные (например, журналы или резервные копии баз данных), то есть практически любые файлы. BLOB-объекты хранятся в контейнерах, которые по принципу использования похожи на папки. Контейнер обеспечивает группирование набора больших двоичных объектов. Учетная запись хранения может содержать неограниченное количество контейнеров. В каждом контейнере может храниться неограниченное количество больших двоичных объектов.

Хранилище Azure хорошо подходит для больших данных и аналитики благодаря гибкости, высокому уровню доступности и низкой цене. Оно предоставляет уровни "горячего", "холодного" и архивного доступа для вариантов использования. Дополнительные сведения см. в разделе [Хранилище BLOB-объектов Azure: "горячий", "холодный" и архивный уровни](/azure/storage/blobs/storage-blob-storage-tiers).

Хранилище BLOB-объектов Azure доступно из Hadoop (через HDInsight). HDInsight может использовать контейнер больших двоичных объектов в службе хранилища Azure в качестве файловой системы по умолчанию для кластера. С помощью интерфейса распределенной файловой системы Hadoop, который предоставляется драйвером WASB, все компоненты в HDInsight могут напрямую взаимодействовать со структурированными или неструктурированными данными, хранимыми в виде больших двоичных объектов. Также к хранилищу BLOB-объектов Azure можно обращаться через хранилище данных SQL Azure с помощью компонента PolyBase.

Вот еще несколько полезных возможностей службы хранилища Azure:

- [несколько стратегий параллелизма](/azure/storage/common/storage-concurrency?toc=%2fazure%2fstorage%2fblobs%2ftoc.json);
- [средства для аварийного восстановления и высокого уровня доступности](/azure/storage/common/storage-disaster-recovery-guidance?toc=%2fazure%2fstorage%2fblobs%2ftoc.json);
- [шифрование при хранении](/azure/storage/common/storage-service-encryption?toc=%2fazure%2fstorage%2fblobs%2ftoc.json);
- [управление доступом на основе ролей (RBAC)](/azure/storage/common/storage-security-guide?toc=%2fazure%2fstorage%2fblobs%2ftoc.json#management-plane-security) для контроля доступа на уровне пользователей и групп Azure Active Directory.

## <a name="azure-data-lake-store"></a>Хранилище озера данных Azure

[Azure Data Lake Store](/azure/data-lake-store/) — это крупномасштабный репозиторий корпоративного уровня для рабочих нагрузок анализа больших данных. Data Lake позволяет сохранять данные любого размера и типа с любой скоростью приема в одном [защищенном](/azure/data-lake-store/data-lake-store-overview#DataLakeStoreSecurity) расположении для выполнения эксплуатационной и исследовательской аналитики.

Data Lake Store не накладывает никаких ограничений на размер учетной записи, размер файла или объем данных, которые могут храниться в озере данных. Надежность хранения данных обеспечивается созданием нескольких копий. Также нет никаких ограничений на продолжительность хранения данных в Data Lake. Для защиты от любых непредвиденных сбоев Data Lake не только хранит несколько копий файлов, но и распределяет их частями по нескольким отдельным серверам хранения. Это повышает пропускную способность при параллельном чтении файла для проведения анализа данных.

К Data Lake Store можно обращаться из Hadoop (через HDInsight) с помощью REST API, совместимых с WebHDFS. Этот вариант можно использовать вместо службы хранилища Azure, если размер отдельных файлов или их общий объем превышает ограничения, установленные для службы хранилища Azure. Но если вы используете Data Lake Store в качестве основного хранилища для кластера HDInsight, следует учитывать ряд [рекомендаций по настройке производительности](/azure/data-lake-store/data-lake-store-performance-tuning-guidance#optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight) и отдельные рекомендации для [Spark](/azure/data-lake-store/data-lake-store-performance-tuning-spark), [Hive](/azure/data-lake-store/data-lake-store-performance-tuning-hive), [MapReduce](/azure/data-lake-store/data-lake-store-performance-tuning-mapreduce) и [Storm](/azure/data-lake-store/data-lake-store-performance-tuning-storm). Кроме того, не забудьте проверить [доступность по регионам](https://azure.microsoft.com/regions/#services) для Data Lake Store, которая несколько ниже доступности службы хранилища Azure, так как хранилище должно находиться в том же регионе, что и кластер HDInsight.

Data Lake Analytics в сочетании с Azure Data Lake Analytics специально предназначены для анализа сохраненных данных и адаптированы к различным сценариям анализа данных. Также к Data Lake Store можно обращаться через хранилище данных SQL Azure с помощью компонента PolyBase.

## <a name="azure-cosmos-db"></a>Azure Cosmos DB

[Azure Cosmos DB](/azure/cosmos-db/) — это глобально распределенная многомодельная база данных Майкрософт. Cosmos DB гарантирует показатели задержки не более десяти миллисекунд для 99 % запросов из любой точки мира, а также предлагает несколько четко определенных моделей согласованности для тонкой настройки производительности и обеспечивает высокий уровень доступности с возможностями множественной адресации.

Azure Cosmos DB является полностью бессхемной службой. Она автоматически индексирует все данные, избавляя вас от необходимости управлять схемой и индексами. В ней есть встроенная поддержка множества моделей данных, включая документы, пары "ключ — значение", графы и базы данных столбцов. 

Функциональные возможности Azure Cosmos DB:

- [Георепликация](/azure/cosmos-db/distribute-data-globally)
- Глобальное [эластичное масштабирование пропускной способности и хранилища](/azure/cosmos-db/partition-data).
- [Пять четко определенных уровней согласованности](/azure/cosmos-db/consistency-levels).

## <a name="hbase-on-hdinsight"></a>HBase в HDInsight

[Apache HBase](http://hbase.apache.org/) — это база данных NoSQL с открытым кодом, созданная на основе Hadoop по типу Google BigTable. HBase обеспечивает прямой доступ и строгую согласованность для больших объемов неструктурированных и слабоструктурированных данных в бессхемной базе данных, упорядоченных в семейства столбцов.

Данные хранятся в строках таблицы, данные в строке группируются по семейству столбцов. HBase не имеет схемы в том смысле, что столбцы и типы хранимых в них данных не нужно определять до использования. Открытый код линейно масштабируется, чтобы обрабатывать петабайты данных на тысячах узлов. Он может полагаться на избыточность данных, пакетную обработку и другие особенности, которые предусмотрены распределенными приложениями в экосистеме Hadoop.

В [реализации HDInsight](/azure/hdinsight/hbase/apache-hbase-overview) используется масштабируемая архитектура HBase для автоматического сегментирования таблиц, строгой согласованности для чтения и записи, а также автоматического перехода на другой ресурс. Производительность повышается за счет кэширования операций чтения в памяти и потоковой записи с высокой пропускной способностью Также для HDInsight HBase доступна подготовка виртуальных сетей. В большинстве случаев целесообразно [создать кластер HBase внутри виртуальной сети](/azure/hdinsight/hbase/apache-hbase-provision-vnet), чтобы другие кластеры HDInsight и приложения могли напрямую обращаться к таблицам.

## <a name="key-selection-criteria"></a>Основные критерии выбора

Чтобы ограничить количество вариантов, сначала ответьте на следующие вопросы:

- Нужны ли вам управляемые, высокоскоростные или облачные хранилища для текстовых или двоичных данных любого типа? Если да, то выберите один из вариантов хранения файлов.

- Нужно ли вам хранилище файлов, оптимизированное для параллельного выполнения аналитических рабочих нагрузок с высокой пропускной способностью и большим числом операций ввода-вывода в секунду? Если да, то выберите вариант, который нацелен на производительность аналитических рабочих нагрузок.

- Нужно ли вам хранить неструктурированные или частично структурированные данные в бессхемной базе данных? Если да, выберите один из вариантов нереляционных хранилищ. Сравните варианты индексирования и моделей баз данных. В зависимости от типа сохраняемых данных, самым важным фактором может оказаться модель базы данных-источника.

- Можно ли использовать эту службу в вашем регионе? Проверьте региональную доступность для каждой службы Azure. См. страницу [Доступность продуктов по регионам](https://azure.microsoft.com/regions/services/).

## <a name="capability-matrix"></a>Матрица возможностей

В следующих таблицах перечислены основные различия в возможностях.

### <a name="file-storage-capabilities"></a>Возможности для хранения файлов

|  | Хранилище озера данных Azure | Контейнеры хранилища BLOB-объектов |
| --- | --- | --- |
| Назначение | Оптимизированное хранилище для рабочих нагрузок, относящихся к аналитике больших данных |Универсальное хранилище объектов для разнообразных сценариев хранения |
| Варианты использования | Данные пакетной и потоковой аналитики или машинного обучения, например файлы журналов, данные Интернета вещей, истории посещений сайтов и большие наборы данных. | Любой тип текстовых или двоичных данных, таких как данные серверной части приложений, архивируемые данные, мультимедийные хранилища для потоковой передачи и данные общего назначения. |
| structure | Иерархическая файловая система | Хранилище объектов с одноуровневым пространством имен |
| Authentication | Основана на [удостоверениях Azure Active Directory](/azure/active-directory/active-directory-authentication-scenarios) | Основана на общих секретах — [ключи доступа к учетным записям](/azure/storage/common/storage-create-storage-account#manage-your-storage-account), [ключи подписанных URL-адресов](/azure/storage/common/storage-dotnet-shared-access-signature-part-1) и [управление доступом на основе ролей](/azure/security/security-storage-overview). |
| Протокол аутентификации | OAuth 2.0. Вызовы должны содержать допустимый маркер JWT (JSON Web Token), выданный Azure Active Directory. | Код проверки подлинности сообщения на основе хэша (HMAC). Вызовы должны содержать хэш SHA-256 с кодировкой Base64 для части HTTP-запроса. |
| Авторизация | Списки управления доступом (ACL) POSIX. Списки ACL на основе удостоверений Azure Active Directory можно настроить на уровне файлов и папок. | Для авторизации на уровне учетной записи используйте [ключи доступа к учетным записям](/azure/storage/common/storage-create-storage-account#manage-your-storage-account), а для авторизации в учетной записи, контейнере или большом двоичном объекте — [ключи подписанных URL-адресов](/azure/storage/common/storage-dotnet-shared-access-signature-part-1). |
| Аудит | Доступен.  |Доступна |
| Шифрование при хранении | Прозрачное шифрование данных на стороне сервера. | Прозрачное шифрование на стороне сервера; шифрование на стороне клиента. |
| Пакеты SDK для разработчиков | .NET, Java, Python, Node.js | .NET, Java, Python, Node.js, C++, Ruby |
| Производительность рабочих нагрузок аналитики | Оптимизированная производительность для параллельных рабочих нагрузок аналитики, высокой пропускной способности и операций ввода-вывода. | Не оптимизирована для рабочих нагрузок аналитики |
| Ограничения размера | Нет ограничений на размер учетных записей, размер и количество файлов | Определенные ограничения описаны [здесь](/azure/azure-subscription-service-limits#storage-limits) |
| Геоизбыточность | Локальная избыточность (несколько копий данных в одном регионе Azure) | Локальная избыточность (LRS), глобальная избыточность (GRS), геоизбыточность с доступом на чтение (RA-GRS). Дополнительные сведения см. [здесь](/azure/storage/common/storage-redundancy). |

### <a name="nosql-database-capabilities"></a>Возможности баз данных NoSQL

| | Azure Cosmos DB | HBase в HDInsight |
| --- | --- | --- |
| Модель базы данных-источника | Хранилище документов, граф, хранилище пар "ключ-значение", хранилище широких столбцов | Хранилище широких столбцов |
| Вторичные индексы | Yes | Нет  |
| Поддержка языка SQL | Yes | Да (с помощью драйвера [Phoenix](http://phoenix.apache.org/) JDBC) |
| Целостность | Строгая согласованность, согласованность с ограниченным устареванием, согласованность уровня сеанса, согласованность префиксов или согласованность в конечном счете. | Уровень согласованности Strong (сильная) |
| Встроенная интеграция с решением "Функции Azure" | [Да](/azure/cosmos-db/serverless-computing-database) | Нет  |
| Автоматическое глобальное распределение | [Да](/azure/cosmos-db/distribute-data-globally) | Нет [Можно настроить репликацию кластера HBase](/azure/hdinsight/hbase/apache-hbase-replication) между регионам с согласованностью в конечном счете. |
| Модель ценообразования | Гибко масштабируемые единицы запроса (ЕЗ) с посекундной оплатой по мере использования, гибко масштабируемое хранилище | Поминутная оплата кластера HDInsight (с горизонтальным масштабированием узлов), хранилище |
