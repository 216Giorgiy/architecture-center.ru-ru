---
title: Выбор технологии передачи данных
description: ''
author: zoinerTejada
ms:date: 02/12/2018
ms.openlocfilehash: bb0732b0f771a4c9e1a4e565875576c08484490a
ms.sourcegitcommit: 90cf2de795e50571d597cfcb9b302e48933e7f18
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2018
---
# <a name="transferring-data-to-and-from-azure"></a>Передача данных в Azure и обратно

Существует несколько вариантов для передачи данных в Azure и обратно, выбор которых зависит от конкретных потребностей.

## <a name="physical-transfer"></a>Физическая передача

Физическое оборудование можно использовать для передачи данных в Azure в следующих случаях:

- ваша сеть медленная или ненадежная;
- использование дополнительной пропускной способности сети слишком затратно;
- политики безопасности или организации запрещают исходящие подключения при работе с конфиденциальными данными. 

Если для вас важна длительность передачи данных, вы можете выполнить тестирование, чтобы проверить, занимает ли сетевая передача больше времени, чем физическая.

Существует два основных способа физической передачи данных в Azure.
- **Служба импорта и экспорта Azure**. Служба [Импорт и экспорт Azure](/azure/storage/common/storage-import-export-service) позволяет безопасно переносить большие объемы данных в хранилище BLOB-объектов Azure или решение "Файлы Azure", отправляя внутренние жесткие диски SATA или SDD в центр обработки данных Azure. Кроме того, с ее помощью можно переносить данные из хранилища Azure на жесткие диски и передавать для загрузки в локальную среду.

- **Azure Data Box**. [Azure Data Box](https://azure.microsoft.com/services/storage/databox/) — это предоставляемое корпорацией Майкрософт устройство, работающее подобно службе импорта и экспорта Azure. Корпорация Майкрософт предоставляет частное, безопасное и устойчивое к взлому устройство и выполняет доставку от начала до конца, которую можно отслеживать через портал. Одним из преимуществ Azure Data Box является простота использования. Нет необходимости приобретать несколько жестких дисков, выполнять их подготовку и передавать файлы на каждый из них. Azure Data Box поддерживается многими ведущими партнерами Azure, что упрощает внесетевую передачу данных в облако из их продуктов. 

## <a name="command-line-tools-and-apis"></a>Программы командной строки и API

Если вам необходимо выполнить передачу данных с помощью скриптов или программными средствами, рассмотрите приведенные ниже варианты.

- **Azure CLI**. [Интерфейс командной строки Azure (CLI)](/azure/hdinsight/hdinsight-upload-data#commandline) представляет собой кроссплатформенное средство, с помощью которого можно управлять службами Azure и передавать данные в службу хранилища Azure. 

- **AzCopy**. Служебную программу командной строки AzCopy можно использовать в [Windows](/azure/storage/common/storage-use-azcopy?toc=%2fazure%2fstorage%2fblobs%2ftoc.json) или [Linux](/azure/storage/common/storage-use-azcopy-linux?toc=%2fazure%2fstorage%2fblobs%2ftoc.json), чтобы копировать данные в хранилище BLOB-объектов Azure, хранилище файлов и таблиц и из них с оптимальной производительностью. AzCopy поддерживает параллелизм и возможность возобновить операции копирования в случае сбоя. К тому же это более быстрый метод, чем большинство других. Основной платформой для программного доступа AzCopy выступает [библиотека перемещения данных для службы хранилища Microsoft Azure](/azure/storage/common/storage-use-data-movement-library). Она предоставляется как библиотека .NET Core. 

- **PowerShell.** [Командлет PowerShell `Start-AzureStorageBlobCopy`](/powershell/module/azure.storage/start-azurestorageblobcopy?view=azurermps-5.0.0) подходит для администраторов Windows, которые используют PowerShell.  

- **AdlCopy**. [AdlCopy](/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob) позволяет выполнять копирование данных из больших двоичных объектов службы хранилища Azure в Data Lake Store. Его также можно использовать для копирования данных между двумя учетными записями Azure Data Lake Store. Однако это средство нельзя использовать для копирования данных из Data Lake Store в большие двоичные объекты хранилища.

- **Distcp**. При наличии кластера HDInsight с доступом к Data Lake Store можно использовать такие средства экосистемы Hadoop, как [DistCp](/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp), для копирования данных из хранилища кластера HDInsight (WASB) в учетную запись Data Lake Store и обратно.

- **Sqoop**. [Sqoop](/azure/hdinsight/hadoop/hdinsight-use-sqoop) — это проект Apache и часть экосистемы Hadoop. Он предварительно установлен на всех кластерах HDInsight. Благодаря ему можно выполнять передачу данных между кластером HDInsight и реляционными базами данных (например, SQL, Oracle, MySQL и т. д.). Sqoop — это коллекция связанных средств, включая средство импорта и экспорта. Sqoop работает с кластерами HDInsight, используя большие двоичные объекты хранилища Azure или присоединенное хранилище Data Lake Store.

- **PolyBase**. [PolyBase](/sql/relational-databases/polybase/get-started-with-polybase) — это технология, позволяющая получить доступ к данным за пределами базы данных с помощью языка T-SQL. В SQL Server 2016 вы можете выполнять запросы ко внешним данным в Hadoop или импортировать и экспортировать данные из хранилища BLOB-объектов Azure. В хранилище данных SQL Azure вы можете выполнять импорт или экспорт данных из хранилища BLOB-объектов Azure и Azure Data Lake Store. Сейчас PolyBase — самый быстрый способ импорта данных в хранилище данных SQL.

- **Командная строка Hadoop**. Если у вас имеются данные, находящиеся на головном узле кластера HDInsight, вы можете использовать команду `hadoop -copyFromLocal`, чтобы скопировать эти данные в хранилище, подключенное к кластеру (например, большой двоичный объект хранилища Azure или Azure Data Lake Store). Чтобы использовать команду Hadoop, необходимо сначала подключиться к головному узлу. После подключения вы можете отправить файл в хранилище.

## <a name="graphical-interface"></a>Графический интерфейс

Рассмотрите следующие варианты, если вам необходимо передать всего несколько файлов или объектов данных и не нужно автоматизировать процесс.

- **Обозреватель службы хранилища Azure**. [Обозреватель службы хранилища Azure](https://azure.microsoft.com/features/storage-explorer/) — это кроссплатформенное средство, позволяющее управлять содержимым учетных записей хранения Azure. С его помощью можно передавать и скачивать большие двоичные объекты, файлы, очереди, таблицы и сущности Azure Cosmos DB, а также управлять ими. Используйте его с хранилищем BLOB-объектов для управления большими двоичными объектами и папками, а также для передачи и скачивания больших двоичных объектов между локальной файловой системой и хранилищем BLOB-объектов или учетными записями хранения.

- **портал Azure**. Хранилище BLOB-объектов и Data Lake Store предоставляют веб-интерфейс для просмотра файлов и передачи новых файлов по одному. Это хороший вариант, если вам не нужно устанавливать какие-либо средства или применять команды для быстрого просмотра или передачи нескольких файлов.

## <a name="data-pipeline"></a>Конвейер данных

**Фабрика данных Azure**. [Фабрика данных Azure](/azure/data-factory/) — это управляемая служба, которая лучше всего подходит для регулярной передачи файлов между несколькими службами Azure или в локальной среде (или и там, и там). С помощью фабрики данных Azure можно создавать и включать в расписание управляемые данными рабочие процессы (конвейеры), которые принимают данные из разнородных хранилищ данных. обрабатывать и преобразовывать эти данные с помощью служб вычислений (например, Azure HDInsight Hadoop, Spark, Azure Data Lake Analytics и машинного обучения Azure), Создайте управляемые данными рабочие процессы для [оркестрации](../technology-choices/pipeline-orchestration-data-movement.md) и автоматизации перемещения и преобразования данных.

## <a name="key-selection-criteria"></a>Основные критерии выбора

Для сценариев передачи данных выберите систему в соответствии с вашими потребностями, ответив на следующие вопросы.

- Вам необходимо передавать большие объемы данных, и при этом передача через Интернет занимает много времени, является ненадежной или слишком затратной? Если да, рассмотрите возможность применения физической передачи данных.

- Предпочитаете ли вы создавать скрипты задач передачи данных для их повторного использования? Если да, выберите одно из средств командной строки или фабрику данных Azure.

- Вам необходимо передавать большие объемы данных через сетевое подключение? Если да, выберите вариант, оптимизированный для больших объемов данных.

- Вам необходимо передавать данные в реляционную базу данных или из нее? Если да, выберите вариант, поддерживающий одну или несколько реляционных баз данных. Обратите внимание, что для применения некоторых из этих вариантов требуется кластер Hadoop.

- Требуется ли вам автоматизированный конвейер данных или оркестрация рабочего процесса? Если да, рассмотрите возможность применения фабрики данных Azure.

## <a name="capability-matrix"></a>Матрица возможностей

В следующих таблицах перечислены основные различия в возможностях.

### <a name="physical-transfer"></a>Физическая передача

| | Служба импорта и экспорта Azure | Azure Data Box |
| --- | --- | --- |
| Форм-фактор | Внутренние жесткие диски SATA или SDD | Безопасное, защищенное от несанкционированного доступа одно аппаратное устройство |
| Корпорация Майкрософт управляет материально-техническим обеспечением доставки | Нет  | Yes |
| Интегрируется с партнерскими продуктами | Нет  | Yes |
| Пользовательское устройство | Нет  | Yes |

### <a name="command-line-tools"></a>Программы командной строки

**Hadoop/HDInsight**

| | Distcp | Sqoop | Интерфейс командной строки Hadoop |
| --- | --- | --- | --- |
| Оптимизировано для больших объемов данных | Yes | Yes |  Yes |
| Копирование в реляционную базу данных |  Нет  | Yes | Нет  |
| Копирование из реляционной базы данных |  Нет  | Yes | Нет  |
| Копирование в хранилище BLOB-объектов |  Yes | Yes | Yes |
| Копирование из хранилища BLOB-объектов | Yes |  Yes | Нет  |
| Копирование в Data Lake Store | Yes | Yes | Yes |
| Копирование из Data Lake Store | Yes | Yes | Нет  |

**другие.**

| | Инфраструктура CLI Azure | AzCopy | PowerShell | AdlCopy | PolyBase |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Совместимые платформы | Linux, OS X, Windows | Linux, Windows | Windows | Linux, OS X, Windows | SQL Server, хранилище данных SQL Azure | 
| Оптимизировано для больших объемов данных | Нет  | Нет  | Нет  | Да <sup>1</sup> | Да <sup>2</sup> |
| Копирование в реляционную базу данных | Нет  | Нет  | Нет  | Нет  | Yes | 
| Копирование из реляционной базы данных | Нет  | Нет  | Нет  | Нет  | Yes | 
| Копирование в хранилище BLOB-объектов | Yes | Yes | Yes | Нет  | Yes | 
| Копирование из хранилища BLOB-объектов | Yes | Yes | Yes | Yes | Yes |
| Копирование в Data Lake Store | Нет  | Нет  | Yes | Yes |  Yes | 
| Копирование из Data Lake Store | Нет  | Нет  | Yes | Yes | Yes | 


[1] AdlCopy оптимизировано для передачи больших объемов данных при использовании учетной записи Data Lake Analytics.

[2] Производительность PolyBase [можно увеличить](/sql/relational-databases/polybase/polybase-guide#performance), отправляя результаты вычислений в Hadoop и используя [масштабируемые группы PolyBase](/sql/relational-databases/polybase/polybase-scale-out-groups) для обеспечения параллельной передачи данных между экземплярами SQL Server и узлами Hadoop.

### <a name="graphical-interface-and-azure-data-factory"></a>Графический интерфейс и фабрика данных Azure

| | обозреватель хранилищ Azure | Портал Azure* | Фабрика данных Azure |
| --- | --- | --- | --- |
| Оптимизировано для больших объемов данных | Нет  | Нет  | Yes | 
| Копирование в реляционную базу данных | Нет  | Нет  | Yes |
| Копирование в реляционную базу данных | Нет  | Нет  | Yes |
| Копирование в хранилище BLOB-объектов | Yes | Нет  | Yes |
| Копирование из хранилища BLOB-объектов | Yes | Нет  | Yes |
| Копирование в Data Lake Store | Нет  | Нет  | Yes |
| Копирование из Data Lake Store | Нет  | Нет  | Yes |
| Отправка в хранилище BLOB-объектов | Yes | Yes | Yes |
| Отправка в Data Lake Store | Yes | Yes | Yes |
| Оркестрация передачи данных. | Нет  | Нет  | Yes |
| Пользовательские преобразования данных | Нет  | Нет  | Yes |
| Модель ценообразования | Free | Free | Оплата за использование |

\* В этом случае применение портала Azure предусматривает использование веб-средств просмотра для хранилища BLOB-объектов и Data Lake Store.

