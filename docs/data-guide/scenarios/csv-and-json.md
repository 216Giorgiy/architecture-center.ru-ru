---
title: Обработка CSV- и JSON-файлов
description: ''
author: zoinerTejada
ms:date: 02/12/2018
ms.openlocfilehash: 02e684d562cfe555f9e3596ad0a2f1a00d05c7a7
ms.sourcegitcommit: 51f49026ec46af0860de55f6c082490e46792794
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/03/2018
ms.locfileid: "30298612"
---
# <a name="working-with-csv-and-json-files-for-data-solutions"></a><span data-ttu-id="a8f51-102">Работа с CSV- и JSON-файлами в контексте решений для работы с данными</span><span class="sxs-lookup"><span data-stu-id="a8f51-102">Working with CSV and JSON files for data solutions</span></span>

<span data-ttu-id="a8f51-103">CSV и JSON — вероятно, наиболее распространенные форматы, используемые для приема, хранения неструктурированных или частично структурированных данных и обмена ими.</span><span class="sxs-lookup"><span data-stu-id="a8f51-103">CSV and JSON are likely the most common formats used for ingesting, exchanging, and storing unstructured or semi-structured data.</span></span> 

## <a name="about-csv-format"></a><span data-ttu-id="a8f51-104">Сведения о формате CSV</span><span class="sxs-lookup"><span data-stu-id="a8f51-104">About CSV format</span></span>

<span data-ttu-id="a8f51-105">CSV-файлы (значения, разделенные запятыми) обычно используются для обмена табличными данными между системами в обычном тексте.</span><span class="sxs-lookup"><span data-stu-id="a8f51-105">CSV (comma-separated values) files are commonly used to exchange tabular data between systems in plain text.</span></span> <span data-ttu-id="a8f51-106">В основном они содержат строку заголовка, которая предоставляет имена столбцов для данных, но в остальном они считаются частично структурированными.</span><span class="sxs-lookup"><span data-stu-id="a8f51-106">They typically contain a header row that provides column names for the data, but are otherwise considered semi-structured.</span></span> <span data-ttu-id="a8f51-107">Это связано с тем, что CSV-файлы изначально не могут представлять иерархические или реляционные данные.</span><span class="sxs-lookup"><span data-stu-id="a8f51-107">This is due to the fact that CSVs cannot naturally represent hierarchical or relational data.</span></span> <span data-ttu-id="a8f51-108">Связи между данными обычно обрабатываются с использованием нескольких CSV-файлов. Внешние ключи хранятся в столбцах одного или нескольких файлов, однако связи между этими файлами не выражаются самим форматом.</span><span class="sxs-lookup"><span data-stu-id="a8f51-108">Data relationships are typically handled with multiple CSV files, where foreign keys are stored in columns of one or more files, but the relationships between those files are not expressed by the format itself.</span></span> <span data-ttu-id="a8f51-109">Файлы в формате CSV могут использовать другие разделители, помимо запятых, например символы табуляции или пробелы.</span><span class="sxs-lookup"><span data-stu-id="a8f51-109">Files in CSV format may use other delimiters besides commas, such as tabs or spaces.</span></span>

<span data-ttu-id="a8f51-110">Несмотря на ограничения, CSV-файлы являются популярным выбором для обмена данными, так как они поддерживаются широким рядом бизнес-приложений, потребительских и научных приложений.</span><span class="sxs-lookup"><span data-stu-id="a8f51-110">Despite their limitations, CSV files are a popular choice for data exchange, because they are supported by a wide range of business, consumer, and scientific applications.</span></span> <span data-ttu-id="a8f51-111">Например, программы баз данных и электронных таблиц могут импортировать и экспортировать CSV-файлы.</span><span class="sxs-lookup"><span data-stu-id="a8f51-111">For example, database and spreadsheet programs can import and export CSV files.</span></span> <span data-ttu-id="a8f51-112">Аналогичным образом большинство модулей обработки пакетных и потоковых данных (например, Spark и Hadoop) изначально поддерживают сериализацию и десериализацию CSV-файлов и предлагают способы применения схемы при чтении.</span><span class="sxs-lookup"><span data-stu-id="a8f51-112">Similarly, most batch and stream data processing engines, such as Spark and Hadoop, natively support serializing and deserializing CSV-formatted files and offer ways to apply a schema on read.</span></span> <span data-ttu-id="a8f51-113">Они упрощают работу с данными, предоставляя варианты выполнения запроса и сохраняя сведения в более эффективном формате для быстрой обработки.</span><span class="sxs-lookup"><span data-stu-id="a8f51-113">This makes it easier to work with the data, by offering options to query against it and store the information in a more efficient data format for faster processing.</span></span>

## <a name="about-json-format"></a><span data-ttu-id="a8f51-114">Сведения о формате JSON</span><span class="sxs-lookup"><span data-stu-id="a8f51-114">About JSON format</span></span>

<span data-ttu-id="a8f51-115">Данные JSON (нотация объектов JavaScript) представлены в виде пар "ключ — значение" в частично структурированном формате.</span><span class="sxs-lookup"><span data-stu-id="a8f51-115">JSON (JavaScript Object Notation) data is represented as key-value pairs in a semi-structured format.</span></span> <span data-ttu-id="a8f51-116">JSON часто сравнивают с XML, так как они могут хранить данные в иерархическом формате. Дочерние данные в них представлены вместе с родительскими.</span><span class="sxs-lookup"><span data-stu-id="a8f51-116">JSON is often compared to XML, as both are capable of storing data in hierarchical format, with child data represented inline with its parent.</span></span> <span data-ttu-id="a8f51-117">Оба формата являются самоописывающими и удобочитаемыми для пользователя, однако документы JSON, как правило, намного меньше. Поэтому их чаще используют при сетевом обмене данными, особенно с появлением веб-служб на базе REST.</span><span class="sxs-lookup"><span data-stu-id="a8f51-117">Both are self-describing and human readable, but JSON documents tend to be much smaller, leading to their popular use in online data exchange, especially with the advent of REST-based web services.</span></span> 

<span data-ttu-id="a8f51-118">Файлы в формате JSON имеют несколько преимуществ по сравнению с CSV-файлами.</span><span class="sxs-lookup"><span data-stu-id="a8f51-118">JSON-formatted files have several benefits over CSV:</span></span>

* <span data-ttu-id="a8f51-119">JSON поддерживает иерархические структуры, упрощая хранение связанных данных в одном документе и представление сложных связей.</span><span class="sxs-lookup"><span data-stu-id="a8f51-119">JSON maintains hierarchical structures, making it easier to hold related data in a single document and represent complex relationships.</span></span>
* <span data-ttu-id="a8f51-120">Большинство языков предоставляют упрощенные библиотеки сериализации JSON или встроенную поддержку десериализации JSON в объекты.</span><span class="sxs-lookup"><span data-stu-id="a8f51-120">Most programming languages provide native support for deserializing JSON into objects, or provide lightweight JSON serialization libraries.</span></span>
* <span data-ttu-id="a8f51-121">JSON поддерживает списки объектов, помогая избежать беспорядочных преобразований списков в реляционную модель данных.</span><span class="sxs-lookup"><span data-stu-id="a8f51-121">JSON supports lists of objects, helping to avoid messy translations of lists into a relational data model.</span></span>
* <span data-ttu-id="a8f51-122">JSON — это широко используемый формат файлов для баз данных NoSQL, таких как MongoDB, Couchbase и Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="a8f51-122">JSON is a commonly used file format for NoSQL databases, such as MongoDB, Couchbase, and Azure Cosmos DB.</span></span>

<span data-ttu-id="a8f51-123">Так как множество данных передачи уже находится в формате JSON, большинство веб-языков изначально поддерживают работу с JSON или используют внешние библиотеки для сериализации и десериализации данных JSON.</span><span class="sxs-lookup"><span data-stu-id="a8f51-123">Since a lot of data coming across the wire is already in JSON format, most web-based programming languages support working with JSON natively, or through the use of external libraries to serialize and deserialize JSON data.</span></span> <span data-ttu-id="a8f51-124">Благодаря этой поддержке JSON используют в логических форматах посредством представления структуры данных, форматах обмена для горячих данных и хранилищах для холодных данных.</span><span class="sxs-lookup"><span data-stu-id="a8f51-124">This universal support for JSON has led to its use in logical formats through data structure representation, exchange formats for hot data, and data storage for cold data.</span></span>

<span data-ttu-id="a8f51-125">Многие модули обработки пакетных и потоковых данных изначально поддерживают сериализацию и десериализацию JSON.</span><span class="sxs-lookup"><span data-stu-id="a8f51-125">Many batch and stream data processing engines natively support JSON serialization and deserialization.</span></span> <span data-ttu-id="a8f51-126">Несмотря на то что данные, содержащиеся в документах JSON, в конечном итоге могут быть сохранены в более оптимизированных по производительности форматах, таких как Parquet или Avro, они служат в качестве необработанных исходных данных, что очень важно для повторной обработки данных (при необходимости).</span><span class="sxs-lookup"><span data-stu-id="a8f51-126">Though the data contained within JSON documents may ultimately be stored in a more performance-optimized formats, such as Parquet or Avro, it serves as the raw data for source of truth, which is critical for reprocessing the data as needed.</span></span>

## <a name="when-to-use-csv-or-json-formats"></a><span data-ttu-id="a8f51-127">Использование форматов CSV и JSON</span><span class="sxs-lookup"><span data-stu-id="a8f51-127">When to use CSV or JSON formats</span></span>

<span data-ttu-id="a8f51-128">CSV-файлы чаще используются для экспорта и импорта данных или их обработки для задач аналитики и машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="a8f51-128">CSVs are more commonly used for exporting and importing data, or processing it for analytics and machine learning.</span></span> <span data-ttu-id="a8f51-129">Файлы в формате JSON имеют те же преимущества, но чаще используются в решениях обмена горячими данными.</span><span class="sxs-lookup"><span data-stu-id="a8f51-129">JSON-formatted files have the same benefits, but are more common in hot data exchange solutions.</span></span> <span data-ttu-id="a8f51-130">Документы JSON часто отправляются с веб- и мобильных устройств, выполняющих онлайн-транзакции, устройств Интернета вещей для односторонней или двунаправленной связи или клиентских приложений, обменивающихся данными со службами SaaS и PaaS или бессерверными архитектурами.</span><span class="sxs-lookup"><span data-stu-id="a8f51-130">JSON documents are often sent by web and mobile devices performing online transactions, by IoT (internet of things) devices for one-way or bidirectional communication, or by client applications communicating with SaaS and PaaS services or serverless architectures.</span></span> 

<span data-ttu-id="a8f51-131">CSV- и JSON-файлы облегчают обмен данными между разными системами или устройствами.</span><span class="sxs-lookup"><span data-stu-id="a8f51-131">CSV and JSON file formats both make it easy to exchange data between dissimilar systems or devices.</span></span> <span data-ttu-id="a8f51-132">Частично структурированные форматы позволяют переносить практически любые типы данных, а универсальная поддержка упрощает работу.</span><span class="sxs-lookup"><span data-stu-id="a8f51-132">Their semi-structured formats allow flexibility in transferring almost any type of data, and universal support for these formats make them simple to work with.</span></span> <span data-ttu-id="a8f51-133">Оба формата могут использоваться как источник истины в случаях, когда обработанные данные хранятся в двоичных форматах для более эффективного выполнения запроса.</span><span class="sxs-lookup"><span data-stu-id="a8f51-133">Both can be used as the raw source of truth in cases where the processed data is stored in binary formats for more efficient querying.</span></span> 

## <a name="working-with-csv-and-json-data-in-azure"></a><span data-ttu-id="a8f51-134">Работа с CSV- и JSON-файлами в Azure</span><span class="sxs-lookup"><span data-stu-id="a8f51-134">Working with CSV and JSON data in Azure</span></span>

<span data-ttu-id="a8f51-135">Azure предлагает несколько решений для работы с CSV- и JSON-файлами, выбор которых зависит от ваших потребностей.</span><span class="sxs-lookup"><span data-stu-id="a8f51-135">Azure provides several solutions for working with CSV and JSON files, depending on your needs.</span></span> <span data-ttu-id="a8f51-136">Обычно эти файлы размещены либо в службе хранилища Azure, либо в Azure Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="a8f51-136">The primary landing place for these files is either Azure Storage or Azure Data Lake Store.</span></span> <span data-ttu-id="a8f51-137">Большинство служб Azure, которые работают с этими и другими текстовыми файлами, интегрируются с любой службой хранения объектов.</span><span class="sxs-lookup"><span data-stu-id="a8f51-137">Most Azure services that work with these and other text-based files integrate with either object storage service.</span></span> <span data-ttu-id="a8f51-138">Однако в некоторых случаях вы можете напрямую импортировать данные в SQL Azure или в другое хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="a8f51-138">In some situations, however, you may opt to directly import the data into Azure SQL or some other data store.</span></span> <span data-ttu-id="a8f51-139">SQL Server имеет встроенную поддержку для хранения документов JSON и работы с ними, что упрощает [импорт и обработку этих типов файлов](/sql/relational-databases/json/import-json-documents-into-sql-server).</span><span class="sxs-lookup"><span data-stu-id="a8f51-139">SQL Server has native support for storing and working with JSON documents, which makes it easy to [import and process those types of files](/sql/relational-databases/json/import-json-documents-into-sql-server).</span></span> <span data-ttu-id="a8f51-140">Для [импорта CSV-файлов](/sql/relational-databases/json/import-json-documents-into-sql-server) можно использовать такую служебную программу, как средство массового импорта SQL.</span><span class="sxs-lookup"><span data-stu-id="a8f51-140">You can use a utility like SQL Bulk Import to easily [import CSV files](/sql/relational-databases/json/import-json-documents-into-sql-server).</span></span>

<span data-ttu-id="a8f51-141">В зависимости от сценария вы можете выполнять [пакетную обработку](../big-data/batch-processing.md) данных или [обработку данных в режиме реального времени](../big-data/real-time-processing.md).</span><span class="sxs-lookup"><span data-stu-id="a8f51-141">Depending on the scenario, you may perform [batch processing](../big-data/batch-processing.md) or [real-time processing](../big-data/real-time-processing.md) of the data.</span></span>

## <a name="challenges"></a><span data-ttu-id="a8f51-142">Сложности</span><span class="sxs-lookup"><span data-stu-id="a8f51-142">Challenges</span></span>

<span data-ttu-id="a8f51-143">При работе с этими форматами возникают следующие проблемы.</span><span class="sxs-lookup"><span data-stu-id="a8f51-143">There are some challenges to consider when working with these formats:</span></span>

* <span data-ttu-id="a8f51-144">Без каких-либо ограничений в модели данных CSV- и JSON-файлы подвержены повреждению данных (ситуация "мусор на входе, мусор на выходе").</span><span class="sxs-lookup"><span data-stu-id="a8f51-144">Without any restraints on the data model, CSV and JSON files are prone to data corruption ("garbage in, garbage out").</span></span> <span data-ttu-id="a8f51-145">Например, в файлах нет понятия объекта даты и времени, поэтому в поле даты можно ввести, к примеру, ABC123.</span><span class="sxs-lookup"><span data-stu-id="a8f51-145">For instance, there's no notion of a date/time object in either file, so the file format does not prevent you from inserting "ABC123" in a date field, for example.</span></span>

* <span data-ttu-id="a8f51-146">CSV- и JSON-файлы в качестве решения для холодного хранения плохо масштабируются при работе с большими данными.</span><span class="sxs-lookup"><span data-stu-id="a8f51-146">Using CSV and JSON files as your cold storage solution does not scale well when working with big data.</span></span> <span data-ttu-id="a8f51-147">В большинстве случаев их невозможно разделить на секции для параллельной обработки. Кроме того, их невозможно сжать так же, как и двоичные форматы.</span><span class="sxs-lookup"><span data-stu-id="a8f51-147">In most cases, they cannot be split into partitions for parallel processing, and cannot be compressed as well as binary formats.</span></span> <span data-ttu-id="a8f51-148">Поэтому эти данные часто обрабатываются и хранятся в оптимизированных для чтения форматах, таких как Parquet и ORC, которые также предоставляют индексы и встроенную статистику о данных.</span><span class="sxs-lookup"><span data-stu-id="a8f51-148">This often leads to processing and storing this data into read-optimized formats such as Parquet and ORC (optimized row columnar), which also provide indexes and inline statistics about the data contained.</span></span>

* <span data-ttu-id="a8f51-149">Возможно, нужно будет применить схему для частично структурированных данных, чтобы упростить выполнение запросов и анализ.</span><span class="sxs-lookup"><span data-stu-id="a8f51-149">You may need to apply a schema on the semi-structured data to make it easier to query and analyze.</span></span> <span data-ttu-id="a8f51-150">Как правило, для этого файлы должны храниться в форме, соответствующей требованиям хранилища данных вашей среды, например в базе данных.</span><span class="sxs-lookup"><span data-stu-id="a8f51-150">Typically, this requires storing the data in another form that complies with your environment's data storage needs, such as within a database.</span></span>

