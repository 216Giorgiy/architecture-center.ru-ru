---
title: Расширение локальных решений для работы с данными в облако
description: ''
author: zoinerTejada
ms.date: 02/12/2018
ms.openlocfilehash: 410162ff318846cbe695168abbcc2ae363f47e24
ms.sourcegitcommit: e7e0e0282fa93f0063da3b57128ade395a9c1ef9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2018
ms.locfileid: "52901734"
---
# <a name="extending-on-premises-data-solutions-to-the-cloud"></a>Расширение локальных решений для работы с данными в облако

Если организации перемещают рабочие нагрузки и данные в облако, их локальные центры обработки данных часто продолжают играть важную роль. Термин *гибридное облако* представляет собой сочетание общедоступного облака и локальных центров обработки данных. Он позволяет создать интегрированную ИТ-среду, охватывающую обе этих инфраструктуры. Некоторые организации используют гибридное облако как способ переноса всего центра обработки данных в облако в течение долгого времени. Другие организации используют облачные службы, чтобы расширить свои имеющиеся локальные инфраструктуры. 

В этой статье содержатся некоторые сведения и рекомендации для управления данными в гибридном облачном решении.

## <a name="when-to-use-a-hybrid-solution"></a>Сценарии использования гибридного решения

Рассмотрите возможность использования гибридного решения в следующих сценариях:

* В качестве стратегии перехода во время долговременного переноса в полностью облачные решения.
* Когда нормативы или политики не допускают перенос определенных данных или рабочих нагрузок в облако.
* Для аварийного восстановления и обеспечения отказоустойчивости путем репликации данных и служб между локальными и облачными средами.
* Чтобы сократить задержку между локальным центром обработки данных и удаленными расположениями, разместив часть архитектуры в Azure.

## <a name="challenges"></a>Сложности

* Создание согласованной среды с точки зрения безопасности, управления и разработки и предотвращение дублирования работы.

* Создание надежного и безопасного подключения к данным с минимальной задержкой между локальной и облачной средой.

* Репликация данных и изменение приложений и средств для использования подходящих хранилищ данных в каждой среде.

* Обеспечение безопасности и шифрования данных, размещенных в облаке, доступ к которым осуществляется из локальной среды, или наоборот.

## <a name="on-premises-data-stores"></a>Локальные хранилища данных

Локальные хранилища данных включают базы данных и файлы. Имеется несколько причин для хранения этих объектов локально. Могут существовать нормативы или политики, которые не допускают перенос определенных данных или рабочих нагрузок в облако. Данные лучше размещать в локальной среде с точки зрения обеспечения их независимости, конфиденциальности и безопасности. Во время миграции может потребоваться сохранить данные локально в приложении, которое еще не перенесено.

При размещении данных приложения в публичном облаке следует учитывать следующее:

* **Стоимость**. Стоимость хранилища в Azure может быть значительно меньшей, чем стоимость обслуживания хранилища со схожими характеристиками в локальном центре обработки данных. Конечно, многие компании уже инвестировали в мощные сети хранения данных, поэтому преимущества по затратам могут не быть реализованы в полной мере, пока имеющееся оборудование не устареет.
* **Эластичное масштабирование.** Планирование увеличения емкости данных и управление им в локальной среде может оказаться сложной задачей, особенно если рост данных сложно предсказать. Приложения могут использовать хранилище с емкостью по запросу и практически неограниченное хранилище, доступное в облаке. Это рекомендации менее актуальны для приложений, состоящих из наборов данных относительно статических размеров.
* **Аварийное восстановление.** Данные, хранящиеся в Azure, можно автоматически реплицировать в пределах региона Azure и между географическими регионами. В гибридных средах эту же технологию можно использовать для выполнения репликации между локальными и облачными хранилищами данных.

## <a name="extending-data-stores-to-the-cloud"></a>Расширение хранилищ данных в облако

Есть несколько вариантов для расширения локальных хранилищ данных в облако. Один из вариантов — использовать локальные и облачные реплики. Это может помочь обеспечить высокий уровень отказоустойчивости, но для этого может потребоваться внести изменения в приложения, чтобы позволить им подключиться к соответствующему хранилищу данных при отработке отказа.

Второй вариант — перенести часть данных в облачное хранилище, сохранив самые актуальные и часто запрашиваемые данные локально. Этот метод может обеспечить более выгодный способ долговременного хранения, а также позволяет уменьшить время отклика при доступе к данным за счет сокращения набора операционных данных.

Третий вариант — хранить все данные локально. Однако для размещения приложений необходимо использовать облачные вычисления. Для этого следует разместить приложение в облаке и подключить его к локальному хранилищу данных через безопасное подключение. 

## <a name="azure-stack"></a>Azure Stack

Для полного гибридного облачного решения рассмотрите возможность использования [Microsoft Azure Stack](/azure/azure-stack/). Azure Stack ― это гибридная облачная платформа, позволяющая предоставлять службы Azure из центра обработки данных. Это помогает обеспечить согласованность между локальной средой и Azure, используя аналогичные средства без каких-либо изменений кода. 

Ниже приведены некоторые варианты использования Azure и Azure Stack.

* **Пограничные и отключенные решения.** Обеспечивайте соответствующие задержку и подключение, локально обрабатывая данные в Azure Stack, а затем выполняя их статистическую обработку в Azure для последующей аналитики, используя общую логику приложения в обоих сценариях. 
* **Облачные приложения, соответствующие различным нормам.** Разрабатывайте и развертывайте приложения в Azure с гибкими возможностями локального развертывания этих же приложений в Azure Stack для обеспечения нормативных требований или требований политики.
* **Локальная облачная модель приложения.** Обновляйте и создавайте новые приложения или расширяйте имеющиеся с помощью Azure. Используйте согласованные процессы DevOps в облаке Azure или локальной среде Azure Stack.

## <a name="sql-server-data-stores"></a>Хранилища данных SQL Server

Если вы запускаете SQL Server в локальной среде, вы можете выполнить резервное копирование и восстановление с помощью службы хранилища BLOB-объектов Microsoft Azure. Дополнительные сведения см. в статье [Резервное копирование и восстановление SQL Server с помощью службы хранилища Blob-объектов Microsoft Azure](/sql/relational-databases/backup-restore/sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service). Это предоставляет неограниченное удаленное хранилище и возможность совместно использовать одни и те же резервные копии в локальном экземпляре SQL Server и в SQL Server, запущенном на виртуальной машине в Azure. 

[База данных SQL Azure](/azure/sql-database/) — это управляемая реляционная база данных как услуга. Так как база данных SQL Azure использует ядро Microsoft SQL Server, приложения могут получать доступ к данным идентичным образом, используя обе технологии. Базу данных SQL Azure также можно эффективно использовать вместе с SQL Server. Например, функция [SQL Server Stretch Database](/sql/sql-server/stretch-database/stretch-database) позволяет приложению получить доступ к отдельной таблице в базе данных SQL Server. При этом все или некоторые строки этой таблицы могут храниться в базе данных SQL Azure. Эта технология автоматически перемещает данные, доступ к которым не осуществлялся на протяжении определенного периода времени, в облако. Приложениям, считывающим эти данные, неизвестно, что данные перемещены в облако.

Обслуживание хранилищ данных в локальной среде и в облаке может быть нелегкой задачей, если вы захотите синхронизировать данные. Вы можете решить эту проблему с помощью службы [синхронизации данных SQL](/azure/sql-database/sql-database-sync-data). Это служба, созданная на основе базы данных SQL Azure, которая позволяет в двунаправленном режиме синхронизировать выбранные данные в нескольких базах данных SQL Azure и экземплярах SQL Server. Хотя служба синхронизации данных позволяет без труда поддерживать актуальность данных в различных хранилищах, ее не следует использовать для аварийного восстановления или для переноса данных из локального SQL Server в базу данных SQL Azure.

Для аварийного восстановления и обеспечения непрерывности бизнес-процессов можно использовать [группы доступности AlwaysOn](/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server), чтобы реплицировать данные между двумя или более экземплярами SQL Server, некоторые из которых могут выполняться на виртуальных машинах Azure в другом географическом регионе.

## <a name="network-shares-and-file-based-data-stores"></a>Сетевые папки и файловые хранилища данных

В гибридной облачной архитектуре организации обычно сохраняют новые файлы в локальной среде и архивируют старые файлы в облако. Иногда это называется распределением файлов по уровням. При этом обеспечивается бесперебойный доступ к наборам файлов, которые размещены в локальной среде и в облаке. Этот подход позволяет сократить использование пропускной способности сети и время доступа к новым файлам, которые используются чаще всего. В то же время вы получаете преимущества облачного хранилища для архивированных данных. 

Организациям также может понадобиться полностью переместить сетевые папки в облако. Это желательно, например, если приложения, которые получают к ним доступ, также расположены в облаке. Эту процедуру можно выполнить с помощью средств для [оркестрации данных](../technology-choices/pipeline-orchestration-data-movement.md).


[Azure StorSimple](/azure/storsimple/) предоставляет наиболее полное решение интегрированного хранилища для управления задачами хранилища на локальных устройствах и в облачном хранилище Azure. StorSimple — это эффективное, экономичное и легко управляемое решение сети хранения данных (SAN), которое устраняет многие проблемы и расходы, связанные с корпоративным хранилищем и защитой данных. Оно использует собственное устройство StorSimple серии 8000, интегрируется с облачными службами и предоставляет набор встроенных средств управления.

С помощью службы [Файлы Azure](/azure/storage/files/storage-files-introduction) вы также можете использовать локальные сетевые папки вместе с облачным хранилищем файлов. Служба "Файлы Azure" предоставляет полностью управляемые файловые ресурсы, доступ к которым можно получить с помощью стандартного протокола [SMB](https://msdn.microsoft.com/library/windows/desktop/aa365233.aspx?f=255&MSPPError=-2147217396) (иногда его называют CIFS). Вы можете подключить службу "Файлы Azure" как файловый ресурс на локальном компьютере или использовать ее с имеющимися приложениями, которые осуществляют доступ к локальным файлам и файлам сетевой папки.

Синхронизировать файловые ресурсы в службе "Файлы Azure" с локальными серверами Windows можно с помощью службы [синхронизации файлов Azure](/azure/storage/files/storage-sync-files-planning). Одним из основных преимуществ службы синхронизации файлов Azure является возможность распределить файлы по уровням между локальным файловым сервером и службой "Файлы Azure". Это позволяет хранить локально только новые и наиболее часто используемые файлы. 

Дополнительные сведения см. в статье [Выбор между большими двоичными объектами Azure, службой файлов Azure и дисками Azure](/azure/storage/common/storage-decide-blobs-files-disks).

## <a name="hybrid-networking"></a>Гибридные сети

В этой статье описываются гибридные решения данных, а также, как расширить локальную сеть в Azure. Дополнительные сведения об этом аспекте гибридных решений см. в следующих статьях:

- [Выбор решения для подключения локальной сети к Azure](../../reference-architectures/hybrid-networking/considerations.md)
- [Подключение локальной сети к Azure](../../reference-architectures/hybrid-networking/index.md)

