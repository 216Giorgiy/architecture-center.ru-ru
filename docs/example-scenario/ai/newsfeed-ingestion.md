---
title: Массовый прием и анализ пакетов новостей в Azure
description: Создайте конвейер для приема и анализа текста, изображений, тональности и других данных из RSS-пакетов новостей, используя только службы Azure, такие как Azure Cosmos DB и Azure Cognitive Services.
author: njray
ms.date: 2/1/2019
ms.custom: azcat-ai, AI
social_image_url: /azure/architecture/example-scenario/ai/media/mass-ingestion-newsfeeds-architecture.png
ms.topic: example-scenario
ms.service: architecture-center
ms.subservice: example-scenario
ms.openlocfilehash: e1bc636103753d474b545a6e3e9118b2ef302b34
ms.sourcegitcommit: ea97ac004c38c6b456794c1a8eef29f8d2b77d50
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/26/2019
ms.locfileid: "58489266"
---
# <a name="mass-ingestion-and-analysis-of-news-feeds-on-azure"></a>Массовый прием и анализ пакетов новостей в Azure

В этом примере сценария описывается конвейер для массового приема и практически в реальном времени анализа документов с помощью общедоступных веб-каналов новостей RSS.  Она использует Azure Cognitive Services для полезных сообщают, включая перевод текста, распознавание лиц и определения мнений.

Этот сценарий содержит примеры для [Английский][english], [русский][russian], и [немецкий] [ german] новостей веб-каналы, но вы можете легко перенести его на другие RSS-каналы. Для простоты развертывания сбор данных, обработки и анализа основаны полностью на службы Azure.

## <a name="relevant-use-cases"></a>Варианты соответствующего использования

Хотя этот сценарий основан на обработке RSS-каналы, это относится к любой документ, веб-сайта или статье, где необходимо:

* Перевод любой текст на выбранном языке.
* Найти ключевые фразы, сущности и мнений пользователей в цифрового содержимого.
* Обнаруживать объекты "," текст "и" ориентиры в изображений, связанных с цифровой статьи.
* Обнаруживать пользователей по их пол и возраст в любое другое изображение, связанное с цифровым содержимым.

## <a name="architecture"></a>Архитектура

![][architecture]

Поток данных проходит через решение следующим образом.

1. Новости RSS-канал действует как генератор, который получает данные из документа или статье. Например статьи, данные обычно включают в себя заголовок, сводку исходный текст элемента новостей и иногда изображений.

2. Генератор или приема процесс вставляет в этой статье и все связанные образы в Azure Cosmos DB [коллекции][collection].

3. Уведомление активирует функцию приема в функциях Azure, который хранит текста статьи в CosmosDB и изображений (если таковые имеются) в хранилище BLOB-объектов.  Статья, затем передается на следующую очередь.

4. Функция translate инициируется событие очереди. Она использует [API перевода текстов] [ translate-text] Azure Cognitive Services для определения языка, перевод, при необходимости, а сбор тело и заголовок тональности, ключевых фраз и сущностей. Затем он передает статьи на следующую очередь.

5. Функция обнаружения запускается из статьи в очереди. Она использует [компьютерного] [ vision] служба обнаружения объектов, ориентиров и письменные слов в нужный образ, затем передает статьи на следующую очередь.

6. Функция распознавания лиц запускается активируется из статьи в очереди. Она использует [API распознавания лиц Azure] [ face] служба обнаружения лиц для Пол и возраст в нужный образ, а затем передает статьи на следующую очередь.

7. После выполнения всех функций активации функции уведомления. Он загружает обработанные записи для статьи и ищет все нужные результаты. Если найден, содержимое помечен и уведомление отправляется в систему по своему усмотрению.

На каждом этапе обработки функция записывает результаты в Azure Cosmos DB. В конечном счете, данные могут использоваться необходимости. Например его можно использовать для улучшения бизнес-процессов, найти новых клиентов или выявить проблемы удовлетворенность клиента.

### <a name="components"></a>Компоненты

В этом примере используется следующий список компонентов Azure.

* [Служба хранилища Azure] [ storage] используется для хранения изображений RAW-формата и видео файлов, связанных с статьи. Дополнительную учетную запись хранения создается с помощью службы приложений Azure и используется для размещения кода функции Azure и журналы.

* [Azure Cosmos DB] [ cosmos-db] содержит статьи, текст, изображения и видео, сведения об отслеживании. Результаты действия Cognitive Services, здесь также хранятся.

* [Функции Azure] [ functions] выполняет код функции реагировать очереди сообщений и преобразования входящего содержимого. [Служба приложений Azure] [ aas] размещает код функции и последовательно обрабатывает записи. Этот сценарий включает пять функций: Прием, преобразования, обнаружить объект, лицо и уведомления.

* [Azure Service Bus] [ service-bus] размещает очередей служебной шины Azure, используемые функциями.

* [Azure Cognitive Services] [ acs] предоставляет искусственного Интеллекта для конвейера, на основе реализации [компьютерного] [ vision] службы, [лиц API][face], и [перевести текст] [ translate-text] служба машинного перевода.

* [Azure Application Insights] [ aai] предоставляет analytics которые помогут вам диагностировать проблемы и понять функциональности приложения.

### <a name="alternatives"></a>Альтернативные варианты

* Вместо того чтобы использовать шаблон, основанный на очереди уведомлений и функций Azure, используйте другой шаблон для этого потока данных. Например [разделы служебной шины Azure] [ topics] может использоваться для процессов, различные части статьи в параллельном режиме в отличие от последовательной обработки в этом примере. Дополнительные сведения, сравните [очередей и разделов][queues-topics].

* Используйте [приложения логики Azure] [ logic-app] для реализации кода самой функции и реализации, такие как блокировка на уровне записи [Redlock] [ redlock] (необходимые для параллельного обработку до Azure Cosmos DB поддерживает [обновления частичный документ][partial]). Дополнительные сведения [сравнение функций и Logic Apps][compare].

* Реализации этой архитектуры с помощью настраиваемых компонентов искусственного Интеллекта, а не на существующие службы Azure. Например расширение конвейера, с помощью настраиваемых модели, определяющей определенным пользователям изображения число универсальных людей, пол, в отличие от и возраст данных, собранных в этом примере. Чтобы использовать настраиваемые машинного обучения или модели искусственного Интеллекта с этой архитектурой, создайте модель как конечные точки RESTful, поэтому они могут вызываться из функций Azure.

* Используйте другой механизм ввода вместо RSS-каналы. Используйте несколько генераторов и процессы приема для веб-канала Azure Cosmos DB и службы хранилища Azure.

## <a name="considerations"></a>Рекомендации

Для простоты в этом примере сценария используется только небольшая часть доступных API-интерфейсов и служб в Azure Cognitive Services. Например, текст на изображениях можно проанализировать с помощью [API текстовой аналитики][text-analytics]. Целевой язык в этом сценарии предполагается, что на английском языке, но можно изменить входные данные для любого [поддерживаемого языка] [ language] по своему усмотрению.

### <a name="scalability"></a>Масштабируемость

Масштабирование функций Azure зависит от [план размещения] [ plan] использовании. В этом решении предполагается [план потребления][plan-c], в которой вычислительное power автоматически выделяется в функции, при необходимости. Вы платите только при выполнении функций. Другой вариант — использовать [службе приложений Azure] [ plan-aas] план, который позволяет масштабировать между уровнями для выделения разного объема ресурсов.

С помощью Azure Cosmos DB, ключ является распределение рабочей нагрузки примерно поровну между достаточно большим количеством [ключей секций][keys]. Нет ограничений на общий объем данных, который может хранить контейнер или общий объем [пропускной способности] [ throughput] , поддерживаемой контейнером.

### <a name="management-and-logging"></a>Управление и регистрация

Это решение использует [Application Insights] [ aai] для сбора данных производительности и сведения о ведении журнала. Экземпляр Application Insights создается с помощью развертывания в той же группе ресурсов, что другие службы, необходимые для этого развертывания.

Чтобы просмотреть журналы, созданные решения:

1. Перейдите к [портала Azure] [ portal] и перейдите к группе ресурсов, созданной для развертывания.

2. Нажмите кнопку **Application Insights** экземпляра.

3. Из **Application Insights** разделе, перейдите в каталог **исследовать\\поиска** и поиск данных.

### <a name="security"></a>Безопасность

Azure Cosmos DB использует безопасное подключение и подписи общего доступа через C\# SDK, предоставляемые корпорацией Майкрософт. Существуют нет других внешний контактные зоны. Дополнительные сведения о безопасности [рекомендации] [ db-practices] для Azure Cosmos DB.

## <a name="pricing"></a>Цены

Расчетная стоимость ежедневно для сохранения этого развертывания доступны составляет приблизительно \$20 США без данных, перемещение по системе.

Azure Cosmos DB обладает широкими возможностями, но влечет за собой наиболее [стоимость] [ db-cost] в этом развертывании. Можно использовать другое решение хранения рефакторингом кода функций Azure, предоставленного.

Цены для функций Azure отличается в зависимости от [план] [ function-plan] она выполняется.

## <a name="deploy-the-scenario"></a>Развертывание сценария

> [!NOTE]
> Необходимо иметь учетную запись Azure. Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись][free], прежде чем начинать работу.

Весь код для этого сценария доступно в [GitHub] [ github] репозитория. Этот репозиторий содержит исходный код, используемый для создания приложения генератора с веб-каналов в конвейер для этой демонстрации.

[architecture]: ./media/mass-ingestion-newsfeeds-architecture.png
[aai]: /azure/azure-monitor/app/app-insights-overview
[aas]: https://azure.microsoft.com/try/app-service/
[acs]: https://azure.microsoft.com/services/cognitive-services/directory/
[collection]: /rest/api/cosmos-db/collections
[compare]: /azure/azure-functions/functions-compare-logic-apps-ms-flow-webjobs#compare-azure-functions-and-azure-logic-apps
[cosmos-db]: /azure/cosmos-db/introduction
[db-cost]: https://azure.microsoft.com/pricing/details/cosmos-db/
[db-practices]: /azure/cosmos-db/database-security
[db-collection]: /azure/cosmos-db/databases-containers-items
[english]: https://www.nasa.gov/rss/dyn/breaking_news.rss
[face]: /azure/cognitive-services/face/overview
[free]: https://azure.microsoft.com/free/?WT.mc_id=A261C142F
[functions]: /azure/azure-functions/functions-overview
[function-plan]: /azure/azure-functions/functions-scale
[german]: http://www.bamf.de/SiteGlobals/Functions/RSS/DE/Feed/RSSNewsfeed_Meldungen
[github]: https://github.com/Azure/cognitive-services
[keys]: /azure/cosmos-db/partition-data
[language]: /azure/cognitive-services/translator/reference/v3-0-languages
[logic-app]: /azure/logic-apps/logic-apps-overview
[queues-topics]: /azure/service-bus-messaging/service-bus-queues-topics-subscriptions
[partial]: https://feedback.azure.com/forums/263030-azure-cosmos-db/suggestions/6693091-be-able-to-do-partial-updates-on-document
[plan]: /azure/azure-functions/functions-scale
[plan-aas]: /azure/azure-functions/functions-scale#app-service-plan
[plan-c]: /azure/azure-functions/functions-scale#consumption-plan
[portal]: http://portal.azure.com
[redlock]: https://redis.io/topics/distlock
[russian]: http://government.ru/all/rss/
[service-bus]: /azure/service-bus-messaging/
[storage]: /azure/storage/common/storage-account-overview 
[throughput]: /azure/cosmos-db/scaling-throughput
[topics]: /azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions
[text-analytics]: /azure/cognitive-services/text-analytics/
[translate-text]: /azure/cognitive-services/translator/translator-info-overview
[vision]: /azure/cognitive-services/computer-vision/home
