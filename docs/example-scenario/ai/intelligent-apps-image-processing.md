---
title: Классификация изображений для страховых требований
titleSuffix: Azure Example Scenarios
description: Создание сценария обработки изображений в приложениях Azure.
author: david-stanford
ms.date: 07/05/2018
ms.topic: example-scenario
ms.service: architecture-center
ms.subservice: example-scenario
social_image_url: /azure/architecture/example-scenario/ai/media/architecture-intelligent-apps-image-processing.png
ms.openlocfilehash: 03ef9d15ec9bf64dc743657e9d1e7a7e275c5a8e
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2019
ms.locfileid: "58244805"
---
# <a name="image-classification-for-insurance-claims-on-azure"></a>Классификация изображений в Azure для страховых требований

Этот сценарий подходит для корпораций, которым нужно обрабатывать изображения.

Потенциальные приложения включают классификацию изображений для веб-сайтов о моде, анализ текста и изображений для страховых компаний или распознавание телеметрических данных со скриншотов игр. Обычно компаниям было необходимо приобретать специальные знания о моделях машинного обучения, обучать эти модели и, наконец, пропускать изображения через индивидуальный процесс, чтобы получить выходные данные.

Используя такие службы Azure, как API компьютерного зрения и Функции Azure, компании могут избавиться от необходимости управлять отдельными серверами, одновременно сокращая затраты и используя опыт корпорации Майкрософт в обработке изображений с помощью служб Cognitive Services. Этот пример сценария предусматривает использование обработки изображений. При наличии иных потребностей в искусственном интеллекте можно использовать полный набор [Cognitive Services](/azure/#pivot=products&panel=ai).

## <a name="relevant-use-cases"></a>Варианты соответствующего использования

Другие варианты использования:

- Классификация изображений на веб-сайте о моде.
- Классификация телеметрических данных со скриншотов игр.

## <a name="architecture"></a>Архитектура

![Архитектура для классификации изображений][architecture]

Этот сценарий охватывает серверные компоненты веб-приложения или мобильного приложения. Данные передаются в сценарии следующим образом:

1. Слой API создается с помощью Функций Azure. Эти API позволяют приложению передавать изображения и получать данные из Cosmos DB.
2. После загрузки изображения через вызов API, оно сохраняется в хранилище больших двоичных объектов.
3. Добавление новых файлов в хранилище больших двоичных объектов активирует отправку уведомления Сетки событий в Функцию Azure.
4. Функции Azure отправляют API компьютерного зрения ссылку на новый загруженный файл для анализа.
5. После возвращения данных из API компьютерного зрения Функции Azure создают запись в базе данных Cosmos DB, чтобы сохранить результаты анализа вместе с метаданными изображения.

### <a name="components"></a>Компоненты

- [API компьютерного зрения](/azure/cognitive-services/computer-vision/home) — это часть набора Cognitive Services, которая используется для получения сведений о каждом изображении.
- [Функции Azure](/azure/azure-functions/functions-overview) предоставляют серверный API для веб-приложения, а также обработку событий для переданных изображений.
- [Сетка событий](/azure/event-grid/overview) активирует событие при отправке нового изображения в хранилище больших двоичных объектов. Затем изображение обрабатывается с помощью функций Azure.
- [Хранилище больших двоичных объектов](/azure/storage/blobs/storage-blobs-introduction) хранит все файлы изображений, которые отправляются в веб-приложение, а также все статические файлы, которые используются веб-приложением.
- [Cosmos DB](/azure/cosmos-db/introduction) хранит метаданные о каждом переданном изображении, включая результаты обработки API компьютерного зрения.

## <a name="alternatives"></a>Альтернативные варианты

- [Пользовательская служба визуального распознавания](/azure/cognitive-services/custom-vision-service/home). API компьютерного зрения возвращает набор [таксономических категорий][cv-categories]. Если вам необходимо обработать информацию, которую API компьютерного зрения не возвращает, рекомендуется использовать службу пользовательского визуального распознавания, которая позволяет создавать индивидуальные классификаторы изображений.
- [Поиск Azure.](/azure/search/search-what-is-azure-search) Если ваш вариант использования включает запросы метаданных для поиска изображений, соответствующих заданным критериям, рекомендуется использовать поиск Azure. [Когнитивный поиск](/azure/search/cognitive-search-concept-intro), находящийся в предварительной версии, эффективно интегрирует этот рабочий процесс.

## <a name="considerations"></a>Рекомендации

### <a name="scalability"></a>Масштабируемость

Большинство компонентов в этом примере сценария являются управляемыми службами, которые будут автоматически масштабироваться. Несколько важных исключений: Функции Azure имеют ограничение до 200 экземпляров максимум. Если вам нужно выполнить дополнительное масштабирование, используйте несколько регионов или планов приложений.

Cosmos DB не поддерживает автоматическое масштабирование на основе единиц запросов. Дополнительные сведения об оценке требований см. в разделе о [единицах запроса](/azure/cosmos-db/request-units) в нашей документации. Чтобы полностью воспользоваться преимуществами масштабирования в Cosmos DB, ознакомьтесь с принципами работы [ключей секции](/azure/cosmos-db/partition-data) в CosmosDB.

Базы данных NoSQL часто поддерживают согласованность (как в теореме CAP) для обеспечения доступности, масштабируемости и секционирования. В этом примере сценария используется модель данных с ключевыми значениями, а согласованность транзакций требуется редко, так как большинство операций по определению являются атомарными. Дополнительные рекомендации по [выбору правильного хранилища данных](../../guide/technology-choices/data-store-overview.md) см. в Центре архитектуры Azure. Если реализация требует высокого уровня согласованности, в Cosmos DB можно [выбрать собственный уровень согласованности](/azure/cosmos-db/consistency-levels).

Общие рекомендации по разработке масштабируемых решений см. в разделе [Контрольный список для обеспечения масштабируемости][scalability] в центре архитектуры Azure.

### <a name="security"></a>Безопасность

[Управляемые удостоверения Служб Azure][msi] используются для предоставления доступа к другим ресурсам, находящимся внутри учетной записи, а затем присвоенным Функциям Azure. В этих удостоверениях разрешайте доступ только к необходимым ресурсам, чтобы гарантировать, что ничто другое не подвергается воздействию ваших функций (и, возможно, ваших клиентов).

Общие рекомендации по разработке безопасных решений см. в разделе [Azure Security Documentation][security].

### <a name="resiliency"></a>Устойчивость

Все компоненты этого сценария управляются, поэтому на региональном уровне все они автоматически являются устойчивыми.

Общее руководство по проектированию устойчивых решений см. в разделе [Проектирование устойчивых приложений для Azure][resiliency].

## <a name="pricing"></a>Цены

Чтобы изучить стоимость выполнения этого сценария, все услуги были предварительно сконфигурированы в калькуляторе стоимости. Чтобы узнать, как изменится цена для вашего конкретного варианта использования, измените соответствующие переменные в соответствии с ожидаемым трафиком.

Доступны три примера профиля затрат на основе объема трафика (размер каждого изображения примерно 100 КБ).

- [Небольшой][small-pricing]: этот пример тарификации предполагает обработку &lt; 5000 изображений в месяц.
- [Средний][medium-pricing]: этот пример тарификации предполагает обработку 500 000 изображений в месяц.
- [Большой][large-pricing]: этот пример тарификации предполагает обработку 50 миллионов изображений в месяц.

## <a name="related-resources"></a>Связанные ресурсы

Пошаговую схему обучения см. в руководстве по [созданию бессерверных приложений в Azure][serverless].

Прежде чем поместить этот пример сценария в рабочую среду, ознакомьтесь с рекомендациями по [оптимизации производительности и надежности Функций Azure][functions-best-practices].

<!-- links -->
[architecture]: ./media/architecture-intelligent-apps-image-processing.png
[small-pricing]: https://azure.com/e/f9b59d238b43423683db73f4a31dc380
[medium-pricing]: https://azure.com/e/7c7fc474db344b87aae93bc29ae27108
[large-pricing]: https://azure.com/e/cbadbca30f8640d6a061f8457a74ba7d
[cognitive-search]: /azure/search/cognitive-search-concept-intro
[serverless]: /azure/functions/tutorial-static-website-serverless-api-with-database
[cv-categories]: /azure/cognitive-services/computer-vision/home#the-86-category-concept
[resiliency]: /azure/architecture/resiliency/
[security]: /azure/security/
[scalability]: /azure/architecture/checklist/scalability
[functions-best-practices]: /azure/azure-functions/functions-best-practices
[msi]: /azure/app-service/app-service-managed-service-identity
