---
title: Классификация изображений в Azure для страховых требований
description: Проверенный сценарий для создания обработки изображений в приложениях Azure.
author: david-stanford
ms.date: 07/05/2018
ms.openlocfilehash: 0ca0b46e83219afc5e22c2ac6467bf4be945c97a
ms.sourcegitcommit: c49aeef818d7dfe271bc4128b230cfc676f05230
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/11/2018
ms.locfileid: "44389168"
---
# <a name="image-classification-for-insurance-claims-on-azure"></a>Классификация изображений в Azure для страховых требований

Этот пример сценария применим для компаний, которым необходимо обрабатывать изображения.

Потенциальные приложения включают классификацию изображений для веб-сайтов о моде, анализ текста и изображений для страховых компаний или распознавание телеметрических данных со скриншотов игр. Обычно компаниям было необходимо приобретать специальные знания о моделях машинного обучения, обучать эти модели и, наконец, пропускать изображения через индивидуальный процесс, чтобы получить выходные данные.

Используя службы Azure, такие как API компьютерного зрения и Функции Azure, компании могут избавиться от необходимости управлять отдельными серверами, одновременно сокращая затраты и используя интерфейс, который корпорация Майкрософт уже разработала для обработки изображений с помощью служб Cognitive Services. Этот пример сценария предусматривает использование обработки изображений. При наличии различных потребностей в искусственном интеллекте, можно использовать полный набор [Cognitive Services][cognitive-docs].

## <a name="related-use-cases"></a>Связанные варианты использования

Рассмотрите этот сценарий для следующих вариантов использования:

* Классификация изображений на веб-сайте о моде.
* Классификация телеметрических данных со скриншотов игр.

## <a name="architecture"></a>Архитектура

![Архитектура интеллектуального приложения компьютерного зрения][architecture-computer-vision]

Этот сценарий охватывает серверные компоненты веб-приложения или мобильного приложения. Данные передаются в сценарии следующим образом:

1. Функции Azure выступают в роли уровня API. Эти API позволяют приложению передавать изображения и получать данные из Cosmos DB.

2. После загрузки изображения через вызов API, оно сохраняется в хранилище больших двоичных объектов.

3. Добавление новых файлов в хранилище больших двоичных объектов активирует отправку уведомления EventGrid в функции Azure.

4. Функции Azure отправляют API компьютерного зрения ссылку на новый загруженный файл для анализа.

5. После того как данные из API компьютерного зрения были возвращены, Функции Azure создают запись в базе данных Cosmos DB, чтобы сохранить результаты анализа вместе с метаданными изображения.

### <a name="components"></a>Компоненты

* [API компьютерного зрения][computer-vision-docs] является частью пакета Cognitive Services и используется для получения сведений о каждом изображении.

* [Функции Azure][functions-docs] предоставляют серверный API для веб-приложения, а также обработку событий для переданных изображений.

* [Сетка событий][eventgrid-docs] активирует событие при отправке нового изображения в хранилище больших двоичных объектов. Затем изображение обрабатывается с помощью функций Azure.

* [Хранилище больших двоичных объектов][storage-docs] хранит все файлы изображений, которые отправляются в веб-приложение, а также все статические файлы, которые использует веб-приложение.

* [Cosmos DB][cosmos-docs] хранит метаданные о каждом переданном изображении, включая результаты обработки API компьютерного зрения.

## <a name="alternatives"></a>Альтернативные варианты

* [Пользовательская служба визуального распознавания][custom-vision-docs]. API компьютерного зрения возвращает набор [таксономических категорий][cv-categories]. Если вам необходимо обработать информацию, которую API компьютерного зрения не возвращает, рекомендуется использовать службу пользовательского визуального распознавания, которая позволяет создавать индивидуальные классификаторы изображений.

* [Поиск Azure][azure-search-docs]. Если ваш вариант использования включает запросы метаданных для поиска изображений, соответствующих заданным критериям, рекомендуется использовать поиск Azure. [Когнитивный поиск][cognitive-search] в предварительной версии сейчас эффективно интегрирует этот рабочий процесс.

## <a name="considerations"></a>Рекомендации

### <a name="scalability"></a>Масштабируемость

Большинство компонентов в этом примере сценария являются управляемыми службами, которые будут автоматически масштабироваться. Несколько важных исключений: функции Azure имеют ограничение до 200 экземпляров максимум. Если вам нужно выполнить дополнительное масштабирование, используйте несколько регионов или планов приложений.

Cosmos DB не проводит автоматическое масштабирование в единицах запросов RUs.  Дополнительные сведения в руководстве по оценке требований см. в разделе [Единицы запроса в базе данных Azure Cosmos DB][request-units] нашей документации. Чтобы использовать все преимущества масштабирования в Cosmos DB, см. описание [ключей секций][partition-key].

Базы данных NoSQL часто поддерживают согласованность (как в теореме CAP) для обеспечения доступности, масштабируемости и секционирования.  В этом примере сценария используется модель данных с ключевыми значениями, а согласованность транзакций требуется редко, так как большинство операций по определению являются атомарными. Дополнительные рекомендации по [выбору правильного хранилища данных](../../guide/technology-choices/data-store-overview.md) см. в Центре архитектуры Azure.

Общие рекомендации по разработке масштабируемых решений см. в разделе [Контрольный список для обеспечения масштабируемости][scalability] в центре архитектуры Azure.

### <a name="security"></a>Безопасность

[Управляемое удостоверение службы][msi] (MSI) используется для предоставления доступа к другим ресурсам, внутренним вашей учетной записи, а затем присваивается функциям Azure. В этих удостоверениях разрешайте доступ только к необходимым ресурсам, чтобы гарантировать, что ничто другое не подвергается воздействию ваших функций (и, возможно, ваших клиентов).  

Общие рекомендации по разработке безопасных решений см. в разделе [Azure Security Documentation][security].

### <a name="resiliency"></a>Устойчивость

Все компоненты этого сценария управляются, поэтому на региональном уровне все они автоматически являются устойчивыми.

Общее руководство по проектированию устойчивых решений см. в разделе [Проектирование устойчивых приложений для Azure][resiliency].

## <a name="pricing"></a>Цены

Чтобы изучить стоимость выполнения этого сценария, все услуги были предварительно сконфигурированы в калькуляторе стоимости. Чтобы узнать, как изменится цена для вашего конкретного варианта использования, измените соответствующие переменные в соответствии с ожидаемым трафиком.

Доступны три примера профиля затрат на основе объема трафика (размер каждого изображения примерно 100 КБ).

* [Небольшой][pricing]: этот пример тарификации предполагает обработку &lt; 5000 изображений в месяц.
* [Средний][medium-pricing]: этот пример тарификации предполагает обработку 500 000 изображений в месяц.
* [Большой][large-pricing]: этот пример тарификации предполагает обработку 50 миллионов изображений в месяц.

## <a name="related-resources"></a>Связанные ресурсы

Пошаговую схему обучения этого сценария см. в статье [Build a serverless web app in Azure][serverless] (Создание бессерверных приложений в Azure).  

Прежде чем поместить этот пример сценария в рабочую среду, ознакомьтесь с [рекомендациями][functions-best-practices] по использованию Функций Azure.

<!-- links -->
[pricing]: https://azure.com/e/f9b59d238b43423683db73f4a31dc380
[medium-pricing]: https://azure.com/e/7c7fc474db344b87aae93bc29ae27108
[large-pricing]: https://azure.com/e/cbadbca30f8640d6a061f8457a74ba7d
[functions-docs]: /azure/azure-functions/
[computer-vision-docs]: /azure/cognitive-services/computer-vision/home
[storage-docs]: /azure/storage/
[azure-search-docs]: /azure/search/
[cognitive-search]: /azure/search/cognitive-search-concept-intro
[architecture-computer-vision]: ./media/architecture-computer-vision.png
[serverless]: /azure/functions/tutorial-static-website-serverless-api-with-database
[cosmos-docs]: /azure/cosmos-db/
[eventgrid-docs]: /azure/event-grid/
[cognitive-docs]: /azure/#pivot=products&panel=ai
[custom-vision-docs]: /azure/cognitive-services/Custom-Vision-Service/home
[cv-categories]: /azure/cognitive-services/computer-vision/home#the-86-category-concept
[resiliency]: /azure/architecture/resiliency/
[security]: /azure/security/
[scalability]: /azure/architecture/checklist/scalability
[functions-best-practices]: /azure/azure-functions/functions-best-practices
[msi]: /azure/app-service/app-service-managed-service-identity
[request-units]: /azure/cosmos-db/request-units
[partition-key]: /azure/cosmos-db/partition-data