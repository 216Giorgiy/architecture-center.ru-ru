---
title: Выявление мошенничества в режиме реального времени в Azure
description: Проверенный сценарий для обнаружения мошеннических действий в режиме реального времени с использованием Центров событий Azure и Stream Analytics.
author: alexbuckgit
ms.date: 07/05/2018
ms.openlocfilehash: e22322133adf40d033ac5af98069cb00765d14ca
ms.sourcegitcommit: 71cbef121c40ef36e2d6e3a088cb85c4260599b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/14/2018
ms.locfileid: "39060818"
---
# <a name="real-time-fraud-detection-on-azure"></a><span data-ttu-id="4deb4-103">Выявление мошенничества в режиме реального времени в Azure</span><span class="sxs-lookup"><span data-stu-id="4deb4-103">Real-time fraud detection on Azure</span></span>

<span data-ttu-id="4deb4-104">Этот пример сценария относится к организациям, которые должны анализировать данные в режиме реального времени для обнаружения мошеннических транзакций или других аномальных действий.</span><span class="sxs-lookup"><span data-stu-id="4deb4-104">This example scenario is relevant to organizations that need to analyze data in real-time to detect fraudulent transactions or other anomalous activity.</span></span>

<span data-ttu-id="4deb4-105">Потенциальные приложения включают определение мошеннической деятельности с кредитной картой или телефонными вызовами.</span><span class="sxs-lookup"><span data-stu-id="4deb4-105">Potential applications include identifying fraudulent credit card activity or mobile phone calls.</span></span> <span data-ttu-id="4deb4-106">Привычным аналитическим подключенным к сети системам может потребоваться много времени, чтобы преобразовать и проанализировать данные для выявления аномальных действий.</span><span class="sxs-lookup"><span data-stu-id="4deb4-106">Traditional online analytical systems might take hours to transform and analyze the data to identify anomalous activity.</span></span>

<span data-ttu-id="4deb4-107">Используя полностью управляемые сервисы Azure, такие как концентраторы событий и Stream Analytics, компании могут избавиться от необходимости управлять отдельными серверами, одновременно сокращая затраты и используя опыт корпорации Майкрософт для приема облачных данных и анализа в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="4deb4-107">By using fully managed Azure services such as Event Hubs and Stream Analytics, companies can eliminate the need to manage individual servers, while reducing costs and leveraging Microsoft's expertise in cloud-scale data ingestion and real-time analytics.</span></span> <span data-ttu-id="4deb4-108">Этот сценарий предназначен специально для обнаружения мошеннической деятельности.</span><span class="sxs-lookup"><span data-stu-id="4deb4-108">This scenario specifically addresses the detection of fraudulent activity.</span></span> <span data-ttu-id="4deb4-109">Если у вас есть другие потребности в аналитике данных, изучите список доступных [служб аналитики Azure][product-category].</span><span class="sxs-lookup"><span data-stu-id="4deb4-109">If you have other needs for data analytics, you should review the list of available [Azure Analytics services][product-category].</span></span>

<span data-ttu-id="4deb4-110">Этот пример представляет часть более широкой архитектуры обработки данных и стратегии.</span><span class="sxs-lookup"><span data-stu-id="4deb4-110">This sample represents one part of a broader data processing architecture and strategy.</span></span> <span data-ttu-id="4deb4-111">Другие возможности этого аспекта общей архитектуры рассматриваются в этой статье далее.</span><span class="sxs-lookup"><span data-stu-id="4deb4-111">Other options for this aspect of an overall architecture are discussed later in this article.</span></span>

## <a name="related-use-cases"></a><span data-ttu-id="4deb4-112">Связанные варианты использования</span><span class="sxs-lookup"><span data-stu-id="4deb4-112">Related use cases</span></span>

<span data-ttu-id="4deb4-113">Рассмотрите этот сценарий для следующих вариантов использования:</span><span class="sxs-lookup"><span data-stu-id="4deb4-113">Consider this scenario for the following use cases:</span></span>

* <span data-ttu-id="4deb4-114">Обнаружение мошеннических телефонных вызовов в сценариях телекоммуникаций.</span><span class="sxs-lookup"><span data-stu-id="4deb4-114">Detecting fraudulent mobile-phone calls in telecommunications scenarios.</span></span>
* <span data-ttu-id="4deb4-115">Выявление мошеннических операций с кредитными картами для банковских учреждений.</span><span class="sxs-lookup"><span data-stu-id="4deb4-115">Identifying fraudulent credit card transactions for banking institutions.</span></span>
* <span data-ttu-id="4deb4-116">Идентификация мошеннических покупок в сценариях розничной торговли или электронной коммерции.</span><span class="sxs-lookup"><span data-stu-id="4deb4-116">Identifying fraudulent purchases in retail or e-commerce scenarios.</span></span>

## <a name="architecture"></a><span data-ttu-id="4deb4-117">Архитектура</span><span class="sxs-lookup"><span data-stu-id="4deb4-117">Architecture</span></span>

![Обзор архитектуры компонентов Azure для сценария выявления мошенничества в реальном времени.][architecture-diagram]

<span data-ttu-id="4deb4-119">Этот сценарий охватывает серверные компоненты конвейера аналитики в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="4deb4-119">This scenario covers the back-end components of a real-time analytics pipeline.</span></span> <span data-ttu-id="4deb4-120">Данные передаются в сценарии следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4deb4-120">Data flows through the scenario as follows:</span></span>

1. <span data-ttu-id="4deb4-121">Метаданные звонка мобильного телефона отправляются из исходной системы в экземпляр концентратора событий Azure.</span><span class="sxs-lookup"><span data-stu-id="4deb4-121">Mobile phone call metadata is sent from the source system to an Azure Event Hubs instance.</span></span> 
2. <span data-ttu-id="4deb4-122">Запускается задание Stream Analytics, которое получает данные из концентратора событий.</span><span class="sxs-lookup"><span data-stu-id="4deb4-122">A Stream Analytics job is started, which receives data via the event hub source.</span></span>
3. <span data-ttu-id="4deb4-123">Задание Stream Analytics выполняет предопределенный запрос для преобразования входного потока и его анализа на основе алгоритма мошеннической транзакции.</span><span class="sxs-lookup"><span data-stu-id="4deb4-123">The Stream Analytics job runs a predefined query to transform the input stream and analyze it based on a fraudulent-transaction algorithm.</span></span> <span data-ttu-id="4deb4-124">Этот запрос использует "переворачивающееся" окно, чтобы сегментировать поток на различные временные единицы.</span><span class="sxs-lookup"><span data-stu-id="4deb4-124">This query uses a tumbling window to segment the stream into distinct temporal units.</span></span>
4. <span data-ttu-id="4deb4-125">Stream Analytics записывает преобразованный поток, представляющий обнаруженные мошеннические вызовы, на выходной приемник хранилища больших двоичных объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="4deb4-125">The Stream Analytics job writes the transformed stream representing detected fraudulent calls to an output sink in Azure Blob storage.</span></span>

### <a name="components"></a><span data-ttu-id="4deb4-126">Компоненты</span><span class="sxs-lookup"><span data-stu-id="4deb4-126">Components</span></span>

* <span data-ttu-id="4deb4-127">[Концентраторы событий Azure][docs-event-hubs] — это платформа потоковой передачи больших данных и служба приема событий в режиме реального времени, принимающая и обрабатывающая миллионы событий в секунду.</span><span class="sxs-lookup"><span data-stu-id="4deb4-127">[Azure Event Hubs][docs-event-hubs] is a real-time streaming platform and event ingestion service, capable of receiving and processing millions of events per second.</span></span> <span data-ttu-id="4deb4-128">Концентраторы событий могут обрабатывать и сохранять события, данные и телеметрию, созданные распределенным программным обеспечением и устройствами.</span><span class="sxs-lookup"><span data-stu-id="4deb4-128">Event Hubs can process and store events, data, or telemetry produced by distributed software and devices.</span></span> <span data-ttu-id="4deb4-129">В этом сценарии концентраторы событий получают все метаданные телефонных звонков, чтобы проанализировать их на мошеннические действия.</span><span class="sxs-lookup"><span data-stu-id="4deb4-129">In this scenario, Event Hubs receives all phone call metadata to be analyzed for fraudulent activity.</span></span>
* <span data-ttu-id="4deb4-130">[Azure Stream Analytics][docs-stream-analytics] — это модуль обработки событий, который проверяет большие потоки данных из устройств и других источников данных.</span><span class="sxs-lookup"><span data-stu-id="4deb4-130">[Azure Stream Analytics][docs-stream-analytics] is an event-processing engine that can analyze high volumes of data streaming from devices and other data sources.</span></span> <span data-ttu-id="4deb4-131">Эта служба также поддерживает извлечение информации из потоков данных для определения шаблонов и связей.</span><span class="sxs-lookup"><span data-stu-id="4deb4-131">It also supports extracting information from data streams to identify patterns and relationships.</span></span> <span data-ttu-id="4deb4-132">Эти шаблоны могут активировать другие нисходящие действия.</span><span class="sxs-lookup"><span data-stu-id="4deb4-132">These patterns can trigger other downstream actions.</span></span> <span data-ttu-id="4deb4-133">В этом сценарии Stream Analytics преобразует входной поток из концентраторов событий, чтобы идентифицировать мошеннические вызовы.</span><span class="sxs-lookup"><span data-stu-id="4deb4-133">In this scenario, Stream Analytics transforms the input stream from Event Hubs to identify fraudulent calls.</span></span>
* <span data-ttu-id="4deb4-134">[Хранилище BLOB-объектов][docs-blob-storage] используется в этом сценарии для хранения результатов задания Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="4deb4-134">[Blob storage][docs-blob-storage] is used in this scenario to store the results of the Stream Analytics job.</span></span>

## <a name="considerations"></a><span data-ttu-id="4deb4-135">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="4deb4-135">Considerations</span></span>

### <a name="alternatives"></a><span data-ttu-id="4deb4-136">Альтернативные варианты</span><span class="sxs-lookup"><span data-stu-id="4deb4-136">Alternatives</span></span>

<span data-ttu-id="4deb4-137">Многие технологии доступны в режиме реального времени для приема сообщений, хранения данных, обработки потоков данных, хранения аналитических данных, а также аналитики и отчетности.</span><span class="sxs-lookup"><span data-stu-id="4deb4-137">Many technology choices are available for real-time message ingestion, data storage, stream processing, storage of analytical data, and analytics and reporting.</span></span> <span data-ttu-id="4deb4-138">Обзор этих параметров, их возможностей и ключевых критериев выбора см. в разделе [Выбор технологии приема сообщений в реальном времени в Azure](/azure/architecture/data-guide/technology-choices/real-time-ingestion) в руководстве по архитектуре данных Azure.</span><span class="sxs-lookup"><span data-stu-id="4deb4-138">For an overview of these options, their capabilities, and key selection criteria, see [Big data architectures: Real-time processing](/azure/architecture/data-guide/technology-choices/real-time-ingestion) in the Azure Data Architecture Guide.</span></span>

<span data-ttu-id="4deb4-139">Кроме того, различные службы машинного обучения в Azure могут создавать более сложные алгоритмы для выявления мошенничества.</span><span class="sxs-lookup"><span data-stu-id="4deb4-139">Additionally, more complex algorithms for fraud detection can be produced by various machine learning services in Azure.</span></span> <span data-ttu-id="4deb4-140">Обзор этих возможностей см. в разделе [Выбор технологий для машинного обучения](/azure/architecture/data-guide/technology-choices/data-science-and-machine-learning) в [Руководстве по архитектуре данных Azure](../../data-guide/index.md).</span><span class="sxs-lookup"><span data-stu-id="4deb4-140">For an overview of these options, see [Technology choices for machine learning](/azure/architecture/data-guide/technology-choices/data-science-and-machine-learning) in the [Azure Data Architecture Guide](../../data-guide/index.md).</span></span>

### <a name="availability"></a><span data-ttu-id="4deb4-141">Доступность</span><span class="sxs-lookup"><span data-stu-id="4deb4-141">Availability</span></span>

<span data-ttu-id="4deb4-142">Azure Monitor предоставляет унифицированный пользовательский интерфейс для мониторинга различных служб Azure.</span><span class="sxs-lookup"><span data-stu-id="4deb4-142">Azure Monitor provides unified user interfaces for monitoring across various Azure services.</span></span> <span data-ttu-id="4deb4-143">Для получения дополнительных сведений см. раздел [Мониторинг приложений и ресурсов в Azure](/azure/monitoring-and-diagnostics/monitoring-overview).</span><span class="sxs-lookup"><span data-stu-id="4deb4-143">For more information, see [Monitoring in Microsoft Azure](/azure/monitoring-and-diagnostics/monitoring-overview).</span></span> <span data-ttu-id="4deb4-144">Концентраторы событий и Stream Analytics интегрированы с Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="4deb4-144">Event Hubs and Stream Analytics are both integrated with Azure Monitor.</span></span> 

<span data-ttu-id="4deb4-145">Для других вопросов доступности см. раздел [Контрольный список для обеспечения доступности][availability] в центре архитектуры Azure.</span><span class="sxs-lookup"><span data-stu-id="4deb4-145">For other availability considerations, see the [availability checklist][availability] in the Azure Architecture Center.</span></span>

### <a name="scalability"></a><span data-ttu-id="4deb4-146">Масштабируемость</span><span class="sxs-lookup"><span data-stu-id="4deb4-146">Scalability</span></span>

<span data-ttu-id="4deb4-147">Компоненты этого сценария предназначены для гипермасштабного приема и массивно-параллельной аналитики в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="4deb4-147">The components of this scenario are designed for hyper-scale ingestion and massively parallel real-time analytics.</span></span> <span data-ttu-id="4deb4-148">Концентраторы событий Azure высоко масштабируемые и способны получать и обрабатывать миллионы событий в секунду с низкой задержкой.</span><span class="sxs-lookup"><span data-stu-id="4deb4-148">Azure Event Hubs is highly scalable, capable of receiving and processing millions of events per second with low latency.</span></span>  <span data-ttu-id="4deb4-149">Концентраторы событий [автоматически масштабируют](/azure/event-hubs/event-hubs-auto-inflate) единицы пропускной способности в соответствии с потребностями.</span><span class="sxs-lookup"><span data-stu-id="4deb4-149">Event Hubs can [automatically scale up](/azure/event-hubs/event-hubs-auto-inflate) the number of throughput units to meet usage needs.</span></span> <span data-ttu-id="4deb4-150">Azure Stream Analytics способен анализировать большой объем потока данных из множества источников.</span><span class="sxs-lookup"><span data-stu-id="4deb4-150">Azure Stream Analytics is capable of analyzing high volumes of streaming data from many sources.</span></span> <span data-ttu-id="4deb4-151">Увеличив количество [единиц потоковой передачи](/azure/stream-analytics/stream-analytics-streaming-unit-consumption), выделенных для выполнения задания потоковой передачи, можно увеличить масштаб Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="4deb4-151">You can scale up Stream Analytics by increasing the number of [streaming units](/azure/stream-analytics/stream-analytics-streaming-unit-consumption) allocated to execute your streaming job.</span></span>

<span data-ttu-id="4deb4-152">Общие рекомендации по разработке масштабируемого сценария см. в [контрольном списке для обеспечения масштабируемости][scalability] в Центре архитектуры Azure.</span><span class="sxs-lookup"><span data-stu-id="4deb4-152">For general guidance on designing scalable scenario, see the [scalability checklist][scalability] in the Azure Architecture Center.</span></span>

### <a name="security"></a><span data-ttu-id="4deb4-153">Безопасность</span><span class="sxs-lookup"><span data-stu-id="4deb4-153">Security</span></span>

<span data-ttu-id="4deb4-154">Концентраторы событий Azure защищают данные с помощью [аутентификации и модели безопасности][docs-event-hubs-security-model], в основе которой лежит сочетание маркеров безопасности SAS и издателей событий.</span><span class="sxs-lookup"><span data-stu-id="4deb4-154">Azure Event Hubs secures data through an [authentication and security model][docs-event-hubs-security-model] based on a combination of Shared Access Signature (SAS) tokens and event publishers.</span></span> <span data-ttu-id="4deb4-155">Издатель событий определяет виртуальную конечную точку для концентратора событий.</span><span class="sxs-lookup"><span data-stu-id="4deb4-155">An event publisher defines a virtual endpoint for an event hub.</span></span> <span data-ttu-id="4deb4-156">Издатель можно использовать только для отправки сообщений в концентратор событий.</span><span class="sxs-lookup"><span data-stu-id="4deb4-156">The publisher can only be used to send messages to an event hub.</span></span> <span data-ttu-id="4deb4-157">Получать сообщения от издателя невозможно.</span><span class="sxs-lookup"><span data-stu-id="4deb4-157">It is not possible to receive messages from a publisher.</span></span>

<span data-ttu-id="4deb4-158">Общие рекомендации по разработке безопасных решений см. в разделе [Azure Security Documentation][security].</span><span class="sxs-lookup"><span data-stu-id="4deb4-158">For general guidance on designing secure solutions, see the [Azure Security Documentation][security].</span></span>

### <a name="resiliency"></a><span data-ttu-id="4deb4-159">Устойчивость</span><span class="sxs-lookup"><span data-stu-id="4deb4-159">Resiliency</span></span>

<span data-ttu-id="4deb4-160">Общее руководство по проектированию устойчивых решений см. в разделе [Проектирование устойчивых приложений для Azure][resiliency].</span><span class="sxs-lookup"><span data-stu-id="4deb4-160">For general guidance on designing resilient solutions, see [Designing resilient applications for Azure][resiliency].</span></span>

## <a name="deploy-the-scenario"></a><span data-ttu-id="4deb4-161">Развертывание сценария</span><span class="sxs-lookup"><span data-stu-id="4deb4-161">Deploy the scenario</span></span>

<span data-ttu-id="4deb4-162">Для развертывания этого сценария вы можете следовать [пошаговому руководству][tutorial], демонстрирующему, как развернуть каждый компонент сценария вручную.</span><span class="sxs-lookup"><span data-stu-id="4deb4-162">To deploy this scenario, you can follow this [step-by-step tutorial][tutorial] demonstrating how to manually deploy each component of the scenario.</span></span> <span data-ttu-id="4deb4-163">В этом руководстве также содержится клиентское приложение .NET для генерации тестовых метаданных телефонных вызовов и их отправки в экземпляр концентратора событий.</span><span class="sxs-lookup"><span data-stu-id="4deb4-163">This tutorial also provides a .NET client application to generate sample phone call metadata and send that data to an event hub instance.</span></span>

## <a name="pricing"></a><span data-ttu-id="4deb4-164">Цены</span><span class="sxs-lookup"><span data-stu-id="4deb4-164">Pricing</span></span>

<span data-ttu-id="4deb4-165">Чтобы изучить стоимость выполнения этого сценария, все услуги были предварительно сконфигурированы в калькуляторе стоимости.</span><span class="sxs-lookup"><span data-stu-id="4deb4-165">To explore the cost of running this scenario, all of the services are pre-configured in the cost calculator.</span></span> <span data-ttu-id="4deb4-166">Чтобы узнать, как изменится цена для конкретного варианта использования, измените соответствующие переменные в соответствии с ожидаемым объемом данных.</span><span class="sxs-lookup"><span data-stu-id="4deb4-166">To see how the pricing would change for your particular use case, change the appropriate variables to match your expected data volume.</span></span>

<span data-ttu-id="4deb4-167">Здесь предоставлено три примера профиля затрат в зависимости от объема трафика, который планируется принимать.</span><span class="sxs-lookup"><span data-stu-id="4deb4-167">We have provided three sample cost profiles based on amount of traffic you expect to get:</span></span>

* <span data-ttu-id="4deb4-168">[Небольшой][small-pricing]. Обработка 1 млн событий через 1 стандартную единицу потоковой передачи в месяц.</span><span class="sxs-lookup"><span data-stu-id="4deb4-168">[Small][small-pricing]: process one million events through one standard streaming unit per month.</span></span>
* <span data-ttu-id="4deb4-169">[Средний][medium-pricing]. Обработка 100 млн событий через пять стандартных единиц потоковой передачи в месяц.</span><span class="sxs-lookup"><span data-stu-id="4deb4-169">[Medium][medium-pricing]: process 100M events through five standard streaming units per month.</span></span>
* <span data-ttu-id="4deb4-170">[Большой][large-pricing]. Обработка 999 млн событий через 20 стандартных единиц потоковой передачи в месяц.</span><span class="sxs-lookup"><span data-stu-id="4deb4-170">[Large][large-pricing]: process 999 million events through 20 standard streaming units per month.</span></span>

## <a name="related-resources"></a><span data-ttu-id="4deb4-171">Связанные ресурсы</span><span class="sxs-lookup"><span data-stu-id="4deb4-171">Related resources</span></span>

<span data-ttu-id="4deb4-172">Более сложные сценарии обнаружения мошенничества могут извлечь пользу от модели машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="4deb4-172">More complex fraud detection scenarios can benefit from a machine learning model.</span></span> <span data-ttu-id="4deb4-173">Сведения о сценариях, созданных с помощью Machine Learning Server, см. в статье [Fraud Detection][r-server-fraud-detection] (Выявление мошенничества).</span><span class="sxs-lookup"><span data-stu-id="4deb4-173">For scenarios built using Machine Learning Server, see [Fraud detection using Machine Learning Server][r-server-fraud-detection].</span></span> <span data-ttu-id="4deb4-174">О других шаблонах решений, использующих Machine Learning Server, см. в разделе [Solution templates for Machine Learning Server and Microsoft R Server 9.1/9.2][docs-r-server-sample-solutions] (Шаблоны решений для Machine Learning Server и Microsoft R Server 9.1/9.2).</span><span class="sxs-lookup"><span data-stu-id="4deb4-174">For other solution templates using Machine Learning Server, see [Data science scenarios and solution templates][docs-r-server-sample-solutions].</span></span> <span data-ttu-id="4deb4-175">Пример решения с помощью Azure Data Lake Analytics см. в разделе [Using Azure Data Lake and R for Fraud Detection][technet-fraud-detection] (Использование Azure Data Lake и R для определения мошенничества).</span><span class="sxs-lookup"><span data-stu-id="4deb4-175">For an example solution using Azure Data Lake Analytics, see [Using Azure Data Lake and R for Fraud Detection][technet-fraud-detection].</span></span>  

<!-- links -->
[product-category]: https://azure.microsoft.com/product-categories/analytics/
[tutorial]: /azure/stream-analytics/stream-analytics-real-time-fraud-detection
[small-pricing]: https://azure.com/e/74149ec312c049ccba79bfb3cfa67606
[medium-pricing]: https://azure.com/e/4fc94f7376de484d8ae67a6958cae60a
[large-pricing]: https://azure.com/e/7da8804396f9428a984578700003ba42
[architecture-diagram]: ./images/architecture-diagram-fraud-detection.png
[docs-event-hubs]: /azure/event-hubs/event-hubs-what-is-event-hubs
[docs-event-hubs-security-model]: /azure/event-hubs/event-hubs-authentication-and-security-model-overview
[docs-stream-analytics]: /azure/stream-analytics/stream-analytics-introduction
[docs-blob-storage]: /azure/storage/blobs/storage-blobs-introduction
[docs-r-server-sample-solutions]: /machine-learning-server/r/sample-solutions
[r-server-fraud-detection]: https://microsoft.github.io/r-server-fraud-detection/
[technet-fraud-detection]: https://blogs.technet.microsoft.com/machinelearning/2017/06/28/using-azure-data-lake-and-r-for-fraud-detection/
[availability]: /azure/architecture/checklist/availability
[scalability]: /azure/architecture/checklist/scalability
[resiliency]: ../../resiliency/index.md
[security]: /azure/security/

