---
title: Интеллектуальная поисковая система для товаров, предназначенная для решений электронной коммерции
description: Предоставление первоклассных возможностей поиска в приложении электронной коммерции.
author: jelledruyts
ms.date: 09/14/2018
ms.custom: fasttrack
ms.openlocfilehash: 5eabdb94b9345e73b21526681e0dbd6ae859d7be
ms.sourcegitcommit: a0e8d11543751d681953717f6e78173e597ae207
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/06/2018
ms.locfileid: "53004889"
---
# <a name="intelligent-product-search-engine-for-e-commerce"></a>Интеллектуальная поисковая система для товаров, предназначенная для решений электронной коммерции

В этом примере сценария показано, как использование специализированной службы поиска может значительно повысить релевантность результатов поиска для клиентов электронной коммерции.

Поиск является основным механизмом, благодаря которому клиенты находят и в конечном итоге приобретают продукты. Поэтому важно, чтобы результаты поиска были релевантные _намерению_ поискового запроса и чтобы сквозной поиск соответствовал поисковым гигантам, предоставляя почти мгновенные результаты, лингвистический анализ, сопоставление геолокации, фильтрацию, фасетизацию, автозаполнение, подсветку и т. д.

Представьте себе типичное веб-приложение электронной коммерции с данными о продуктах, хранящимися в реляционной базе данных, например SQL Server или Базе данных SQL Azure. Поисковые запросы часто обрабатываются внутри базы данных с помощью `LIKE` запросов или функций [полнотекстового поиска][docs-sql-fts]. С помощью [Поиска Azure][docs-search] вы освобождаете свою оперативную базу данных от обработки запросов и можете легко начать использовать те трудно реализуемые функции, которые предоставляют вашим клиентам лучшие возможности поиска. Кроме того, поскольку Поиск Azure является компонентом платформы как услуги (PaaS), вам не нужно беспокоиться об управлении инфраструктурой или становиться экспертом по поиску.

## <a name="relevant-use-cases"></a>Варианты соответствующего использования

Другие варианты использования:

* Поиск объектов недвижимости или хранилищ вблизи физического расположения пользователя.
* Поиск статей на сайте новостей или поиск спортивных результатов с более высоким предпочтением _недавней_ информации.
* Поиск в больших репозиториях для организаций, _ориентированных на работу с документами_, например для разработчиков политик и нотариусов.

В конечном счете _любое_ приложение с любыми функциями поиска может использовать преимущества специальной службы поиска.

## <a name="architecture"></a>Архитектура

![Обзор архитектуры компонентов Azure в интеллектуальной поисковой системе для товаров, предназначенной для решений электронной коммерции][architecture]

Этот сценарий рассматривает решение электронной коммерции, в котором клиенты могут выполнять поиск в каталоге продуктов.
1. Клиенты переходят к **веб-приложению электронной коммерции** с любого устройства.
2. Каталог продуктов хранится в **Базе данных SQL Azure** для обработки транзакций.
3. Поиск Azure использует **индексатор поиска**, чтобы автоматически обновлять индекс поиска с помощью интегрированного отслеживания изменений.
4. Поисковые запросы клиентов переносятся в службу **Поиск Azure**, которая обрабатывает запрос и возвращает наиболее релевантные результаты.
5. В качестве альтернативы веб-поисковому опыту клиенты также могут использовать **виртуальный собеседник** в социальных сетях или прямо с цифровых помощников для поиска продуктов и постепенного уточнения своего поискового запроса и результатов.
6. При необходимости функция **Когнитивный поиск** может использоваться для применения искусственного интеллекта для более умной обработки.

### <a name="components"></a>Компоненты

* [Службы приложений — веб-приложения][docs-webapps]. Размещает веб-приложения, позволяющие выполнять автоматическое масштабирование и обеспечивать высокую доступность без необходимости управлять инфраструктурой.
* [База данных SQL][docs-sql-database]. Это реляционная база данных общего назначения (управляемая служба) в Microsoft Azure, которая поддерживает такие структуры, как реляционные данные, JSON, пространственные данные и XML.
* [Поиск Azure][docs-search]. Это облачное решение "поиск как услуга" предоставляет расширенные возможности при работе с конфиденциальным и разнородным содержимым веб-, мобильных и корпоративных приложений.
* [Служба программ-роботов][docs-botservice] предоставляет средства для создания, тестирования, развертывания и управления интеллектуальными ботами.
* [Cognitive Services][docs-cognitive] позволяют использовать интеллектуальные алгоритмы, чтобы видеть, слышать, говорить, понимать и интерпретировать потребности клиентов с помощью обычных средств связи.

### <a name="alternatives"></a>Альтернативные варианты

* Можно использовать возможности **поиска в базе данных**, например через полнотекстовый поиск по SQL Server, но затем ваше хранилище транзакций будет также обрабатывать запросы (увеличивая потребность в мощности обработки), а возможности поиска внутри базы данных будут более ограниченными.
* Можно разместить [Apache Lucene][apache-lucene] с открытым исходным кодом (на котором основан поиск Azure) в Azure Virtual Machines, но затем вы вернетесь к управлению инфраструктурой как услугой (IaaS) и не воспользуетесь многими функциями, которые поиск Azure обеспечивает на основе Lucene.
* Можно также использовать развертывание [Гибкого поиска][elastic-marketplace] с Azure Marketplace, который является альтернативным и успешным поисковым продуктом от стороннего поставщика, но в этом случае вы работаете с рабочей нагрузкой IaaS.

Другие варианты для уровня данных:

* [Cosmos DB](/azure/cosmos-db/introduction). Это глобально распределенная многомодельная база данных Майкрософт. База данных Cosmos DB обеспечивает платформу для запуска других моделей данных, таких как Mongo DB, Cassandra, хранилища данных графов или простой таблицы хранилища. Поиск Azure также поддерживает прямое индексирование данных из базы данных Cosmos DB.

## <a name="considerations"></a>Рекомендации

### <a name="scalability"></a>Масштабируемость

[Ценовая категория][search-tier] службы поиска Azure не определяет доступные функции, а используется в основном для [планирования емкости][search-capacity], поскольку она определяет максимальный объем хранилища и количество секций и реплик, которые вы можете подготовить. **Секции** позволяют индексировать больше документов и получать более высокую пропускную способность записи, тогда как **реплики** предоставляют больше запросов в секунду (QPS) и высокую доступность.

Можно динамически изменять число секций и реплик, но изменить ценовую категорию невозможно, поэтому вам следует внимательно рассмотреть подходящую категорию для целевой рабочей нагрузки. Если вам нужно изменить категорию в любом случае, вам потребуется подготовить новую службу параллельно и перезагрузить свои индексы, после чего вы сможете указать свои приложения в новой службе.

### <a name="availability"></a>Доступность

Поиск Azure обеспечивает [Соглашение об уровне обслуживания, гарантирующее доступность 99,9 %][search-sla] для _операций чтения_ (то есть запросов), если у вас есть как минимум две реплики, а для _обновлений_ (то есть обновлений индексов поиска), если у вас есть как минимум три реплики. Таким образом, необходимо подготовить как минимум две реплики, если вы хотите, чтобы ваши клиенты могли _выполнять поиск_ надежно, и три, если фактические _изменения в индексе_ также должны рассматриваться как операции с высокой степенью готовности.

Если необходимо внести изменения в индекс без простоя (например, изменение типов данных, удаление или переименование полей), индекс требуется перестроить. Подобно изменению уровня обслуживания, это означает создание нового индекса, его повторное заполнение данными, а затем обновление ваших приложений, чтобы они указывали на новый индекс.

### <a name="security"></a>Безопасность

Поиск Azure совместим со многими [стандартами безопасности и конфиденциальности данных][search-security], что позволяет использовать их в большинстве отраслей.

Для обеспечения доступа к службе Поиск Azure использует два типа ключей: **ключи администратора**, которые позволяют выполнять _любую_ задачу вопреки службе, и **ключи запросов**, которые могут использоваться для операций только для чтения, таких как запрос. Как правило, приложение, выполняющее поиск, не обновляет индекс, поэтому его следует настраивать только с помощью ключа запроса, а не ключа администратора (особенно если поиск выполняется с устройства конечного пользователя, такого как сценарий, запущенный в веб-браузере).

### <a name="search-relevance"></a>Релевантность поиска

Успешность вашего приложения электронной коммерции зависит главным образом от релевантности результатов поиска для ваших клиентов. Тщательная настройка службы поиска для обеспечения оптимальных результатов на основе исследований пользователя или использование встроенных функций, таких как [анализ трафика поиска][search-analysis], чтобы понять шаблоны поиска вашего клиента, позволяют принимать решения на основе данных.

Типичные способы настройки службы поиска включают в себя:

* использование [Профилей оценки][search-scoring], чтобы повлиять на релевантность результатов поиска, например, на основе того, какое поле соответствует запросу, насколько последними являются данные, географического расстояния до пользователя, ...;
* использование [Анализаторов языка, предоставленных корпорацией Майкрософт][search-languages], которые используют расширенный стек обработки естественного языка (NLP) для лучшей интерпретации запросов;
* использование [пользовательских анализаторов][search-analyzers], чтобы убедиться, что ваша продукция найдена правильно, особенно если вы хотите выполнить поиск на неязыковой основе, такой как марка и модель продукта.

## <a name="deploy-this-scenario"></a>Развертывание этого сценария

Чтобы развернуть более полную версию электронной коммерции этого сценария, можно следовать этому [пошаговому руководству][end-to-end-walkthrough], которое предоставляет приложение примера .NET, выполняющее простой запрос на покупку билетов. Он также включает в себя Поиск Azure и использует многие из рассмотренных функций. Кроме того, доступен шаблон Resource Manager для автоматизации развертывания большей части ресурсов Azure.

## <a name="pricing"></a>Цены

Чтобы изучить стоимость выполнения этого сценария, все упомянутые выше услуги были предварительно сконфигурированы в калькуляторе стоимости. Чтобы узнать, как изменится цена для вашего конкретного варианта использования, измените соответствующие переменные в соответствии с ожидаемым использованием.

Здесь предоставлено три примера профиля затрат в зависимости от объема трафика, который планируется принимать.

* [Малый][small-pricing]. В этом профиле используется одно веб-приложение `Standard S1` для размещения веб-сайта, служба Azure Bot уровня "Бесплатный", одна единица службы "Поиск Azure" `Basic` и База данных SQL `Standard S2`.
* [Средний][medium-pricing]. Здесь веб-приложение увеличивается до двух экземпляров уровня `Standard S3`, уровень Службы поиска повышается до `Standard S1` и используется База данных SQL `Standard S6`.
* [Большой][large-pricing]. В самом большом профиле используется четыре экземпляра веб-приложения `Premium P2V2`, служба Azure Bot с обновлением до уровня `Standard S1` (с 1 000 000 сообщениями в каналах уровня "Премиум"), две единицы службы "Поиск Azure" `Standard S3` и База данных SQL `Premium P6`.

## <a name="related-resources"></a>Связанные ресурсы

Дополнительные сведения о службе "Поиск Azure" см. в статье [Что такое поиск Azure?][docs-search], а также ознакомьтесь с [Примерами кода Azure][search-samples] или посмотрите полноценный [Демонстрационный сайт][search-demo] в действии.

<!-- links -->
[architecture]: ./media/architecture-ecommerce-search.png
[docs-sql-fts]: /sql/relational-databases/search/query-with-full-text-search
[docs-search]: /azure/search/search-what-is-azure-search
[docs-sql-database]: /azure/sql-database/sql-database-technical-overview
[docs-webapps]: /azure/app-service/app-service-web-overview
[docs-botservice]: /azure/bot-service/
[docs-cognitive]: /azure/cognitive-services/
[apache-lucene]: https://lucene.apache.org/
[elastic-marketplace]: https://azuremarketplace.microsoft.com/marketplace/apps/elastic.elasticsearch
[end-to-end-walkthrough]: https://github.com/Azure/fta-customerfacingapps/tree/master/ecommerce/articles
[search-sla]: https://go.microsoft.com/fwlink/?LinkId=716855
[search-tier]: /azure/search/search-sku-tier
[search-capacity]: /azure/search/search-capacity-planning
[search-security]: /azure/search/search-security-overview
[search-analysis]: /azure/search/search-traffic-analytics
[search-languages]: /rest/api/searchservice/language-support
[search-analyzers]: /rest/api/searchservice/custom-analyzers-in-azure-search
[search-scoring]: /rest/api/searchservice/add-scoring-profiles-to-a-search-index
[search-samples]: https://azure.microsoft.com/resources/samples/?service=search&sort=0
[search-demo]: https://azjobsdemo.azurewebsites.net/
[small-pricing]: https://azure.com/e/db2672a55b6b4d768ef0060a8d9759bd
[medium-pricing]: https://azure.com/e/a5ad0706c9e74add811e83ef83766a1c
[large-pricing]: https://azure.com/e/57f95a898daa487795bd305599973ee6
