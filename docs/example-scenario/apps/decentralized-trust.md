---
title: Децентрализованное доверие между банками в Azure
description: Реализация доверенной среды для взаимодействия и обмена данными без обращения к централизованной базе данных.
author: vitoc
ms.date: 09/09/2018
ms.openlocfilehash: fe27f885635ce5ae4ce368992affa1a85d7af416
ms.sourcegitcommit: 62945777e519d650159f0f963a2489b6bb6ce094
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2018
ms.locfileid: "48876769"
---
# <a name="decentralized-trust-between-banks-on-azure"></a><span data-ttu-id="34427-103">Децентрализованное доверие между банками в Azure</span><span class="sxs-lookup"><span data-stu-id="34427-103">Decentralized trust between banks on Azure</span></span>

<span data-ttu-id="34427-104">Этот пример сценария полезен для банков или любых других учреждений, которые хотят реализовать доверенную среду для обмена данными без обращения к централизованной базе данных.</span><span class="sxs-lookup"><span data-stu-id="34427-104">This example scenario is useful for banks or any other institutions that want to establish a trusted environment for information sharing without resorting to a centralized database.</span></span> <span data-ttu-id="34427-105">В данном примере описывается сценарий в контексте обслуживания данных о кредитных баллах между банками, но архитектура может применяться к любому сценарию, в котором консорциум организаций хочет поделиться проверенными данными друг с другом без обращения к центральной системе, которой управляет одна сторона.</span><span class="sxs-lookup"><span data-stu-id="34427-105">For the purpose of this example, we will describe the scenario in the context of maintaining credit score information between banks, but the architecture can be applied to any scenario where a consortium of organizations want to share validated information with one another without resorting to the use of a central system ran by one single party.</span></span>

<span data-ttu-id="34427-106">Традиционно банки в рамках финансовой системы полагаются на централизованные источники, такие как кредитные бюро для получения данных о кредитных баллах и истории.</span><span class="sxs-lookup"><span data-stu-id="34427-106">Traditionally, banks within a financial system rely on centralized sources such as credit bureaus for information on an individual's credit score and history.</span></span> <span data-ttu-id="34427-107">Централизованный подход представляет собой концентрацию операционного риска, а иногда и ненужную третью сторону.</span><span class="sxs-lookup"><span data-stu-id="34427-107">A centralized approach presents a concentration of operational risk and sometimes an unnecessary third party.</span></span>

<span data-ttu-id="34427-108">С помощью DLT (технология распределенного реестра) консорциум банков может создать децентрализованную систему, которая может быть более эффективной, менее подверженной атакам и служить новой платформой, где инновационные структуры могут быть реализованы для решения традиционных задач обеспечения конфиденциальности, скорости и стоимости.</span><span class="sxs-lookup"><span data-stu-id="34427-108">With DLTs (distributed ledger technology), a consortium of banks can establish a decentralized system that can be more efficient, less susceptible to attack, and serve as a new platform where innovative structures can be implemented to solve traditional challenges with privacy, speed, and cost.</span></span>

<span data-ttu-id="34427-109">В этом примере показано, как можно быстро настроить службы Azure, такие как масштабируемый набор виртуальных машин, виртуальную сеть, Key Vault, службу хранилища, Load Balancer и Monitor для развертывания эффективного частного блокчейна Ethereum PoA, где банки-члены могут создавать собственные узлы.</span><span class="sxs-lookup"><span data-stu-id="34427-109">This example will show you how Azure services such as virtual machine scale set, Virtual Network, Key Vault, Storage, Load Balancer, and Monitor can be quickly provisioned for the deployment of an efficient private Ethereum PoA blockchain where member banks can establish their own nodes.</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="34427-110">Варианты соответствующего использования</span><span class="sxs-lookup"><span data-stu-id="34427-110">Relevant use cases</span></span>

<span data-ttu-id="34427-111">Следующие варианты использования имеют похожие шаблоны проектирования.</span><span class="sxs-lookup"><span data-stu-id="34427-111">These other uses cases have similar design patterns:</span></span>

* <span data-ttu-id="34427-112">Перемещение выделенных бюджетов между различными бизнес-единицами многонациональной корпорации</span><span class="sxs-lookup"><span data-stu-id="34427-112">Movement of allocated budgets between different business units of a multinational corporation</span></span>
* <span data-ttu-id="34427-113">Трансграничные платежи</span><span class="sxs-lookup"><span data-stu-id="34427-113">Cross-border payments</span></span>
* <span data-ttu-id="34427-114">Сценарии торгового финансирования</span><span class="sxs-lookup"><span data-stu-id="34427-114">Trade finance scenarios</span></span>
* <span data-ttu-id="34427-115">Системы лояльности с участием разных компаний</span><span class="sxs-lookup"><span data-stu-id="34427-115">Loyalty systems involving different companies</span></span>
* <span data-ttu-id="34427-116">Экосистемы цепочки поставок и др.</span><span class="sxs-lookup"><span data-stu-id="34427-116">Supply chain ecosystems and many more</span></span>

## <a name="architecture"></a><span data-ttu-id="34427-117">Архитектура</span><span class="sxs-lookup"><span data-stu-id="34427-117">Architecture</span></span>

![Схема архитектуры децентрализованного доверия банка](./media/architecture-decentralized-trust.png)

<span data-ttu-id="34427-119">В этом сценарии рассматриваются компоненты серверной части, необходимые для создания масштабируемой, защищенной и контролируемой частной сети корпоративного блокчейна в консорциуме из двух или более членов.</span><span class="sxs-lookup"><span data-stu-id="34427-119">This scenario covers the back-end components that are necessary to create a scalable, secure, and monitored private, enterprise blockchain network within a consortium of two or more members.</span></span> <span data-ttu-id="34427-120">Подробная информация о том, как эти компоненты предоставляются (то есть в разных подписях и группах ресурсов), а также требования к подключению (то есть VPN или ExpressRoute) оставляются для вашего рассмотрения на основе требований к политике вашей организации.</span><span class="sxs-lookup"><span data-stu-id="34427-120">Details of how these components are provisioned (that is, within different subscriptions and resource groups) as well as the connectivity requirements (that is, VPN or ExpressRoute) are left for your consideration based on your organization's policy requirements.</span></span> <span data-ttu-id="34427-121">Ниже приведен пример прохождения потока данных.</span><span class="sxs-lookup"><span data-stu-id="34427-121">Here's how data flows:</span></span>

1. <span data-ttu-id="34427-122">Банк А создает и обновляет кредитную запись отдельного лица, отправляя транзакции в сеть блокчейна с помощью JSON-RPC.</span><span class="sxs-lookup"><span data-stu-id="34427-122">Bank A creates/updates an individual's credit record by sending a transaction to the blockchain network via JSON-RPC.</span></span>
2. <span data-ttu-id="34427-123">Данные передаются с сервера частных приложений банка А в балансировщик нагрузки Azure, а затем в проверяющий узел масштабируемого набора виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="34427-123">Data flows from Bank A's private application server to the Azure load balancer and subsequently to a validating node VM on the virtual machine scale set.</span></span>
3. <span data-ttu-id="34427-124">Сеть Ethereum PoA создает блок в заданное время (2 секунды для этого сценария).</span><span class="sxs-lookup"><span data-stu-id="34427-124">The Ethereum PoA network creates a block at a preset time (2 seconds for this scenario).</span></span>
4. <span data-ttu-id="34427-125">Транзакция вставляется в созданный блок и проверяется через сеть блокчейна.</span><span class="sxs-lookup"><span data-stu-id="34427-125">The transaction is bundled into the created block and validated across the blockchain network.</span></span>
5. <span data-ttu-id="34427-126">Банк B может читать кредитную запись, созданную банком A, путем связи с собственным узлом аналогичным образом с помощью JSON-RPC.</span><span class="sxs-lookup"><span data-stu-id="34427-126">Bank B can read the credit record created by bank A by communicating with its own node similarly via JSON-RPC.</span></span>

### <a name="components"></a><span data-ttu-id="34427-127">Компоненты</span><span class="sxs-lookup"><span data-stu-id="34427-127">Components</span></span>

* <span data-ttu-id="34427-128">виртуальные машины в масштабируемых наборах виртуальных машин предоставляют средство вычислений по запросу для размещения процессов проверяющего элемента управления для блокчейна;</span><span class="sxs-lookup"><span data-stu-id="34427-128">Virtual Machines within Virtual Machine Scale Sets provides the on-demand compute facility to host the validator processes for the blockchain</span></span>
* <span data-ttu-id="34427-129">Key Vault используется как безопасное хранилище для закрытых ключей каждого проверяющего элемента управления;</span><span class="sxs-lookup"><span data-stu-id="34427-129">Key Vault is used as the secure storage facility for the private keys of each validator</span></span>
* <span data-ttu-id="34427-130">Load Balancer распределяет запросы RPC, пиринга и децентрализованного приложения системы управления;</span><span class="sxs-lookup"><span data-stu-id="34427-130">Load Balancer spreads the RPC, peering, and Governance DApp requests</span></span>
* <span data-ttu-id="34427-131">служба хранилища размещает сведения о сети и координации аренды;</span><span class="sxs-lookup"><span data-stu-id="34427-131">Storage hosting persistent network information and coordinating leasing</span></span>
* <span data-ttu-id="34427-132">Operations Management Suite (объединение нескольких служб Azure) предоставляет сведения о доступных узлах, транзакциях в минуту и членах консорциума.</span><span class="sxs-lookup"><span data-stu-id="34427-132">Operations Management Suite (a bundling of a few Azure services) provides insight into available nodes, transactions per minute and consortium members</span></span>

### <a name="alternatives"></a><span data-ttu-id="34427-133">Альтернативные варианты</span><span class="sxs-lookup"><span data-stu-id="34427-133">Alternatives</span></span>

<span data-ttu-id="34427-134">В этом примере выбран подход Ethereum PoA, поскольку он является хорошей точкой входа для консорциума организаций, которые хотят создать среду, в которой можно обмениваться данными и с легкостью совместно использовать их доверенным, децентрализованным и понятным способом.</span><span class="sxs-lookup"><span data-stu-id="34427-134">The Ethereum PoA approach is chosen for this example because it is a good entry point for a consortium of organizations that want to create an environment where information can be exchanged and shared with one another easily in a trusted, decentralized, and easy to understand way.</span></span> <span data-ttu-id="34427-135">Доступные шаблоны решений Azure также обеспечивают быстрый и удобный способ запуска блокчейна Ethereum PoA не только для лидера консорциума, но и для организаций-членов консорциума, чтобы развернуть собственные ресурсы Azure в рамках своей группы ресурсов и подписки для присоединения к существующей сети.</span><span class="sxs-lookup"><span data-stu-id="34427-135">The available Azure solution templates also provide a fast and convenient way not just for a consortium leader to start an Ethereum PoA blockchain, but also for member organizations in the consortium to spin up their own Azure resources within their own resource group and subscription to join an existing network.</span></span>

<span data-ttu-id="34427-136">Для других расширенных или разных сценариев может возникнуть такая проблема, как конфиденциальность транзакций.</span><span class="sxs-lookup"><span data-stu-id="34427-136">For other extended or different scenarios, concerns such as transaction privacy may arise.</span></span> <span data-ttu-id="34427-137">Например, в сценарии передачи ценных бумаг члены консорциума могут не хотеть, чтобы их транзакции отображались для других членов.</span><span class="sxs-lookup"><span data-stu-id="34427-137">For example, in a securities transfer scenario, members in a consortium may not want their transactions to be visible even to other members.</span></span> <span data-ttu-id="34427-138">Существуют и другие альтернативы Ethereum PoA, которые решают эти проблемы по-своему.</span><span class="sxs-lookup"><span data-stu-id="34427-138">Other alternatives to Ethereum PoA exist that addresses these concerns in their own way:</span></span>

* <span data-ttu-id="34427-139">Corda</span><span class="sxs-lookup"><span data-stu-id="34427-139">Corda</span></span>
* <span data-ttu-id="34427-140">Кворум</span><span class="sxs-lookup"><span data-stu-id="34427-140">Quorum</span></span>
* <span data-ttu-id="34427-141">Hyperledger</span><span class="sxs-lookup"><span data-stu-id="34427-141">Hyperledger</span></span>

## <a name="considerations"></a><span data-ttu-id="34427-142">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="34427-142">Considerations</span></span>

### <a name="availability"></a><span data-ttu-id="34427-143">Доступность</span><span class="sxs-lookup"><span data-stu-id="34427-143">Availability</span></span>

<span data-ttu-id="34427-144">[Azure Monitor][monitor] используется для непрерывного мониторинга сети блокчейна, чтобы обеспечить доступность.</span><span class="sxs-lookup"><span data-stu-id="34427-144">[Azure Monitor][monitor] is used to continuously monitor the blockchain network for issues to ensure availability.</span></span> <span data-ttu-id="34427-145">Ссылка на пользовательскую панель мониторинга на основе Azure Monitor будет отправлена вам после успешного развертывания шаблона решения блокчейна, используемого в этом сценарии.</span><span class="sxs-lookup"><span data-stu-id="34427-145">A link to a custom monitoring dashboard based on Azure Monitor will be sent to you upon successful deployment of the blockchain solution template used in this scenario.</span></span> <span data-ttu-id="34427-146">На панели мониторинга отображаются узлы, сообщающие о пакетах пульса за последние 30 минут, а также другая полезная статистика.</span><span class="sxs-lookup"><span data-stu-id="34427-146">The dashboard shows nodes that are reporting heartbeats in the past 30 minutes as well as other useful statistics.</span></span> 

<span data-ttu-id="34427-147">Дополнительные сведения по другим вопросам доступности см. в статье [с контрольным списком для обеспечения доступности][availability] в Центре архитектуры Azure.</span><span class="sxs-lookup"><span data-stu-id="34427-147">For other availability topics, see the [availability checklist][availability] in the Azure Architecture Center.</span></span>

### <a name="scalability"></a><span data-ttu-id="34427-148">Масштабируемость</span><span class="sxs-lookup"><span data-stu-id="34427-148">Scalability</span></span>

<span data-ttu-id="34427-149">Популярной проблемой для блокчейна является количество транзакций, которые он может включать в течение заданного промежутка времени.</span><span class="sxs-lookup"><span data-stu-id="34427-149">A popular concern for blockchain is the number of transactions that a blockchain can include within a preset amount of time.</span></span> <span data-ttu-id="34427-150">Этот сценарий использует алгоритм Proof-of-Authority, где такая масштабируемость может быть лучше управляемой, чем Proof-of-Work.</span><span class="sxs-lookup"><span data-stu-id="34427-150">This scenario uses Proof-of-Authority where such scalability can be better managed than Proof-of-Work.</span></span> <span data-ttu-id="34427-151">В сетях, основанных на алгоритме Proof-of-Authority, участники консенсуса известны и управляемы, что делает консенсус более подходящим для частного блокчейна консорциума организаций, которые известны друг другу.</span><span class="sxs-lookup"><span data-stu-id="34427-151">In Proof-of-Authority based networks, consensus participants are known and managed, making it more suitable for private blockchain for a consortium of organization that knows one another.</span></span> <span data-ttu-id="34427-152">Параметры, такие как среднее время блока, транзакции в минуту и потребление ресурсов вычислений, можно легко контролировать через пользовательскую панель мониторинга.</span><span class="sxs-lookup"><span data-stu-id="34427-152">Parameters such as average block time, transactions per minute and compute resource consumption can be easily monitored via the custom dashboard.</span></span> <span data-ttu-id="34427-153">Затем ресурсы можно настроить в зависимости от требований к масштабированию.</span><span class="sxs-lookup"><span data-stu-id="34427-153">Resources can then be adjusted accordingly based on scale requirements.</span></span>

<span data-ttu-id="34427-154">Общие рекомендации по разработке масштабируемого сценария см. в [контрольном списке для обеспечения масштабируемости][scalability] в Центре архитектуры Azure.</span><span class="sxs-lookup"><span data-stu-id="34427-154">For general guidance on designing scalable scenario, see the [scalability checklist][scalability] in the Azure Architecture Center.</span></span>

### <a name="security"></a><span data-ttu-id="34427-155">Безопасность</span><span class="sxs-lookup"><span data-stu-id="34427-155">Security</span></span>

<span data-ttu-id="34427-156">[Azure Key Vault][vault] используется для простого хранения и управления закрытыми ключами проверяющего элемента управления.</span><span class="sxs-lookup"><span data-stu-id="34427-156">[Azure Key Vault][vault] is used to easily store and manage the private keys of validators.</span></span> <span data-ttu-id="34427-157">Развертывание по умолчанию в этом примере создает сеть блокчейна, доступную через Интернет.</span><span class="sxs-lookup"><span data-stu-id="34427-157">The default deployment in this example creates a blockchain network that is accessible via the internet.</span></span> <span data-ttu-id="34427-158">Для сценария производства, где требуется частная сеть, члены могут быть подключены друг к другу через подключение VPN-шлюза типа "виртуальная сеть — виртуальная сеть".</span><span class="sxs-lookup"><span data-stu-id="34427-158">For production scenario where a private network is desired, members can be connected to each other via VNet-to-VNet VPN gateway connections.</span></span> <span data-ttu-id="34427-159">Шаги по настройке VPN включены в разделе связанных ресурсов ниже.</span><span class="sxs-lookup"><span data-stu-id="34427-159">The steps for configuring a VPN are included in the related resources section below.</span></span>

<span data-ttu-id="34427-160">Общие рекомендации по разработке безопасных решений см. в разделе [Azure Security Documentation][security].</span><span class="sxs-lookup"><span data-stu-id="34427-160">For general guidance on designing secure solutions, see the [Azure Security Documentation][security].</span></span>

### <a name="resiliency"></a><span data-ttu-id="34427-161">Устойчивость</span><span class="sxs-lookup"><span data-stu-id="34427-161">Resiliency</span></span>

<span data-ttu-id="34427-162">Блокчейн Ethereum PoA сам по себе может обеспечить некоторую степень устойчивости, поскольку узлы проверяющего элемента управления могут быть развернуты в разных регионах.</span><span class="sxs-lookup"><span data-stu-id="34427-162">The Ethereum PoA blockchain can itself provide some degree of resilience as the validator nodes can be deployed in different regions.</span></span> <span data-ttu-id="34427-163">Azure имеет параметры для развертывания в более чем 54 регионах по всему миру.</span><span class="sxs-lookup"><span data-stu-id="34427-163">Azure has options for deployments in over 54 regions worldwide.</span></span> <span data-ttu-id="34427-164">Блокчейн, как в этом сценарии, предоставляет уникальные и обновленные возможности сотрудничества для повышения устойчивости.</span><span class="sxs-lookup"><span data-stu-id="34427-164">A blockchain such as the one in this scenario provides unique and refreshing possibilities of cooperation to increase resilience.</span></span> <span data-ttu-id="34427-165">Устойчивость сети обеспечивается не только одной централизованной стороной, но и всеми членами консорциума.</span><span class="sxs-lookup"><span data-stu-id="34427-165">The resilience of the network is not just provided for by a single centralized party but all members of the consortium.</span></span> <span data-ttu-id="34427-166">Блокчейн, основанный на алгоритме Proof-of-Authority, позволяет повысить устойчивость сети и ее работоспособность.</span><span class="sxs-lookup"><span data-stu-id="34427-166">A Proof-of-Authority based blockchain allows network resilience to be even more planned and deliberate.</span></span>

<span data-ttu-id="34427-167">Общее руководство по проектированию устойчивых решений см. в разделе [Проектирование устойчивых приложений для Azure][resiliency].</span><span class="sxs-lookup"><span data-stu-id="34427-167">For general guidance on designing resilient solutions, see [Designing resilient applications for Azure][resiliency].</span></span>

## <a name="pricing"></a><span data-ttu-id="34427-168">Цены</span><span class="sxs-lookup"><span data-stu-id="34427-168">Pricing</span></span>

<span data-ttu-id="34427-169">Чтобы изучить стоимость выполнения этого сценария, все услуги были предварительно сконфигурированы в калькуляторе стоимости.</span><span class="sxs-lookup"><span data-stu-id="34427-169">To explore the cost of running this scenario, all of the services are pre-configured in the cost calculator.</span></span> <span data-ttu-id="34427-170">Чтобы узнать, как изменится цена для вашего конкретного варианта использования, измените соответствующие переменные в соответствии с ожидаемыми требованиями к производительности и доступности.</span><span class="sxs-lookup"><span data-stu-id="34427-170">To see how the pricing would change for your particular use case, change the appropriate variables to match your expected performance and availability requirements.</span></span>

<span data-ttu-id="34427-171">Мы предоставили три примера профилей затрат, основанных на количестве экземпляров масштабируемых наборов виртуальных машин для запуска приложений (экземпляры могут находиться в разных регионах).</span><span class="sxs-lookup"><span data-stu-id="34427-171">We have provided three sample cost profiles based on the number of scale set VM instances that run your applications (the instances can reside in different regions).</span></span>

* <span data-ttu-id="34427-172">[Небольшой][small-pricing]. Этот пример тарификации предполагает наличие 2 виртуальных машин в месяц с отключенным мониторингом.</span><span class="sxs-lookup"><span data-stu-id="34427-172">[Small][small-pricing]: this pricing example correlates to 2 VMs per month with monitoring turned off</span></span>
* <span data-ttu-id="34427-173">[Средний][medium-pricing]. Этот пример тарификации предполагает наличие 7 виртуальных машин в месяц с включенным мониторингом.</span><span class="sxs-lookup"><span data-stu-id="34427-173">[Medium][medium-pricing]: this pricing example correlates to 7 VMs per month with monitoring turned on</span></span>
* <span data-ttu-id="34427-174">[Большой][large-pricing]. Этот пример тарификации предполагает наличие 15 виртуальных машин в месяц с включенным мониторингом.</span><span class="sxs-lookup"><span data-stu-id="34427-174">[Large][large-pricing]: this pricing example correlates to 15 VMs per month with monitoring turned on</span></span>

<span data-ttu-id="34427-175">Вышеуказанная цена предназначена для того, чтобы один участник консорциума запустил сеть блокчейна или подключился к ней.</span><span class="sxs-lookup"><span data-stu-id="34427-175">The above pricing is for one consortium member to start or join a blockchain network.</span></span> <span data-ttu-id="34427-176">Как правило, в консорциуме, где задействовано несколько компаний или организаций, каждый участник получит свою собственную подписку Azure.</span><span class="sxs-lookup"><span data-stu-id="34427-176">Typically in a consortium where there are multiple companies or organizations involved, each member will get their own Azure subscription.</span></span>

## <a name="next-steps"></a><span data-ttu-id="34427-177">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="34427-177">Next Steps</span></span>

<span data-ttu-id="34427-178">Чтобы увидеть пример этого сценария, разверните [демонстрационное приложение блокчейна Ethereum PoA][deploy] в Azure, а затем перейдите к [README исходного кода сценария][source].</span><span class="sxs-lookup"><span data-stu-id="34427-178">To see an example of this scenario, deploy the [Ethereum PoA blockchain demo application][deploy] on Azure, then go through the [README of the scenario source code][source].</span></span>

## <a name="related-resources"></a><span data-ttu-id="34427-179">Связанные ресурсы</span><span class="sxs-lookup"><span data-stu-id="34427-179">Related resources</span></span>

<span data-ttu-id="34427-180">Дополнительные сведения об использовании шаблона решения сети Proof-of-Authority в Ethereum для Azure см. в [руководстве по использованию][guide].</span><span class="sxs-lookup"><span data-stu-id="34427-180">For more information on using the Ethereum Proof-of-Authority solution template for Azure, review this [usage guide][guide].</span></span>

<!-- links -->
[small-pricing]: https://azure.com/e/4e429d721eb54adc9a1558fae3e67990
[medium-pricing]: https://azure.com/e/bb42cd77437744be8ed7064403bfe2ef
[large-pricing]: https://azure.com/e/e205b443de3e4adfadf4e09ffee30c56
[guide]: /azure/blockchain-workbench/ethereum-poa-deployment
[deploy]: https://portal.azure.com/?pub_source=email&pub_status=success#create/microsoft-azure-blockchain.azure-blockchain-ethereumethereum-poa-consortium
[source]: https://github.com/vitoc/creditscoreblockchain
[monitor]: /azure/monitoring-and-diagnostics/monitoring-overview-azure-monitor
[availability]: /azure/architecture/checklist/availability
[scalability]: /azure/architecture/checklist/scalability
[resiliency]: ../../resiliency/index.md
[security]: /azure/security/
[vault]: https://azure.microsoft.com/services/key-vault/
