---
title: Внешний интерфейс для электронной коммерции в Azure
description: Проверенные сценарии размещения сайта электронной коммерции в Azure
author: masonch
ms.date: 7/13/18
ms.openlocfilehash: 568821e97c6b90a36429dfa8ec0ef9ed38c7963c
ms.sourcegitcommit: 71cbef121c40ef36e2d6e3a088cb85c4260599b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/14/2018
ms.locfileid: "39060975"
---
# <a name="e-commerce-front-end-on-azure"></a>Внешний интерфейс для электронной коммерции в Azure

В этом примере сценария описывается реализация интерфейса электронной коммерции с помощью средств платформы как услуги (PaaS) Azure. На многих веб-сайтах электронной коммерции известна проблема сезонности и изменчивости трафика с течением времени. Когда спрос на ваши товары или услуги резко возрастает (прогнозируемо или нет), важно использовать средства PaaS, позволяющие обслуживать большее количество клиентов и транзакций. Кроме того, этот сценарий пользуется преимуществами ценообразования на облачные услуги, так как оплачиваются только используемые ресурсы.

Этот документ поможет вам узнать о различных компонентах Azure PaaS и рекомендациях, которые используются для объединения компонентов и развертывания примера приложения электронной коммерции, *Releasecloud Concerts*, сетевой платформы по продаже билетов на концерты.

## <a name="potential-use-cases"></a>Потенциальные варианты использования

Рассмотрите этот сценарий для следующих вариантов использования:

* Создание приложения, которое требует эластичной масштабируемости для обработки резкого увеличения количества пользователей в разное время.
* Создание приложения, предназначенного для работы в условиях высокой доступности в разных регионах Azure во всем мире.

## <a name="architecture"></a>Архитектура

![Пример архитектуры сценария для приложения электронной коммерции][architecture-diagram]

Этот сценарий охватывает покупку билетов с сайта электронной коммерции, данные передаются по сценарию следующим образом:

1. Диспетчер трафика Azure направляет запрос пользователя на сайт электронной коммерции, размещенный в Службе приложений Azure.
2. Azure CDN предоставляет пользователю статические изображения и содержимое.
3. Пользователь выполняет вход в приложение через клиент Azure Active Directory B2C.
4. Пользователь выполняет поиск концертов с помощью службы "Поиск Azure".
5. Веб-сайт извлекает сведения о концерте из Базы данных SQL Azure. 
6. Веб-сайт ссылается на изображения приобретенных билетов в хранилище BLOB-объектов.
7. Результаты запроса базы данных кэшируются в кэш Redis для Azure для улучшения производительности.
8. Пользователь отправляет заказы на билеты и отзывы о концертах, которые помещаются в очередь.
9. Служба "Функции Azure" обрабатывает оплату заказа и отзывы о концертах.
10. Службы Cognitive Services обеспечивают анализ отзывов о концертах для определения тональности (положительная или отрицательная).
11. Application Insights предоставляет метрики производительности для наблюдения за работоспособностью веб-приложения.

### <a name="components"></a>Компоненты

* [Azure CDN][docs-cdn]. Для уменьшения задержки предоставляет статическое, кэшированное содержимое из близких к пользователям расположений.
* [Диспетчер трафика Azure][docs-traffic-manager]. Управляет распределением пользовательского трафика между конечными точками службы в разных регионах Azure.
* [Службы приложений — веб-приложения][docs-webapps]. Размещает веб-приложения, позволяющие выполнять автоматическое масштабирование и обеспечивать высокую доступность без необходимости управления инфраструктурой.
* [Azure Active Directory B2C][docs-b2c]. Служба управления идентификацией, которая позволяет настраивать и администрировать процессы входа и регистрации пользователей, а также управлять их профилями в приложениях.
* [Очереди службы хранилища][docs-storage-queues]. Хранит большое количество сообщений в очереди, доступ к которым может получить приложение.
* [Функции][docs-functions]. Это бессерверные параметры вычислений, которые позволяют приложениям запускаться по требованию без необходимости управления инфраструктурой.
* [Cognitive Services — анализ тональности][docs-sentiment-analysis]. Используя API машинного обучения, разработчики могут легко добавлять в приложения интеллектуальные функции, например определение эмоций и обнаружение видео, распознавание лиц, речи и компьютерное зрение, понимание речи и языка.
* [Поиск Azure][docs-search]. Это облачное решение "поиск как услуга" предоставляет расширенные возможности при работе с конфиденциальным и разнородным содержимым веб-, мобильных и корпоративных приложений.
* [Хранилище BLOB-объектов][docs-storage-blobs] оптимизировано для хранения больших объемов неструктурированных данных, например текстовых или двоичных данных.
* [Кэш Redis][docs-redis-cache]. Повышает производительность и масштабируемость систем, которые во многом полагаются на серверные хранилища данных, временно копируя часто используемые данные в быстрое хранилище, расположенное близко к приложению.
* [База данных SQL][docs-sql-database]. Это реляционная база данных общего назначения (управляемая служба) в Microsoft Azure, которая поддерживает такие структуры, как реляционные данные, JSON, пространственные данные и XML.
* [Application Insights][docs-application-insights]. Помогает постоянно улучшать производительность и удобство использования, автоматически обнаруживая аномалии производительности с помощью встроенных инструментов аналитики, чтобы определить действия пользователей с приложением.

### <a name="alternatives"></a>Альтернативные варианты

Доступно множество других технологий для создания клиентского приложения, ориентированного на электронную коммерцию в масштабе. Они предназначены для интерфейса приложения и уровня данных.

Другие варианты для веб-уровня и функций:

* [Service Fabric][docs-service-fabric]. Это платформа, предназначенная для создания распределенных компонентов, которые получают преимущества от развертывания и выполнения в кластере с высокой степенью управления. Service Fabric также может использоваться для размещения контейнеров.
* [Служба Azure Kubernetes][docs-kubernetes-service]. Это платформа для создания и развертывания контейнерных решений, которые можно использовать в качестве одной реализации архитектуры микрослужб. Это позволяет обеспечить гибкость различных компонентов приложения для независимого масштабирования по требованию.
* [Экземпляры контейнеров Azure][docs-container-instances]. Это средство быстрого развертывания и запуска контейнеров с коротким жизненным циклом. Контейнеры обычно развертываются для быстрой обработки, например обработка сообщения или выполнение вычисления, а затем отзываются после завершения.
* [Служебную шину][service-bus] можно использовать вместо очереди службы хранилища.

Другие варианты для уровня данных:

* [Cosmos DB][docs-cosmosdb]. Это глобально распределенная многомодельная база данных Майкрософт. Это платформа для запуска других моделей данных, таких как Mongo DB, Cassandra, хранилища данных графов или простой таблицы хранилища.

## <a name="considerations"></a>Рекомендации

### <a name="availability"></a>Доступность

* Рассмотрите возможность использования [распространенных конструктивных шаблонов для обеспечения доступности][design-patterns-availability] при создании облачного приложения.
* Ознакомьтесь с вопросами доступности в соответствующем [описании эталонной архитектуры для веб-приложения в службе приложений][app-service-reference-architecture].
* Дополнительные сведения о доступности см. в статье [Контрольный список для обеспечения доступности][availability] в центре архитектуры.

### <a name="scalability"></a>Масштабируемость

* При создании облачного приложения следует учитывать [распространенные конструктивные шаблоны для обеспечения масштабируемости][design-patterns-scalability].
* Ознакомьтесь с вопросами масштабируемости в соответствующем [описании эталонной архитектуры для веб-приложения в службе приложений][app-service-reference-architecture].
* Сведения по другим вопросам масштабируемости см. в статье с [контрольным списком для обеспечения масштабируемости][scalability] в центре архитектуры.

### <a name="security"></a>Безопасность

* Рассмотрите использование [распространенных конструктивных шаблонов для обеспечения безопасности][design-patterns-security] там, где уместно.
* Ознакомьтесь с вопросами безопасности в соответствующем [описании эталонной архитектуры для веб-приложения в службе приложений][app-service-reference-architecture].
* Рассмотрим возможность применения процесса [безопасного жизненного цикла разработки][secure-development], чтобы помочь разработчикам создавать более безопасное программное обеспечения, выполнять требования к безопасности и снизить стоимость разработки.
* Ознакомьтесь со схемой архитектуры для [соответствия требованиям Azure PCI DSS][pci-dss-blueprint].

### <a name="resiliency"></a>Устойчивость

* Рассмотрите возможность использования [шаблона автоматического выключения][circuit-breaker], чтобы обеспечить корректную обработку ошибок, если одна часть приложения будет недоступна.
* Ознакомьтесь с [распространенными конструктивными шаблонами для обеспечения устойчивости][design-patterns-resiliency] и реализуйте их, если это уместно.
* Вы найдете ряд [рекомендаций по обеспечению устойчивости для Службы приложений][resiliency-app-service] в центре архитектуры.
* Рассмотрите возможность использования активной [георепликации][sql-geo-replication] для хранилища данных и [геоизбыточного хранилища][storage-geo-redudancy] для изображений и очередей.
* Подробные сведения об [устойчивости][resiliency] см. в соответствующей статье в центре архитектуры.

## <a name="deploy-the-scenario"></a>Развертывание сценария

Для развертывания этого сценария вы можете следовать этому [пошаговому руководству][end-to-end-walkthrough], демонстрирующему, как развернуть каждый компонент вручную. В этом руководстве также содержится пример приложения .NET, в котором используется простое приложение для приобретения билетов. Кроме того, есть шаблон ARM для автоматизации развертывания большей части ресурсов Azure.

## <a name="pricing"></a>Цены

Чтобы изучить стоимость выполнения этого сценария, все услуги были предварительно сконфигурированы в калькуляторе стоимости. Чтобы узнать, как изменится цена для вашего конкретного варианта использования, измените соответствующие переменные в соответствии с ожидаемым трафиком.

Здесь предоставлено три примера профиля затрат в зависимости от объема трафика, который планируется принимать.

* [Небольшой][small-pricing]. Представляет компоненты, необходимые для создания минимального экземпляра уровня рабочей среды. Предполагается небольшое количество пользователей (несколько тысяч в месяц). Приложение использует один экземпляр стандартного веб-приложения, которого будет достаточно для автомасштабирования. Остальные компоненты масштабируются до базового уровня, что позволяет обеспечить минимальную стоимость, но при этом обеспечить поддержку Соглашения об уровне обслуживания и достаточную емкость для обработки рабочей нагрузки на уровне рабочей среды.
* [Средний][medium-pricing]. Представляет компоненты развертывания среднего размера. По нашим оценкам систему в течении месяца использует приблизительно 100 000 пользователей. Ожидаемый трафик обрабатывается в одном экземпляре службы приложения со средним стандартным уровнем. Кроме того, в калькулятор добавляются средние уровни когнитивных и поисковых служб.
* [Большой][large-pricing]. Представляет собой приложение, предназначенное для больших масштабов: миллионы пользователей в месяц и терабайты данных. На этом уровне потребления требуются высокопроизводительные веб-приложения уровня "Премиум", развернутые во многих регионах, где работает диспетчер трафика. Передаются терабайты данных в хранилище, базы данных и сеть доставки содержимого.

## <a name="related-resources"></a>Связанные ресурсы

* [Выполнение веб-приложения в нескольких регионах][multi-region-web-app]
* [Эталонный пример электронного магазина в контейнерах][microservices-ecommerce]

<!-- links -->
[small-pricing]: https://azure.com/e/90fbb6a661a04888a57322985f9b34ac
[medium-pricing]: https://azure.com/e/38d5d387e3234537b6859660db1c9973
[large-pricing]: https://azure.com/e/f07f99b6c3134803a14c9b43fcba3e2f
[app-service-reference-architecture]: /azure/architecture/reference-architectures/app-service-web-app/
[architecture-diagram]: ./media/architecture-diagram-ecommerce-solution.png
[availability]: /azure/architecture/checklist/availability
[circuit-breaker]: /azure/architecture/patterns/circuit-breaker
[design-patterns-availability]: /azure/architecture/patterns/category/availability
[design-patterns-resiliency]: /azure/architecture/patterns/category/resiliency
[design-patterns-scalability]: /azure/architecture/patterns/category/performance-scalability
[design-patterns-security]: /azure/architecture/patterns/category/security
[docs-application-insights]: /azure/application-insights/app-insights-overview
[docs-b2c]: /azure/active-directory-b2c/active-directory-b2c-overview
[docs-cdn]: /azure/cdn/cdn-overview
[docs-container-instances]: /azure/container-instances/
[docs-kubernetes-service]: /azure/aks/
[docs-cosmosdb]: /azure/cosmos-db/
[docs-functions]: /azure/azure-functions/functions-overview
[docs-redis-cache]: /azure/redis-cache/cache-overview
[docs-search]: /azure/search/search-what-is-azure-search
[docs-service-fabric]: /azure/service-fabric/
[docs-sentiment-analysis]: /azure/cognitive-services/welcome
[docs-sql-database]: /azure/sql-database/sql-database-technical-overview
[docs-storage-blobs]: /azure/storage/blobs/storage-blobs-introduction
[docs-storage-queues]: /azure/storage/queues/storage-queues-introduction
[docs-traffic-manager]: /azure/traffic-manager/traffic-manager-overview
[docs-webapps]: /azure/app-service/app-service-web-overview
[end-to-end-walkthrough]: https://github.com/Azure/fta-customerfacingapps/tree/master/ecommerce/articles
[microservices-ecommerce]: https://github.com/dotnet-architecture/eShopOnContainers
[multi-region-web-app]: /azure/architecture/reference-architectures/app-service-web-app/multi-region
[pci-dss-blueprint]: /azure/security/blueprints/payment-processing-blueprint
[resiliency-app-service]: /azure/architecture/checklist/resiliency-per-service#app-service
[resiliency]: /azure/architecture/checklist/resiliency
[scalability]: /azure/architecture/checklist/scalability
[secure-development]: https://www.microsoft.com/en-us/SDL/process/design.aspx
[sql-geo-replication]: /azure/sql-database/sql-database-geo-replication-overview
[storage-geo-redudancy]: /azure/storage/common/storage-redundancy-grs
