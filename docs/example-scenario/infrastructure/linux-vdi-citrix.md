---
title: Виртуальный рабочий стол Linux с использованием Citrix
titleSuffix: Azure Example Scenarios
description: Создание среды VDI для настольных компьютеров Linux с помощью Citrix в Azure.
author: miguelangelopereira
ms.date: 09/12/2018
ms.topic: example-scenario
ms.service: architecture-center
ms.subservice: example-scenario
ms.custom: fasttrack, Linux
social_image_url: /azure/architecture/example-scenario/infrastructure/media/azure-citrix-sample-diagram.png
ms.openlocfilehash: 77093cba0e5646146ec9de68655754d9ac1e5461
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2019
ms.locfileid: "58248489"
---
# <a name="linux-virtual-desktops-with-citrix"></a>Виртуальный рабочий стол Linux с использованием Citrix

Этот пример сценария применим к любой отрасли, для которой требуется инфраструктура виртуальных рабочих столов (VDI) для рабочих столов Linux. VDI — это процесс запуска рабочего стола пользователя в виртуальной машине, что на сервере центра данных. В этом сценарии клиент решил использовать для своих потребностей VDI решение на основе Citrix.

Организации часто имеют разнородную среду с несколькими устройствами и операционными системами, которые используют сотрудники. Обеспечение последовательного доступа к приложениям при сохранении безопасной среды может быть сложной задачей. Решение VDI для рабочих столов Linux позволит вашей организации предоставлять доступ независимо от устройства или ОС, используемых пользователем.

Ниже приведены некоторые преимущества такого сценария.

- С использованием общих виртуальных рабочих столов Linux рентабельность инвестиций будет выше, так как к одной и той же инфраструктуре будет предоставлен доступ большему количеству пользователей. Благодаря объединению ресурсов в централизованной среде VDI нет потребности в более мощных устройствах пользователя.
- Производительность будет согласованной независимо от устройства пользователя.
- Пользователи могут получить доступ к приложениям Linux с любого устройства (включая устройства не на ОС Linux).
- Конфиденциальные данные всех распределенных сотрудников могут быть защищены в центре обработки данных Azure.

## <a name="relevant-use-cases"></a>Варианты соответствующего использования

Рассмотрите этот сценарий для следующих вариантов использования:

- Обеспечение безопасного доступа к критически важным специализированным рабочим столам Linux VDI на устройствах с Linux или другой ОС

## <a name="architecture"></a>Архитектура

[![](./media/azure-citrix-sample-diagram.png "Схема архитектуры")](./media/azure-citrix-sample-diagram.png#lightbox)

Этот пример сценария демонстрирует возможность доступа корпоративной сети к виртуальным рабочим столам Linux:

- Между локальной средой и Azure устанавливается ExpressRoute для обеспечения быстрой и надежной связи с облаком.
- Решение Citrix XenDesktop развернуто для VDI.
- CitrixVDA работает на Ubuntu (или другом поддерживаемом дистрибутиве).
- Группы безопасности сети Azure будут применять правильные списки управления доступом к сети.
- Citrix ADC (NetScaler) опубликует и загрузит все службы Citrix.
- Доменные службы Active Directory будут использоваться для присоединения к домену серверов Citrix. Серверы VDA не будут присоединены к домену.
- Синхронизация гибридных файлов Azure позволит совместное хранилище через решение. Например, это может использоваться в удаленных или домашних решениях.

В рамках данного сценария используются следующие номера SKU:

- Citrix ADC (NetScaler): 2 x D4sv3 с образом [NetScaler 12.0 VPX Standard Edition 200 MBPS PAYG](https://azuremarketplace.microsoft.com/pt-br/marketplace/apps/citrix.netscalervpx-120?tab=PlansAndPrice)
- Сервер лицензирования Citrix: 1 x D2sv3
- Citrix VDA: 4 x D8sv3
- Citrix StoreFront: 2 x D2sv3
- Контроллер доставки Citrix: 2 x D2sv3
- Контроллеры доменов: 2 x D2sv3
- Файловые серверы Azure: 2 x D2sv3

> [!NOTE]
> Все лицензии (кроме NetScaler) с использованием собственной лицензии (BYOL)

### <a name="components"></a>Компоненты

- [Виртуальная сеть Azure](/azure/virtual-network/virtual-networks-overview) позволяет ресурсам (например, виртуальным машинам) обмениваться данными друг с другом через локальные сети и Интернет. Виртуальные сети обеспечивают изоляцию и сегментирование, фильтрацию и маршрутизацию трафика и позволяют устанавливать связь между расположениями. Для всех ресурсов этого сценария будет использоваться одна виртуальная сеть.
- [Группы безопасности сети Azure](/azure/virtual-network/security-overview) содержат список правил безопасности, которые разрешают или запрещают входящий и исходящий трафик в зависимости от IP-адреса источника или назначения, порта и протокола. Виртуальные сети в этом сценарии защищены с помощью правил группы безопасности сети, которые ограничивают поток трафика между компонентами приложения.
- [Azure Load Balancer](/azure/application-gateway/overview) распределяет входящий трафик в соответствии с правилами и проверками работоспособности. Подсистема балансировки нагрузки обеспечивает низкую задержку и высокую пропускную способность, а также увеличение масштаба до миллионов потоков для всех приложений, которые используют протоколы TCP и UDP. Внутренняя подсистема балансировки нагрузки используется в этом сценарии для распределения трафика в Citrix NetScaler.
- [Служба "Синхронизация гибридных файлов Azure"](https://github.com/MicrosoftDocs/azure-docs/edit/master/articles/storage/files/storage-sync-files-planning.md) будет использоваться для всего общего хранилища. С помощью Синхронизации гибридных файлов хранилище будет реплицироваться в два файловых сервера.
- [База данных SQL Azure](/azure/sql-database/sql-database-technical-overview) — это реляционная база данных, предоставляемая по модели "как услуга" (DBaaS), на основе последней стабильной версии ядра СУБД Microsoft SQL Server. Она будет использоваться для размещения баз данных Citrix.
- [ExpressRoute](/azure/expressroute/expressroute-introduction) позволяет переносить локальные сети в Microsoft Cloud по частному подключению, которое обеспечивается поставщиком услуг подключения.
- [Доменные службы Active Directory используются для служб каталогов и аутентификации пользователей
- [Группа доступности Azure](/azure/virtual-machines/windows/tutorial-availability-sets) обеспечит, чтобы при развертывании виртуальных машин в Azure они были распределены между несколькими изолированными аппаратными узлами в кластере. Таким образом, в случае сбоя оборудования или программного обеспечения в Azure затрагивается только подмножество виртуальных машин, а общее решение остается доступным для использования.
- [Citrix ADC (NetScaler)](https://www.citrix.com/products/citrix-adc) — контроллер доставки приложений, который выполняет анализ трафика конкретного приложения для умного распространения, оптимизации и защиты сетевого трафика слоя 4 – слоя 7 (L4–L7) для веб-приложений.
- [Онлайн-магазин Citrix](https://www.citrix.com/products/citrix-virtual-apps-and-desktops/citrix-storefront.html) — это хранилище корпоративного приложения, которое улучшает безопасность и упрощает развертывание, обеспечивая современный, непревзойденный, почти собственный пользовательский интерфейс в Citrix Receiver на любой платформе. Онлайн-магазин упрощает управление средами виртуальных приложений Citrix для нескольких местоположений и версий, а также настольных компьютеров.
- [Сервер лицензирования Citrix](https://www.citrix.com/buy/licensing/overview.html) будет управлять лицензиями на продукты Citrix.
- [Citrix XenDesktops VDA](https://docs.citrix.com/en-us/citrix-virtual-apps-desktops-service) позволяет подключаться к приложениям и рабочим столам. VDA устанавливается на машине, которая запускает для пользователя приложения или виртуальные рабочие столы. Он позволяет машинам регистрироваться с контроллерами доставки и управлять соединением высокой четкости (HDX) с пользовательским устройством.
- [Контроллер доставки Citrix](https://docs.citrix.com/en-us/xenapp-and-xendesktop/7-15-ltsr/manage-deployment/delivery-controllers) — это серверный компонент, отвечающий за управление доступом пользователя, а также брокерские подключения и подключения по оптимизации. Контроллеры также предоставляют службы создания машин, которые создают образы рабочего стола и сервера.

### <a name="alternatives"></a>Альтернативные варианты

- Существует несколько участников с решениями VDI, которые поддерживаются в Azure, такие как VMware, Workspot и другие. Этот конкретный пример архитектуры основан на развернутом проекте, для которого использовался Citrix.
- Citrix предоставляет облачную службу, которая выделяет часть этой архитектуры. Это может быть альтернативой этого решения. Дополнительные сведения см. в [Citrix Cloud](https://www.citrix.com/products/citrix-cloud) (Облако Citrix).

## <a name="considerations"></a>Рекомендации

- Проверьте [Citrix Linux Requirements](https://docs.citrix.com/en-us/linux-virtual-delivery-agent/current-release/system-requirements) (Требования к Citrix на ОС Linux).
- Задержка может оказать влияние на решение в целом. Проведите для рабочей среды соответствующее тестирование.
- В зависимости от сценария для решения может понадобиться виртуальная машина с GPU для VDA. Для этого решения предполагается, что GPU — необязательное требование.

### <a name="availability-scalability-and-security"></a>Доступность, масштабируемость и безопасность

- Этот пример предназначен для высокой доступности для всех ролей, отличных от сервера лицензирования. Поскольку среда продолжает функционировать в течение 30-дневного периода отсрочки, если сервер лицензирования находится в автономном режиме, то на этом сервере не требуется дополнительная избыточность.
- Все серверы, предоставляющие аналогичные роли, должны развертываться в [группах доступности](/azure/virtual-machines/windows/manage-availability#configure-multiple-virtual-machines-in-an-availability-set-for-redundancy).
- Этот пример сценария не включает возможности аварийного восстановления. [Служба Azure Site Recovery](/azure/site-recovery/site-recovery-overview) может быть хорошей надстройкой для этой разработки.
- Рекомендуем развертывать экземпляры виртуальных машин в этом сценарии в [Зонах доступности](/azure/availability-zones/az-overview). Каждая зона доступности состоит из одного или нескольких центров обработки данных, оснащенных независимыми системами электроснабжения, охлаждения и сетевого взаимодействия. Каждый включенный регион имеет как минимум три зоны доступности. Такое распределение экземпляров виртуальной машины в разных зонах обеспечивает высокую степень доступности для уровней приложений. См. дополнительные сведения о том, [что такое Зоны доступности](/azure/availability-zones/az-overview). Вы также можете [развернуть VPN-шлюзы и шлюзы ExpressRoute в Зонах доступности Azure](/azure/vpn-gateway/about-zone-redundant-vnet-gateways).
- Для решения по управлению развертыванием продукта необходимо реализовать решение, например [резервное копирование](/azure/backup/backup-introduction-to-azure-backup), [мониторинг](/azure/monitoring-and-diagnostics/monitoring-overview) и [управление обновлениями](/azure/automation/automation-update-management).
- Этот пример должен работать примерно для 250 многопоточных пользователей (около 50–60 на сервер VDA) со смешанным использованием. Но это будет сильно зависеть от типа используемых приложений. Для использования в производстве необходимо выполнить строгое нагрузочное тестирование.

## <a name="deployment"></a>Развертывание

Сведения о развертывании доступны в официальной [документации Citrix](https://docs.citrix.com/en-us/citrix-virtual-apps-desktops/install-configure.html).

## <a name="pricing"></a>Цены

- Лицензии Citrix XenDesktop не включены в плату за услуги Azure.
- Лицензия Citrix NetScaler включена в модель с оплатой по мере использования.
- Использование зарезервированных экземпляров значительно уменьшит вычислительную стоимость решения.
- Стоимость ExpressRoute не включено.

## <a name="next-steps"></a>Дальнейшие действия

- Документацию Citrix по планированию и развертыванию см. [здесь](https://docs.citrix.com/en-us/citrix-virtual-apps-desktops/install-configure).
- Чтобы развернуть Citrix ADC (NetScaler) в Azure, просмотрите шаблоны диспетчера ресурсов, предоставленные Citrix [здесь](https://github.com/citrix/netscaler-azure-templates).
