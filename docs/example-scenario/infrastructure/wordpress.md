---
title: Веб-сайты WordPress с высоким уровнем масштабируемости и защиты
titleSuffix: Azure Example Scenarios
description: Создание веб-сайта WordPress с высоким уровнем масштабируемости и защиты для событий мультимедиа.
author: david-stanford
ms.date: 09/18/2018
ms.openlocfilehash: c0dad12e1da1f17b75d0661195123da4a8267152
ms.sourcegitcommit: bb7fcffbb41e2c26a26f8781df32825eb60df70c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/20/2018
ms.locfileid: "53644054"
---
# <a name="highly-scalable-and-secure-wordpress-website"></a>Веб-сайты WordPress с высоким уровнем масштабируемости и защиты

Этот пример сценария применяется для компаний, которым требуется высокий уровень масштабируемости и безопасности для установленного WordPress. Он основан на развертывании, используемом для большого соглашения, а также он был успешно масштабирован, что позволяет соответствовать скачкам трафика, которые случаются во время подключения к сайту.

## <a name="relevant-use-cases"></a>Варианты соответствующего использования

Другие варианты использования:

- События службы мультимедиа, из-за которых случились скачки трафика.
- Блоги использующие WordPress в качестве системы управления содержимым.
- Веб-сайты электронной коммерции или бизнеса, в которых используется WordPress.
- Веб-сайты созданные с помощью других систем управления содержимым.

## <a name="architecture"></a>Архитектура

[![Общие сведения об архитектуре компонентов Azure, используемых в масштабируемой и защищенной развертывании WordPress](media/secure-scalable-wordpress.png)](media/secure-scalable-wordpress.png#lightbox)

В этом сценарии рассматривается масштабируемая и защищенная установка WordPress, для которой используются веб-сервера Ubuntu и MariaDB. В этом сценарии существует два различных потока данных. Первый это пользователи, которые питаются получить доступ к веб-сайту.

1. Пользователи получают доступ к интерфейсу веб-сайта с помощью CDN.
2. В качестве точки отсчета в CDN используется балансировщик нагрузки Azure, а также некэшируемые данные.
3. Балансировщик нагрузки Azure распределяет запросы для масштабируемых наборов виртуальных машин веб-серверов.
4. Приложение WordPress извлекает все динамические данные из кластеров Maria DB, а все статическое содержимое размещается в файлах Azure.
5. Ключи SSL хранятся в Azure Key Vault.

Вторым рабочим процессом является то, как авторы добавляют новое содержимое.

1. Авторы используют безопасное соединение, чтобы подключиться к публичному VPN-шлюзу.
2. Сведения о VPN-подключении хранятся в Azure Active Directory.
3. Затем подключение устанавливается с полями перехода Администратора.
4. После этого, автор сможет подключится к балансировщику нагрузки Azure и создать кластер.
5. Балансировщик нагрузки Azure распределяет трафик для масштабируемых наборов виртуальных машин веб-серверов, обладающих правами на запись в кластере Maria DB.
6. Новое статическое содержимое передается в файлы Azure, а динамическое содержимое записывается в кластер Maria DB.
7. Затем данные изменения реплицируются в альтернативный регион с помощью RSYNC или репликации "ведущий — ведомый".

### <a name="components"></a>Компоненты

- [Сеть доставки содержимого Azure(CDN)](/azure/cdn/cdn-overview) является распределенной сетью серверов, эффективно доставляющей пользователям веб-содержимое. Минимальная задержка в сетях CDN достигается путем сохранения кэшированного содержимого на пограничных серверах в расположениях точек подключения, находящихся рядом с пользователями.
- [Виртуальные сети](/azure/virtual-network/virtual-networks-overview) позволяют ресурсам (например, виртуальным машинам) обмениваться данными друг с другом через локальные сети и Интернет. Виртуальные сети обеспечивают изоляцию и сегментирование, фильтрацию и маршрутизацию трафика и позволяют устанавливать связь между расположениями. Для соединения двух сетей используется пиринговая связь.
- [Группы безопасности сети ](/azure/virtual-network/security-overview) содержат список правил безопасности, который разрешает или запрещает входящий и исходящий трафик в зависимости от IP-адреса источника или назначения, порта и протокола. Виртуальные сети в этом сценарии защищены с помощью правил группы безопасности сети, которые ограничивают поток трафика между компонентами приложения.
- [Балансировщики нагрузки](/azure/load-balancer/load-balancer-overview) распределяют входящий трафик в соответствии с правилами и проверками работоспособности. Подсистема балансировки нагрузки обеспечивает низкую задержку и высокую пропускную способность, а также увеличение масштаба до миллионов потоков для всех приложений, которые используют протоколы TCP и UDP. В этом сценарии балансировщик нагрузки используется для распределения трафика из сети доставки содержимого во внешние веб-сервера.
- [Масштабируемые наборы виртуальных машин][docs-vmss] позволяют создавать и администрировать группы идентичных виртуальных машин с балансировкой нагрузки. Число экземпляров виртуальных машин может автоматически увеличиваться или уменьшаться в зависимости от спроса или по определенному расписанию. В этом сценарии используются два отдельных набора масштабирования виртуальных машин. Первый для интерфейсных веб-серверов обслуживающих содержимое, а второй для интерфейсных веб-серверов используемых для создания содержимого.
- Служба [файлов Azure](/azure/storage/files/storage-files-introduction) предоставляет полностью управляемый общий ресурс в облаке, с помощью которого было размещено все содержимое WordPress в этом сценарии, так что все виртуальные машины обладают доступом к данным.
- [Azure Key Vault](/azure/key-vault/key-vault-overview) используется для хранения и строгого контроля за доступом к паролям, сертификатам и ключам.
- [Azure Active Directory (Azure AD)](/azure/active-directory/fundamentals/active-directory-whatis) — это мультитенантный облачный каталог и служба управления удостоверениями. В этом сценарии Azure AD предоставляет службы проверка подлинности веб-сайтов и VPN-туннелей.

### <a name="alternatives"></a>Альтернативные варианты

- [SQL Server для Linux](/azure/virtual-machines/linux/sql/sql-server-linux-virtual-machines-overview) можно заменить хранилищем данных MariaDB.
- [База данных Azure для MySQL](/azure/mysql/overview) может использоваться для замены хранимых данных в MariaDB (в том случае, если требуется использовать полностью управляемое решение.

## <a name="considerations"></a>Рекомендации

### <a name="availability"></a>Доступность

Экземпляры виртуальных машин, используемых в этом сценарии развертываются в нескольких регионах с помощью данных, реплицированных между ними. Для этого буде использоваться RSYNC (для WordPress) и репликация ведомого экземпляра (для кластеров MariaDB).

Дополнительные сведения по другим вопросам доступности см. в статье [с контрольным списком для обеспечения доступности][availability] в Центре архитектуры Azure.

### <a name="scalability"></a>Масштабируемость

В этом сценарии для двух кластеров серверов веб-интерфейса в каждом регионе используются масштабируемые наборы виртуальных машин. При использовании масштабируемых наборов количество экземпляров виртуальных машин, работающих на уровне интерфейсных приложений, можно автоматически масштабировать в ответ на потребности клиента или на основе определенного расписания. Дополнительные сведения см. в статье [Обзор автомасштабирования с помощью масштабируемых наборов виртуальных машин Azure][docs-vmss-autoscale].

Серверная часть — это кластер MariaDB в группе доступности. Дополнительные сведения см. в статье [Кластер MariaDB (MySQL) — руководство по Azure][mariadb-tutorial].

Для других вопросов масштабируемости, см. раздел [Контрольный список для обеспечения масштабируемости][scalability] в центре архитектуры Azure.

### <a name="security"></a>Безопасность

Весь трафик виртуальных сетей на уровне интерфейсного приложения защищен группами безопасности сети. Правила ограничивают поток трафика, так что экземпляры виртуальных машин уровня внешнего приложения могут получить доступ к уровню серверной базы данных. С уровня базы данных запрещено передавать исходящий интернет-трафик. Чтобы сократить площади атаки, прямые порты удаленного управления остаются закрытыми. Дополнительные сведения см. в статье [Группы безопасности приложений и сети][docs-nsg].

Общие рекомендации по разработке безопасных сценариев см. в статье [Документация по системе безопасности Azure][security].

### <a name="resiliency"></a>Устойчивость

В сочетании с использованием нескольких регионов, репликации данных и масштабируемыми наборами виртуальных машин в этом сценарии используется балансировщик нагрузки Azure. Эти сетевые компоненты распространяют трафик на подключенные экземпляры виртуальной машины и включают проверки работоспособности, которые гарантируют, что трафик распространяется только на работоспособные виртуальные машины. Все перечисленные сетевые компоненты работают с помощью CDN. Это делает сетевые ресурсы и приложение устойчивыми к проблемам, которые в противном случае нарушали бы трафик и влияли бы на доступ пользователя.

Общие рекомендации по разработке устойчивых решений см. в [этой статье][resiliency].

## <a name="pricing"></a>Цены

Чтобы изучить стоимость выполнения этого сценария, все услуги были предварительно сконфигурированы в калькуляторе стоимости. Чтобы узнать, как изменится цена для вашего конкретного варианта использования, измените соответствующие переменные в соответствии с ожидаемым трафиком.

Нами был предоставлен предварительно настроен [профиль затрат][pricing] основан на схеме архитектуры, приведенной выше. При настройке калькулятора цен, следует учитывать несколько основных моментов.

- Какой объем трафика ожидается с точки зрения ГБ в месяц? Объем трафика будет иметь наибольшее влияние на затраты, так как он повлияет на число виртуальных машин, которые необходимы для получения данных в масштабируемый набор виртуальных машин. Кроме того он будет соотносить с объемом данных, которые проходят через CDN.
- Какой объем данных будет записан на веб-сайт? Данные, записанные на ваш веб-сайт, коррелируют с тем, сколько данных отражено во всех регионах.
- Какая часть из содержимого является динамической? А какая статической? Разница между динамическим и статическим содержимым влияет на то, сколько данных нужно извлечь из уровня базы данных, и сколько будет кэшировано в CDN.

<!-- links -->
[architecture]: ./media/architecture-secure-scalable-wordpress.png
[mariadb-tutorial]: /azure/virtual-machines/linux/classic/mariadb-mysql-cluster
[docs-vmss]: /azure/virtual-machine-scale-sets/overview
[docs-vmss-autoscale]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview
[docs-nsg]: /azure/virtual-network/security-overview
[security]: /azure/security/
[availability]: ../../checklist/availability.md
[resiliency]: /azure/architecture/resiliency/
[scalability]: /azure/architecture/checklist/scalability
[pricing]: https://azure.com/e/a8c4809dab444c1ca4870c489fbb196b
