---
title: "Контрольный список для обеспечения масштабируемости"
description: "Руководство по контрольному списку для обеспечения масштабируемости во время проектирования для автоматического масштабирования Azure."
author: dragon119
ms.date: 03/24/2017
ms.custom: checklist
ms.openlocfilehash: 250fa2d56720c476bb604c5dba684e938088b6a0
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/14/2017
---
# <a name="scalability-checklist"></a><span data-ttu-id="17770-103">Контрольный список для обеспечения масштабируемости</span><span class="sxs-lookup"><span data-stu-id="17770-103">Scalability checklist</span></span>
[!INCLUDE [header](../_includes/header.md)]

## <a name="service-design"></a><span data-ttu-id="17770-104">Проектирование службы</span><span class="sxs-lookup"><span data-stu-id="17770-104">Service design</span></span>
* <span data-ttu-id="17770-105">**Разделяйте рабочую нагрузку.**</span><span class="sxs-lookup"><span data-stu-id="17770-105">**Partition the workload**.</span></span> <span data-ttu-id="17770-106">Проектируйте части процесса так, чтобы они были дискретными и делимыми.</span><span class="sxs-lookup"><span data-stu-id="17770-106">Design parts of the process to be discrete and decomposable.</span></span> <span data-ttu-id="17770-107">Минимизируйте размер каждой части, следуя общим правилам для разделения проблем и принципу персональной ответственности.</span><span class="sxs-lookup"><span data-stu-id="17770-107">Minimize the size of each part, while following the usual rules for separation of concerns and the single responsibility principle.</span></span> <span data-ttu-id="17770-108">Это позволяет распределить части компонента так, чтобы максимально увеличить возможности использования каждой вычислительной единицы (например, роли или сервера базы данных).</span><span class="sxs-lookup"><span data-stu-id="17770-108">This allows the component parts to be distributed in a way that maximizes use of each compute unit (such as a role or database server).</span></span> <span data-ttu-id="17770-109">Это также облегчает масштабирование приложения путем добавления экземпляров определенных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="17770-109">It also makes it easier to scale the application by adding instances of specific resources.</span></span> <span data-ttu-id="17770-110">Дополнительные сведения см. в статье [Compute Partitioning Guidance](https://msdn.microsoft.com/library/dn589773.aspx) (Рекомендации по разделению вычислений).</span><span class="sxs-lookup"><span data-stu-id="17770-110">For more information, see [Compute Partitioning Guidance](https://msdn.microsoft.com/library/dn589773.aspx).</span></span>
* <span data-ttu-id="17770-111">**Проектируйте с учетом масштабируемости**.</span><span class="sxs-lookup"><span data-stu-id="17770-111">**Design for scaling**.</span></span> <span data-ttu-id="17770-112">Масштабирование позволяет приложениям реагировать на переменную нагрузку путем увеличения и уменьшения количества экземпляров ролей, очередей и других используемых служб.</span><span class="sxs-lookup"><span data-stu-id="17770-112">Scaling allows applications to react to variable load by increasing and decreasing the number of instances of roles, queues, and other services they use.</span></span> <span data-ttu-id="17770-113">Тем не менее приложение должно быть спроектировано с учетом этого.</span><span class="sxs-lookup"><span data-stu-id="17770-113">However, the application must be designed with this in mind.</span></span> <span data-ttu-id="17770-114">Например, приложение и используемые им службы должны быть без отслеживания состояния, чтобы запросы можно было направлять в любой экземпляр.</span><span class="sxs-lookup"><span data-stu-id="17770-114">For example, the application and the services it uses must be stateless, to allow requests to be routed to any instance.</span></span> <span data-ttu-id="17770-115">Это также предотвращает добавление или удаление определенных экземпляров для текущих пользователей, негативно влияющих на производительность.</span><span class="sxs-lookup"><span data-stu-id="17770-115">This also prevents the addition or removal of specific instances from adversely impacting current users.</span></span> <span data-ttu-id="17770-116">Кроме того, следует реализовать конфигурацию или автоматическое обнаружение экземпляров при их добавлении и удалении, чтобы код приложения мог выполнять необходимую маршрутизацию.</span><span class="sxs-lookup"><span data-stu-id="17770-116">You should also implement configuration or auto-detection of instances as they are added and removed, so that code in the application can perform the necessary routing.</span></span> <span data-ttu-id="17770-117">Например, веб-приложение может использовать набор очередей в циклической модели для перенаправления запросов к фоновым службам, работающим в рабочих ролях.</span><span class="sxs-lookup"><span data-stu-id="17770-117">For example, a web application might use a set of queues in a round-robin approach to route requests to background services running in worker roles.</span></span> <span data-ttu-id="17770-118">Веб-приложение должно иметь возможность обнаружения изменений количества очередей, чтобы успешно перенаправлять запросы и балансировать нагрузку на приложение.</span><span class="sxs-lookup"><span data-stu-id="17770-118">The web application must be able to detect changes in the number of queues, to successfully route requests and balance the load on the application.</span></span>
* <span data-ttu-id="17770-119">**Масштабируйте систему как единое целое**.</span><span class="sxs-lookup"><span data-stu-id="17770-119">**Scale as a unit**.</span></span> <span data-ttu-id="17770-120">Планируйте добавление ресурсов, чтобы учесть рост.</span><span class="sxs-lookup"><span data-stu-id="17770-120">Plan for additional resources to accommodate growth.</span></span> <span data-ttu-id="17770-121">Для каждого ресурса необходимо знать верхний предел масштабирования и использовать сегментирование или разбиение, чтобы выйти за рамки этих ограничений.</span><span class="sxs-lookup"><span data-stu-id="17770-121">For each resource, know the upper scaling limits, and use sharding or decomposition to go beyond these limits.</span></span> <span data-ttu-id="17770-122">Определите единицы масштабирования для системы с точки зрения четко определенных наборов ресурсов.</span><span class="sxs-lookup"><span data-stu-id="17770-122">Determine the scale units for the system in terms of well-defined sets of resources.</span></span> <span data-ttu-id="17770-123">Это упростит применение операций масштабирования и снизит отрицательное влияние на приложение ограничений, налагаемых нехваткой ресурсов в определенной части системы в целом.</span><span class="sxs-lookup"><span data-stu-id="17770-123">This makes applying scale-out operations easier, and less prone to negative impact on the application through limitations imposed by lack of resources in some part of the overall system.</span></span> <span data-ttu-id="17770-124">Например, добавление X рабочих и веб-ролей может потребовать Y дополнительных очередей и Z учетных записей хранения для обработки дополнительной рабочей нагрузки, созданной ролями.</span><span class="sxs-lookup"><span data-stu-id="17770-124">For example, adding x number of web and worker roles might require y number of additional queues and z number of storage accounts to handle the additional workload generated by the roles.</span></span> <span data-ttu-id="17770-125">Поэтому единица масштабирования может состоять из X рабочих и веб-ролей, *Y* очередей и *Z* учетных записей хранения.</span><span class="sxs-lookup"><span data-stu-id="17770-125">So a scale unit could consist of x web and worker roles, *y* queues, and *z* storage accounts.</span></span> <span data-ttu-id="17770-126">Проектируйте приложение таким образом, чтобы его легко было масштабировать, путем добавляя одну или нескольких единиц масштабирования.</span><span class="sxs-lookup"><span data-stu-id="17770-126">Design the application so that it's easily scaled by adding one or more scale units.</span></span>
* <span data-ttu-id="17770-127">**Избегайте привязки клиента**.</span><span class="sxs-lookup"><span data-stu-id="17770-127">**Avoid client affinity**.</span></span> <span data-ttu-id="17770-128">Если возможно, сделайте так, чтобы приложению не требовалось сходство.</span><span class="sxs-lookup"><span data-stu-id="17770-128">Where possible, ensure that the application does not require affinity.</span></span> <span data-ttu-id="17770-129">Тогда запросы смогут передаваться в любой экземпляр, и число экземпляров будет несущественно.</span><span class="sxs-lookup"><span data-stu-id="17770-129">Requests can thus be routed to any instance, and the number of instances is irrelevant.</span></span> <span data-ttu-id="17770-130">Этим также устраняются дополнительные издержки на хранение, получение и обслуживание информации о состоянии для каждого пользователя.</span><span class="sxs-lookup"><span data-stu-id="17770-130">This also avoids the overhead of storing, retrieving, and maintaining state information for each user.</span></span>
* <span data-ttu-id="17770-131">**Используйте преимущества функций автомасштабирования платформы.**</span><span class="sxs-lookup"><span data-stu-id="17770-131">**Take advantage of platform autoscaling features**.</span></span> <span data-ttu-id="17770-132">Если платформа размещения поддерживает возможность автомасштабирования, например автомасштабирование Azure, отдавайте ей предпочтение вместо пользовательских или сторонних механизмов масштабирования, если, конечно встроенный механизм удовлетворяет вашим требованиям.</span><span class="sxs-lookup"><span data-stu-id="17770-132">Where the hosting platform supports an autoscaling capability, such as Azure Autoscale, prefer it to custom or third-party mechanisms unless the built-in mechanism can't fulfill your requirements.</span></span> <span data-ttu-id="17770-133">Используйте, где возможно, правила масштабирования по расписанию, чтобы ресурсы были доступны без задержки при запуске, но добавьте в правила реактивное автомасштабирование, если это уместно, чтобы справляться с неожиданными изменениями нагрузки.</span><span class="sxs-lookup"><span data-stu-id="17770-133">Use scheduled scaling rules where possible to ensure resources are available without a start-up delay, but add reactive autoscaling to the rules where appropriate to cope with unexpected changes in demand.</span></span> <span data-ttu-id="17770-134">Вы можете использовать операции автомасштабирования в API управления службами для настройки автомасштабирования и добавления пользовательских счетчиков в правила.</span><span class="sxs-lookup"><span data-stu-id="17770-134">You can use the autoscaling operations in the Service Management API to adjust autoscaling, and to add custom counters to rules.</span></span> <span data-ttu-id="17770-135">Дополнительные сведения см. в [руководстве по автомасштабированию](../best-practices/auto-scaling.md).</span><span class="sxs-lookup"><span data-stu-id="17770-135">For more information, see [Auto-scaling guidance](../best-practices/auto-scaling.md).</span></span>
* <span data-ttu-id="17770-136">**Выгрузите ресурсоемкие задачи процессора и ввода-вывода в фоновые задачи.**</span><span class="sxs-lookup"><span data-stu-id="17770-136">**Offload intensive CPU/IO tasks as background tasks**.</span></span> <span data-ttu-id="17770-137">Если ожидается, что выполнение запроса к службе потребует значительного времени или ресурсов, выгрузите обработку запроса в отдельную задачу.</span><span class="sxs-lookup"><span data-stu-id="17770-137">If a request to a service is expected to take a long time to run or absorb considerable resources, offload the processing for this request to a separate task.</span></span> <span data-ttu-id="17770-138">Для выполнения этих задач можно использовать рабочие роли или фоновые задания (в зависимости от платформы размещения).</span><span class="sxs-lookup"><span data-stu-id="17770-138">Use worker roles or background jobs (depending on the hosting platform) to execute these tasks.</span></span> <span data-ttu-id="17770-139">Эта стратегия позволяет службе по-прежнему получать запросы и отвечать на них.</span><span class="sxs-lookup"><span data-stu-id="17770-139">This strategy enables the service to continue receiving further requests and remain responsive.</span></span>  <span data-ttu-id="17770-140">Дополнительные сведения см. в [руководстве по фоновым заданиям](../best-practices/background-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="17770-140">For more information, see [Background jobs guidance](../best-practices/background-jobs.md).</span></span>
* <span data-ttu-id="17770-141">**Распределяйте рабочую нагрузку для фоновых задач**.</span><span class="sxs-lookup"><span data-stu-id="17770-141">**Distribute the workload for background tasks**.</span></span> <span data-ttu-id="17770-142">При наличии многих фоновых задач или задач, требующих значительного времени и ресурсов, распределяйте нагрузку среди нескольких вычислительных единиц (рабочих ролей или фоновых заданий).</span><span class="sxs-lookup"><span data-stu-id="17770-142">Where there are many background tasks, or the tasks require considerable time or resources, spread the work across multiple compute units (such as worker roles or background jobs).</span></span> <span data-ttu-id="17770-143">Одним из возможных решений выступает [шаблон конкурирующих потребителей](https://msdn.microsoft.com/library/dn568101.aspx).</span><span class="sxs-lookup"><span data-stu-id="17770-143">For one possible solution, see the [Competing Consumers Pattern](https://msdn.microsoft.com/library/dn568101.aspx).</span></span>
* <span data-ttu-id="17770-144">**Рассмотрите возможность перехода к *неразделяемой* архитектуре**.</span><span class="sxs-lookup"><span data-stu-id="17770-144">**Consider moving towards a *shared-nothing* architecture**.</span></span> <span data-ttu-id="17770-145">Неразделяемая архитектура использует независимые, самостоятельные узлы, не имеющие единых точек конфликтов, например общих служб или общего хранилища.</span><span class="sxs-lookup"><span data-stu-id="17770-145">A shared-nothing architecture uses independent, self-sufficient nodes that have no single point of contention (such as shared services or storage).</span></span> <span data-ttu-id="17770-146">Теоретически такую систему можно масштабировать практически бесконечно.</span><span class="sxs-lookup"><span data-stu-id="17770-146">In theory, such a system can scale almost indefinitely.</span></span> <span data-ttu-id="17770-147">Хотя обычно неразделяемая архитектура для большинства приложений не подходит, она может обеспечить структурные возможности для повышения масштабируемости.</span><span class="sxs-lookup"><span data-stu-id="17770-147">While a fully shared-nothing approach is generally not practical for most applications, it may provide opportunities to design for better scalability.</span></span> <span data-ttu-id="17770-148">Например, отказ от использования состояния сеанса на стороне сервера, сходства клиента и секционирования данных являются хорошими примерами перехода к неразделяемой архитектуре.</span><span class="sxs-lookup"><span data-stu-id="17770-148">For example, avoiding the use of server-side session state, client affinity, and data partitioning are good examples of moving towards a shared-nothing architecture.</span></span>

## <a name="data-management"></a><span data-ttu-id="17770-149">Управление данными</span><span class="sxs-lookup"><span data-stu-id="17770-149">Data management</span></span>
* <span data-ttu-id="17770-150">**Используйте разделение данных.**</span><span class="sxs-lookup"><span data-stu-id="17770-150">**Use data partitioning**.</span></span> <span data-ttu-id="17770-151">Разделяйте данные между несколькими базами данных и серверами базы данных или проектируйте приложения так, чтобы они использовали службы хранения данных, которые могут прозрачно реализовать такое разделение (например, это может быть эластичная база данных SQL Azure и хранилище таблиц Azure).</span><span class="sxs-lookup"><span data-stu-id="17770-151">Divide the data across multiple databases and database servers, or design the application to use data storage services that can provide this partitioning transparently (examples include Azure SQL Database Elastic Database, and Azure Table storage).</span></span> <span data-ttu-id="17770-152">Этот подход может помочь добиться максимальной производительности и обеспечивает простоту масштабирования.</span><span class="sxs-lookup"><span data-stu-id="17770-152">This approach can help to maximize performance and allow easier scaling.</span></span> <span data-ttu-id="17770-153">Существуют различные методы секционирования, например горизонтальное, вертикальное и функциональное секционирование.</span><span class="sxs-lookup"><span data-stu-id="17770-153">There are different partitioning techniques, such as horizontal, vertical, and functional.</span></span> <span data-ttu-id="17770-154">Эти методы можно комбинировать, чтобы получить максимальную выгоду от повышения производительности при обработке запросов, упрощения масштабируемости, более гибкого управления, повышенной доступности и соответствия типа хранилища предназначенным для него данным.</span><span class="sxs-lookup"><span data-stu-id="17770-154">You can use a combination of these to achieve maximum benefit from increased query performance, simpler scalability, more flexible management, better availability, and to match the type of store to the data it will hold.</span></span> <span data-ttu-id="17770-155">Кроме того, рекомендуется использовать разные виды хранилищ данных для разных типов данных, выбирая тип в зависимости от того, насколько хранилище оптимизировано для конкретного типа данных.</span><span class="sxs-lookup"><span data-stu-id="17770-155">Also, consider using different types of data store for different types of data, choosing the types based on how well they are optimized for the specific type of data.</span></span> <span data-ttu-id="17770-156">Например, вы можете использовать хранилище таблиц, базу данных документов или хранилище данных семейства столбцов вместо или в качестве реляционной базы данных.</span><span class="sxs-lookup"><span data-stu-id="17770-156">This may include using table storage, a document database, or a column-family data store, instead of, or as well as, a relational database.</span></span> <span data-ttu-id="17770-157">Дополнительные сведения см. в [руководстве по разделению данных](../best-practices/data-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="17770-157">For more information, see [Data partitioning guidance](../best-practices/data-partitioning.md).</span></span>
* <span data-ttu-id="17770-158">**Проектируйте, ориентируясь на окончательную согласованность.**</span><span class="sxs-lookup"><span data-stu-id="17770-158">**Design for eventual consistency**.</span></span> <span data-ttu-id="17770-159">Окончательная согласованность повышает масштабируемость за счет сокращения или удаления времени, необходимого для синхронизации взаимосвязанных данных, разделенных между несколькими хранилищами.</span><span class="sxs-lookup"><span data-stu-id="17770-159">Eventual consistency improves scalability by reducing or removing the time needed to synchronize related data partitioned across multiple stores.</span></span> <span data-ttu-id="17770-160">Расплатой будет то, что данные не всегда будут согласованными при чтении и некоторые записи операций могут вызвать конфликт.</span><span class="sxs-lookup"><span data-stu-id="17770-160">The cost is that data is not always consistent when it is read, and some write operations may cause conflicts.</span></span> <span data-ttu-id="17770-161">Окончательная согласованность идеально подходит для ситуаций, где одни и те же данные часто считываются, но редко записываются.</span><span class="sxs-lookup"><span data-stu-id="17770-161">Eventual consistency is ideal for situations where the same data is read frequently but written infrequently.</span></span> <span data-ttu-id="17770-162">Дополнительные сведения см. в [руководстве по согласованности данных](https://msdn.microsoft.com/library/dn589800.aspx).</span><span class="sxs-lookup"><span data-stu-id="17770-162">For more information, see the [Data Consistency Primer](https://msdn.microsoft.com/library/dn589800.aspx).</span></span>
* <span data-ttu-id="17770-163">**Уменьшайте неаккуратные взаимодействия между компонентами и службами**.</span><span class="sxs-lookup"><span data-stu-id="17770-163">**Reduce chatty interactions between components and services**.</span></span> <span data-ttu-id="17770-164">Избегайте проектирования взаимодействий, в которых приложению приходится делать несколько вызовов к службе (каждый из которых возвращает небольшой объем данных) вместо одного вызова, который может вернуть все данные сразу.</span><span class="sxs-lookup"><span data-stu-id="17770-164">Avoid designing interactions in which an application is required to make multiple calls to a service (each of which returns a small amount of data), rather than a single call that can return all of the data.</span></span> <span data-ttu-id="17770-165">Там, где это возможно, объединяйте несколько связанных операций в одном запросе к службе или компоненту, имеющим заметную задержку при вызове.</span><span class="sxs-lookup"><span data-stu-id="17770-165">Where possible, combine several related operations into a single request when the call is to a service or component that has noticeable latency.</span></span> <span data-ttu-id="17770-166">Это упрощает отслеживание производительности и оптимизацию сложных операций.</span><span class="sxs-lookup"><span data-stu-id="17770-166">This makes it easier to monitor performance and optimize complex operations.</span></span> <span data-ttu-id="17770-167">Например, используйте хранимые процедуры в базах данных для инкапсуляции сложной логики и уменьшения количества круговых путей и блокировки ресурсов.</span><span class="sxs-lookup"><span data-stu-id="17770-167">For example, use stored procedures in databases to encapsulate complex logic, and reduce the number of round trips and resource locking.</span></span>
* <span data-ttu-id="17770-168">**Используйте очереди до распределения нагрузки по уровням для высокоскоростной записи данных**.</span><span class="sxs-lookup"><span data-stu-id="17770-168">**Use queues to level the load for high velocity data writes**.</span></span> <span data-ttu-id="17770-169">Всплески запросов к службе могут перегрузить службу и привести к росту количества сбоев.</span><span class="sxs-lookup"><span data-stu-id="17770-169">Surges in demand for a service can overwhelm that service and cause escalating failures.</span></span> <span data-ttu-id="17770-170">Чтобы избежать этого, попробуйте реализовать [Шаблон балансировки нагрузки на основе очередей](https://msdn.microsoft.com/library/dn589783.aspx).</span><span class="sxs-lookup"><span data-stu-id="17770-170">To prevent this, consider implementing the [Queue-Based Load Leveling Pattern](https://msdn.microsoft.com/library/dn589783.aspx).</span></span> <span data-ttu-id="17770-171">Используйте очередь, которая служит буфером между задачей и вызываемой ею службой.</span><span class="sxs-lookup"><span data-stu-id="17770-171">Use a queue that acts as a buffer between a task and a service that it invokes.</span></span> <span data-ttu-id="17770-172">Это может сглаживать кратковременные всплески нагрузки, которые в противном случае могут привести к сбою службы или превышению времени ожидания задания.</span><span class="sxs-lookup"><span data-stu-id="17770-172">This can smooth intermittent heavy loads that may otherwise cause the service to fail or the task to time out.</span></span>
* <span data-ttu-id="17770-173">**Сводите к минимуму нагрузку на хранилище данных.**</span><span class="sxs-lookup"><span data-stu-id="17770-173">**Minimize the load on the data store**.</span></span> <span data-ttu-id="17770-174">Хранилище данных часто является узким местом обработки, который не всегда легко масштабировать. Где это возможно, удалите логику (например, для обработки документов XML или объектов JSON) из хранилища данных и выполняйте обработку в самом приложении.</span><span class="sxs-lookup"><span data-stu-id="17770-174">The data store is commonly a processing bottleneck, a costly resource, and often not easy to scale out. Where possible, remove logic (such as processing XML documents or JSON objects) from the data store, and perform processing within the application.</span></span> <span data-ttu-id="17770-175">Например, вместо передачи XML в базу данных (за исключением непрозрачной строки для хранения) выполните сериализацию или десериализацию XML на уровне приложения и передайте его в форму, встроенную в хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="17770-175">For example, instead of passing XML to the database (other than as an opaque string for storage), serialize or deserialize the XML within the application layer and pass it in a form that is native to the data store.</span></span> <span data-ttu-id="17770-176">Обычно гораздо проще развернуть приложение, чем хранилище данных. Поэтому рекомендуется выполнять как можно большую часть обработки, потребляющей много вычислительных ресурсов, в приложении.</span><span class="sxs-lookup"><span data-stu-id="17770-176">It's typically much easier to scale out the application than the data store, so you should attempt to do as much of the compute-intensive processing as possible within the application.</span></span>
* <span data-ttu-id="17770-177">**Сводите к минимуму объем получаемых данных**.</span><span class="sxs-lookup"><span data-stu-id="17770-177">**Minimize the volume of data retrieved**.</span></span> <span data-ttu-id="17770-178">Получайте только необходимые данные, указав столбцы и используя критерии для выбора строк.</span><span class="sxs-lookup"><span data-stu-id="17770-178">Retrieve only the data you require by specifying columns and using criteria to select rows.</span></span> <span data-ttu-id="17770-179">Регулярно используйте табличные параметры и соответствующий уровень изоляции.</span><span class="sxs-lookup"><span data-stu-id="17770-179">Make use of table value parameters and the appropriate isolation level.</span></span> <span data-ttu-id="17770-180">Используйте такие механизмы, как теги сущности, чтобы избежать ненужного извлечения данных.</span><span class="sxs-lookup"><span data-stu-id="17770-180">Use mechanisms like entity tags to avoid retrieving data unnecessarily.</span></span>
* <span data-ttu-id="17770-181">**Интенсивно используйте кэширование.**</span><span class="sxs-lookup"><span data-stu-id="17770-181">**Aggressively use caching**.</span></span> <span data-ttu-id="17770-182">Используйте кэширование везде, где это возможно, чтобы снизить нагрузку на ресурсы и службы создания и доставки данных.</span><span class="sxs-lookup"><span data-stu-id="17770-182">Use caching wherever possible to reduce the load on resources and services that generate or deliver data.</span></span> <span data-ttu-id="17770-183">Кэширование обычно подходит для относительно статичных или требующих значительной обработки при получении данных.</span><span class="sxs-lookup"><span data-stu-id="17770-183">Caching is typically suited to data that is relatively static, or that requires considerable processing to obtain.</span></span> <span data-ttu-id="17770-184">Кэширование должно выполняться на всех уровнях в каждом слое приложения, где это нужно, включая доступ к данным и создание пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="17770-184">Caching should occur at all levels where appropriate in each layer of the application, including data access and user interface generation.</span></span> <span data-ttu-id="17770-185">Дополнительные сведения см. в [руководстве по кэшированию](../best-practices/caching.md).</span><span class="sxs-lookup"><span data-stu-id="17770-185">For more information, see the [Caching Guidance](../best-practices/caching.md).</span></span>
* <span data-ttu-id="17770-186">**Решайте проблему увеличения объема данных и их хранения.**</span><span class="sxs-lookup"><span data-stu-id="17770-186">**Handle data growth and retention**.</span></span> <span data-ttu-id="17770-187">Объем данных, хранящихся в приложении, со временем увеличивается.</span><span class="sxs-lookup"><span data-stu-id="17770-187">The amount of data stored by an application grows over time.</span></span> <span data-ttu-id="17770-188">Такой рост объема данных приводит к росту затрат на хранение и увеличению задержки при доступе к данным, что влияет на пропускную способность приложения и его производительность.</span><span class="sxs-lookup"><span data-stu-id="17770-188">This growth increases storage costs, and increases latency when accessing the data — which affects application throughput and performance.</span></span> <span data-ttu-id="17770-189">Возможно, лучше архивировать некоторые старые данные, доступ к которым больше не требуется, или перенести данные, доступ к которым осуществляется редко, в долговременное хранилище. Это поможет оптимизировать расходы, даже если задержка вырастет.</span><span class="sxs-lookup"><span data-stu-id="17770-189">It may be possible to periodically archive some of the old data that is no longer accessed, or move data that is rarely accessed into long-term storage that is more cost efficient, even if the access latency is higher.</span></span>
* <span data-ttu-id="17770-190">**Оптимизируйте объекты переноса данных, используя эффективный двоичный формат**.</span><span class="sxs-lookup"><span data-stu-id="17770-190">**Optimize Data Transfer Objects (DTOs) using an efficient binary format**.</span></span> <span data-ttu-id="17770-191">Объекты переноса данных многократно передаются между уровнями приложения.</span><span class="sxs-lookup"><span data-stu-id="17770-191">DTOs are passed between the layers of an application many times.</span></span> <span data-ttu-id="17770-192">Если свести к минимуму их размер, это уменьшит нагрузку на ресурсы и сеть.</span><span class="sxs-lookup"><span data-stu-id="17770-192">Minimizing the size reduces the load on resources and the network.</span></span> <span data-ttu-id="17770-193">Тем не менее следует соотнести экономию с затратами на преобразование данных в требуемый формат в каждом расположении, в котором он используется.</span><span class="sxs-lookup"><span data-stu-id="17770-193">However, balance the savings with the overhead of converting the data to the required format in each location where it is used.</span></span> <span data-ttu-id="17770-194">Применяйте формат, который обеспечивает максимальную совместимость, чтобы упростить повторное использование компонента.</span><span class="sxs-lookup"><span data-stu-id="17770-194">Adopt a format that has the maximum interoperability to enable easy reuse of a component.</span></span>
* <span data-ttu-id="17770-195">**Задайте управление кэшем**.</span><span class="sxs-lookup"><span data-stu-id="17770-195">**Set cache control**.</span></span> <span data-ttu-id="17770-196">Проектируйте и настраивайте приложение для использования кэширования вывода или фрагментарного кэширования, где это возможно, чтобы свести к минимуму нагрузку при обработке.</span><span class="sxs-lookup"><span data-stu-id="17770-196">Design and configure the application to use output caching or fragment caching where possible, to minimize processing load.</span></span>
* <span data-ttu-id="17770-197">**Включайте кэширование на стороне клиента**.</span><span class="sxs-lookup"><span data-stu-id="17770-197">**Enable client side caching**.</span></span> <span data-ttu-id="17770-198">Веб-приложения должны поддерживать параметры кэширования содержимого, которое допускает кэширование.</span><span class="sxs-lookup"><span data-stu-id="17770-198">Web applications should enable cache settings on the content that can be cached.</span></span> <span data-ttu-id="17770-199">Как правило, эта возможность отключена по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="17770-199">This is commonly disabled by default.</span></span> <span data-ttu-id="17770-200">Настройте сервер для отправки соответствующих заголовков управления кэшем для включения кэширования содержимого на прокси-серверах и клиентах.</span><span class="sxs-lookup"><span data-stu-id="17770-200">Configure the server to deliver the appropriate cache control headers to enable caching of content on proxy servers and clients.</span></span>
* <span data-ttu-id="17770-201">**Используйте хранилище BLOB-объектов Azure и сеть доставки содержимого Azure для снижения нагрузки на приложение.**</span><span class="sxs-lookup"><span data-stu-id="17770-201">**Use Azure blob storage and the Azure Content Delivery Network to reduce the load on the application**.</span></span> <span data-ttu-id="17770-202">Рассмотрите возможность хранения статического или относительно статического общедоступного содержимого, такого как изображения, ресурсы, сценарии и стили в хранилище BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="17770-202">Consider storing static or relatively static public content, such as images, resources, scripts, and style sheets, in blob storage.</span></span> <span data-ttu-id="17770-203">Этот подход снимает нагрузку с приложения, вызванную динамической генерацией этого содержимого для каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="17770-203">This approach relieves the application of the load caused by dynamically generating this content for each request.</span></span> <span data-ttu-id="17770-204">Кроме того, рассмотрите возможность использования сети доставки содержимого для кэширования этого содержимого и его доставки на клиенты.</span><span class="sxs-lookup"><span data-stu-id="17770-204">Additionally, consider using the Content Delivery Network to cache this content and deliver it to clients.</span></span> <span data-ttu-id="17770-205">Использование сети доставки содержимого может повысить производительность на стороне клиента, так как содержимое доставляется из ближайшего центра обработки данных, содержащего кэш сети доставки содержимого.</span><span class="sxs-lookup"><span data-stu-id="17770-205">Using the Content Delivery Network can improve performance at the client because the content is delivered from the geographically closest datacenter that contains a Content Delivery Network cache.</span></span> <span data-ttu-id="17770-206">Дополнительные сведения см. в [руководстве по сети доставки содержимого](../best-practices/cdn.md).</span><span class="sxs-lookup"><span data-stu-id="17770-206">For more information, see the [Content Delivery Network Guidance](../best-practices/cdn.md).</span></span>
* <span data-ttu-id="17770-207">**Оптимизируйте и настраивайте SQL-запросы и индексы.**</span><span class="sxs-lookup"><span data-stu-id="17770-207">**Optimize and tune SQL queries and indexes**.</span></span> <span data-ttu-id="17770-208">Некоторые инструкции или конструкции T-SQL могут отрицательно повлиять на производительность, и это влияние можно уменьшить путем оптимизации кода в хранимой процедуре.</span><span class="sxs-lookup"><span data-stu-id="17770-208">Some T-SQL statements or constructs may have an impact on performance that can be reduced by optimizing the code in a stored procedure.</span></span> <span data-ttu-id="17770-209">Например, избегайте преобразования типов **datetime** в **varchar** перед сравнением с литеральным значением **datetime**.</span><span class="sxs-lookup"><span data-stu-id="17770-209">For example, avoid converting **datetime** types to a **varchar** before comparing with a **datetime** literal value.</span></span> <span data-ttu-id="17770-210">Вместо этого используйте функции сравнения даты и времени.</span><span class="sxs-lookup"><span data-stu-id="17770-210">Use date/time comparison functions instead.</span></span> <span data-ttu-id="17770-211">Отсутствие соответствующих индексов может также замедлить выполнение запроса.</span><span class="sxs-lookup"><span data-stu-id="17770-211">Lack of appropriate indexes can also slow query execution.</span></span> <span data-ttu-id="17770-212">При использовании объектно-реляционного сопоставления учитывайте специфику платформы и то, как она может повлиять на производительность уровня доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="17770-212">If you use an object/relational mapping framework, understand how it works and how it may affect performance of the data access layer.</span></span> <span data-ttu-id="17770-213">Дополнительные сведения см. в статье [Query Tuning](https://technet.microsoft.com/library/ms176005.aspx) (Настройка запросов).</span><span class="sxs-lookup"><span data-stu-id="17770-213">For more information, see [Query Tuning](https://technet.microsoft.com/library/ms176005.aspx).</span></span>
* <span data-ttu-id="17770-214">**Используйте денормализацию данных.**</span><span class="sxs-lookup"><span data-stu-id="17770-214">**Consider de-normalizing data**.</span></span> <span data-ttu-id="17770-215">Нормализация данных помогает избежать дублирования и несогласованности данных.</span><span class="sxs-lookup"><span data-stu-id="17770-215">Data normalization helps to avoid duplication and inconsistency.</span></span> <span data-ttu-id="17770-216">Тем не менее обслуживание нескольких индексов, проверка целостности данных, выполнение нескольких обращений к небольшим блокам данных и соединение таблиц для пересборки данных вызывают нагрузку, которая может повлиять на производительность.</span><span class="sxs-lookup"><span data-stu-id="17770-216">However, maintaining multiple indexes, checking for referential integrity, performing multiple accesses to small chunks of data, and joining tables to reassemble the data imposes an overhead that can affect performance.</span></span> <span data-ttu-id="17770-217">Попробуйте использовать дополнительное пространство тома и дублирование данных для снижения нагрузки на хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="17770-217">Consider if some additional storage volume and duplication is acceptable in order to reduce the load on the data store.</span></span> <span data-ttu-id="17770-218">Кроме того, рекомендуется учесть возможность переложить такие задачи, как управление целостностью данных, на само приложение (которое, как правило, легче масштабировать), чтобы снизить нагрузку на хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="17770-218">Also, consider if the application itself (which is typically easier to scale) can be relied upon to take over tasks such as managing referential integrity in order to reduce the load on the data store.</span></span> <span data-ttu-id="17770-219">Дополнительные сведения см. в [руководстве по разделению данных](../best-practices/data-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="17770-219">For more information, see [Data partitioning guidance](../best-practices/data-partitioning.md).</span></span>

## <a name="service-implementation"></a><span data-ttu-id="17770-220">Реализация службы</span><span class="sxs-lookup"><span data-stu-id="17770-220">Service implementation</span></span>
* <span data-ttu-id="17770-221">**Используйте асинхронные вызовы**.</span><span class="sxs-lookup"><span data-stu-id="17770-221">**Use asynchronous calls**.</span></span> <span data-ttu-id="17770-222">Чтобы избежать блокировки потока вызовов, по возможности используйте асинхронный код доступа к ресурсам или службам, которые могут быть ограничены пропускной способностью сети или подсистемы ввода-вывода, или иметь заметную задержку.</span><span class="sxs-lookup"><span data-stu-id="17770-222">Use asynchronous code wherever possible when accessing resources or services that may be limited by I/O or network bandwidth, or that have a noticeable latency, in order to avoid locking the calling thread.</span></span> <span data-ttu-id="17770-223">Используйте [асинхронную модель на основе задач](https://msdn.microsoft.com/library/hh873175.aspx)для реализации асинхронных операций.</span><span class="sxs-lookup"><span data-stu-id="17770-223">To implement asynchronous operations, use the [Task-based Asynchronous Pattern (TAP)](https://msdn.microsoft.com/library/hh873175.aspx).</span></span>
* <span data-ttu-id="17770-224">**Избегайте блокировки ресурсов и вместо этого используйте оптимистичный подход**.</span><span class="sxs-lookup"><span data-stu-id="17770-224">**Avoid locking resources, and use an optimistic approach instead**.</span></span> <span data-ttu-id="17770-225">Никогда не блокируйте доступ к ресурсам хранилища или другим службам, имеющим ощутимую задержку, поскольку это — основная причина снижения производительности.</span><span class="sxs-lookup"><span data-stu-id="17770-225">Never lock access to resources such as storage or other services that have noticeable latency, because this is a primary cause of poor performance.</span></span> <span data-ttu-id="17770-226">Всегда используйте оптимистичные подходы к управлению параллельными операциями, такими как запись в хранилище.</span><span class="sxs-lookup"><span data-stu-id="17770-226">Always use optimistic approaches to managing concurrent operations, such as writing to storage.</span></span> <span data-ttu-id="17770-227">Используйте возможности хранилища для управления конфликтами.</span><span class="sxs-lookup"><span data-stu-id="17770-227">Use features of the storage layer to manage conflicts.</span></span> <span data-ttu-id="17770-228">В распределенных приложениях данные могут быть согласованными только в конечном итоге.</span><span class="sxs-lookup"><span data-stu-id="17770-228">In distributed applications, data may be only eventually consistent.</span></span>
* <span data-ttu-id="17770-229">**Используйте данные с высокой степенью сжатия в сетях с высокими задержками и низкой пропускной способностью**.</span><span class="sxs-lookup"><span data-stu-id="17770-229">**Compress highly compressible data over high latency, low bandwidth networks**.</span></span> <span data-ttu-id="17770-230">В большинстве случаев в веб-приложении наибольший объем данных, создаваемых приложением и передаваемых по сети, является HTTP-ответами на запросы клиентов.</span><span class="sxs-lookup"><span data-stu-id="17770-230">In the majority of cases in a web application, the largest volume of data generated by the application and passed over the network is HTTP responses to client requests.</span></span> <span data-ttu-id="17770-231">Сжатие HTTP позволяет значительно уменьшить объем этих данных, особенно для статического содержимого.</span><span class="sxs-lookup"><span data-stu-id="17770-231">HTTP compression can reduce this considerably, especially for static content.</span></span> <span data-ttu-id="17770-232">Таким образом можно сэкономить на затратах, а также снизить нагрузку на сеть, хотя сжатие динамического содержимого создает чуть большую нагрузку на сервер.</span><span class="sxs-lookup"><span data-stu-id="17770-232">This can reduce cost as well as reducing the load on the network, though compressing dynamic content does apply a fractionally higher load on the server.</span></span> <span data-ttu-id="17770-233">В более универсальных средах сжатие данных позволяет уменьшить объем передаваемых данных и свести к минимуму время передачи и затраты, но при этом добавляет издержки, связанные с процессами сжатия и распаковки.</span><span class="sxs-lookup"><span data-stu-id="17770-233">In other, more generalized environments, data compression can reduce the volume of data transmitted and minimize transfer time and costs, but the compression and decompression processes incur overhead.</span></span> <span data-ttu-id="17770-234">По существу сжатие следует использовать только при наличии очевидного выигрыша в производительности.</span><span class="sxs-lookup"><span data-stu-id="17770-234">As such, compression should only be used when there is a demonstrable gain in performance.</span></span> <span data-ttu-id="17770-235">Другие методы сериализации, например кодирование JSON или двоичное кодирование, могут уменьшить размер полезных данных, снижая отрицательное влияние на производительность, тогда как XML, вероятнее всего, увеличит это влияние.</span><span class="sxs-lookup"><span data-stu-id="17770-235">Other serialization methods, such as JSON or binary encodings, may reduce the payload size while having less impact on performance, whereas XML is likely to increase it.</span></span>
* <span data-ttu-id="17770-236">**Сводите к минимуму время использования ресурсов и подключений**.</span><span class="sxs-lookup"><span data-stu-id="17770-236">**Minimize the time that connections and resources are in use**.</span></span> <span data-ttu-id="17770-237">Обслуживайте подключения и ресурсы только тогда, когда необходимо использовать их.</span><span class="sxs-lookup"><span data-stu-id="17770-237">Maintain connections and resources only for as long as you need to use them.</span></span> <span data-ttu-id="17770-238">Например, как можно позже открывайте подключения и обеспечьте их как можно более быстрый возврат в пул подключений.</span><span class="sxs-lookup"><span data-stu-id="17770-238">For example, open connections as late as possible, and allow them to be returned to the connection pool as soon as possible.</span></span> <span data-ttu-id="17770-239">Получайте ресурсы как можно позднее и освобождайте их как можно раньше.</span><span class="sxs-lookup"><span data-stu-id="17770-239">Acquire resources as late as possible, and dispose of them as soon as possible.</span></span>
* <span data-ttu-id="17770-240">**Сводите к минимуму число необходимых подключений**.</span><span class="sxs-lookup"><span data-stu-id="17770-240">**Minimize the number of connections required**.</span></span> <span data-ttu-id="17770-241">Подключения к службе требуют ресурсов.</span><span class="sxs-lookup"><span data-stu-id="17770-241">Service connections absorb resources.</span></span> <span data-ttu-id="17770-242">Ограничьте число обязательных подключений и обеспечьте повторное использование существующих подключений (если возможно).</span><span class="sxs-lookup"><span data-stu-id="17770-242">Limit the number that are required and ensure that existing connections are reused whenever possible.</span></span> <span data-ttu-id="17770-243">Например, после выполнения проверки подлинности, используйте олицетворение, где это необходимо, для запуска кода в качестве определенного удостоверения.</span><span class="sxs-lookup"><span data-stu-id="17770-243">For example, after performing authentication, use impersonation where appropriate to run code as a specific identity.</span></span> <span data-ttu-id="17770-244">Это позволяет наиболее эффективно использовать пул подключений путем повторного использования соединений.</span><span class="sxs-lookup"><span data-stu-id="17770-244">This can help to make best use of the connection pool by reusing connections.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="17770-245">Интерфейсы API некоторых служб автоматически используют готовые соединения при условии соблюдения требований конкретной службы.</span><span class="sxs-lookup"><span data-stu-id="17770-245">: APIs for some services automatically reuse connections, provided service-specific guidelines are followed.</span></span> <span data-ttu-id="17770-246">Важно понимать условия повторного использования имеющегося соединения каждой службой, используемой в вашем приложении.</span><span class="sxs-lookup"><span data-stu-id="17770-246">It's important that you understand the conditions that enable connection reuse for each service that your application uses.</span></span>
  > 
  > 
* <span data-ttu-id="17770-247">**Отправляйте запросы пакетами, чтобы оптимизировать использование сети**.</span><span class="sxs-lookup"><span data-stu-id="17770-247">**Send requests in batches to optimize network use**.</span></span> <span data-ttu-id="17770-248">Например, при доступе к очереди выполняйте операции передачи и чтения сообщений в пакетах и при доступе к хранилищу или кэшу выполняйте по несколько операций чтения или записи в пакете.</span><span class="sxs-lookup"><span data-stu-id="17770-248">For example, send and read messages in batches when accessing a queue, and perform multiple reads or writes as a batch when accessing storage or a cache.</span></span> <span data-ttu-id="17770-249">Этот подход может помочь добиться максимальной эффективности служб и хранилищ данных за счет сокращения числа вызовов по сети.</span><span class="sxs-lookup"><span data-stu-id="17770-249">This can help to maximize efficiency of the services and data stores by reducing the number of calls across the network.</span></span>
* <span data-ttu-id="17770-250">**Избегайте обязательного хранения состояния сеанса на стороне сервера там, где это возможно.**</span><span class="sxs-lookup"><span data-stu-id="17770-250">**Avoid a requirement to store server-side session state** where possible.</span></span> <span data-ttu-id="17770-251">Управление состоянием сеанса на стороне сервера обычно требует сходства клиента (т. е. маршрутизации каждого запроса к тому же экземпляру сервера), что влияет на возможность масштабирования системы.</span><span class="sxs-lookup"><span data-stu-id="17770-251">Server-side session state management typically requires client affinity (that is, routing each request to the same server instance), which affects the ability of the system to scale.</span></span> <span data-ttu-id="17770-252">В идеале следует разрабатывать клиенты без отслеживания состояния по отношению к используемым серверам.</span><span class="sxs-lookup"><span data-stu-id="17770-252">Ideally, you should design clients to be stateless with respect to the servers that they use.</span></span> <span data-ttu-id="17770-253">Однако если в приложении нужно поддерживать состояние сеанса, храните конфиденциальные данные или данные большого объема для каждого клиента в распределенном кэше на стороне сервера, где все экземпляры приложения могут получить к ним доступ.</span><span class="sxs-lookup"><span data-stu-id="17770-253">However, if the application must maintain session state, store sensitive data or large volumes of per-client data in a distributed server-side cache that all instances of the application can access.</span></span>
* <span data-ttu-id="17770-254">**Оптимизируйте схемы табличного хранилища**.</span><span class="sxs-lookup"><span data-stu-id="17770-254">**Optimize table storage schemas**.</span></span> <span data-ttu-id="17770-255">При использовании хранилищ таблиц, например хранилища таблиц Azure, которые требуют при передаче и обработке каждого запроса указывать имена таблиц и столбцов, рассмотрите возможность использования более коротких имен, чтобы снизить затраты.</span><span class="sxs-lookup"><span data-stu-id="17770-255">When using table stores that require the table and column names to be passed and processed with every query, such as Azure table storage, consider using shorter names to reduce this overhead.</span></span> <span data-ttu-id="17770-256">Тем не менее не жертвуйте удобочитаемостью или управляемостью ради слишком сокращенных имен.</span><span class="sxs-lookup"><span data-stu-id="17770-256">However, do not sacrifice readability or manageability by using overly compact names.</span></span>
* <span data-ttu-id="17770-257">**Используйте библиотеку параллельных задач (TPL) для выполнения асинхронных операций**.</span><span class="sxs-lookup"><span data-stu-id="17770-257">**Use the Task Parallel Library (TPL) to perform asynchronous operations**.</span></span> <span data-ttu-id="17770-258">Библиотека TPL упрощает создание асинхронного кода, выполняющего операции ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="17770-258">The TPL makes it easy to write asynchronous code that performs I/O-bound operations.</span></span> <span data-ttu-id="17770-259">Используйте *ConfigureAwait(false)* везде, где это возможно, чтобы устранить зависимость продолжения от конкретного контекста синхронизации.</span><span class="sxs-lookup"><span data-stu-id="17770-259">Use *ConfigureAwait(false)* wherever possible to eliminate the dependency of a continuation on a specific synchronization context.</span></span> <span data-ttu-id="17770-260">Это снижает вероятность взаимоблокировки потоков.</span><span class="sxs-lookup"><span data-stu-id="17770-260">This reduces the chances of thread-deadlock occurring.</span></span>
* <span data-ttu-id="17770-261">**Создавайте зависимости ресурсов во время развертывания или при запуске приложения.**</span><span class="sxs-lookup"><span data-stu-id="17770-261">**Create resource dependencies during deployment or at application startup**.</span></span> <span data-ttu-id="17770-262">Избегайте повторяющихся вызовов методов, которые проверяют существование ресурса, а затем создают ресурс, если он не существует.</span><span class="sxs-lookup"><span data-stu-id="17770-262">Avoid repeated calls to methods that test the existence of a resource and then create the resource if it does not exist.</span></span> <span data-ttu-id="17770-263">(Так функционируют такие методы, как *CloudTable.CreateIfNotExists* и *CloudQueue.CreateIfNotExists* в клиентской библиотеке хранилища Azure.)</span><span class="sxs-lookup"><span data-stu-id="17770-263">(Methods such as *CloudTable.CreateIfNotExists* and *CloudQueue.CreateIfNotExists* in the Azure Storage Client Library follow this pattern).</span></span> <span data-ttu-id="17770-264">Эти методы могут привести к значительным издержкам, если они вызываются перед каждым доступом к таблице или очереди хранилища.</span><span class="sxs-lookup"><span data-stu-id="17770-264">These methods can impose considerable overhead if they are invoked before each access to a storage table or storage queue.</span></span> <span data-ttu-id="17770-265">Вот как следует поступить вместо этого.</span><span class="sxs-lookup"><span data-stu-id="17770-265">Instead:</span></span>
  * <span data-ttu-id="17770-266">При развертывании приложения или при первом запуске создайте необходимые ресурсы (будет достаточно одного вызова *CreateIfNotExists* для каждого ресурса в коде запуска для рабочих и веб-ролей).</span><span class="sxs-lookup"><span data-stu-id="17770-266">Create the required resources when the application is deployed, or when it first starts (a single call to *CreateIfNotExists* for each resource in the startup code for a web or worker role is acceptable).</span></span> <span data-ttu-id="17770-267">Тем не менее необходимо обрабатывать исключения, которые могут возникнуть, если код пытается получить доступ к несуществующему ресурсу.</span><span class="sxs-lookup"><span data-stu-id="17770-267">However, be sure to handle exceptions that may arise if your code attempts to access a resource that doesn't exist.</span></span> <span data-ttu-id="17770-268">В таких случаях следует занести исключение в журнал и уведомить оператора, что ресурс отсутствует.</span><span class="sxs-lookup"><span data-stu-id="17770-268">In these situations, you should log the exception, and possibly alert an operator that a resource is missing.</span></span>
  * <span data-ttu-id="17770-269">В некоторых случаях можно добавить создание отсутствующего ресурса в код обработки исключений.</span><span class="sxs-lookup"><span data-stu-id="17770-269">Under some circumstances, it may be appropriate to create the missing resource as part of the exception handling code.</span></span> <span data-ttu-id="17770-270">Однако этот подход следует реализовать с осторожностью, так как отсутствие ресурса может быть признаком программной ошибки (например, имя ресурса написано с ошибкой) или какой-либо другой проблемы на уровне инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="17770-270">But you should adopt this approach with caution as the non-existence of the resource might be indicative of a programming error (a misspelled resource name for example), or some other infrastructure-level issue.</span></span>
* <span data-ttu-id="17770-271">**Используйте легковесные платформы**.</span><span class="sxs-lookup"><span data-stu-id="17770-271">**Use lightweight frameworks**.</span></span> <span data-ttu-id="17770-272">Тщательно выбирайте интерфейсы API и платформы, которые позволяют свести к минимуму использование ресурсов, время выполнения и общую нагрузку на приложение.</span><span class="sxs-lookup"><span data-stu-id="17770-272">Carefully choose the APIs and frameworks you use to minimize resource usage, execution time, and overall load on the application.</span></span> <span data-ttu-id="17770-273">Например, используя веб-API для обработки запросов к службе можно уменьшить занимаемое место приложения и повысить скорость выполнения, но этот вариант может не подойти для более сложных сценариев, где требуются дополнительные возможности Windows Communication Foundation.</span><span class="sxs-lookup"><span data-stu-id="17770-273">For example, using Web API to handle service requests can reduce the application footprint and increase execution speed, but it may not be suitable for advanced scenarios where the additional capabilities of Windows Communication Foundation are required.</span></span>
* <span data-ttu-id="17770-274">**Рекомендуем минимизировать количество учетных записей службы**.</span><span class="sxs-lookup"><span data-stu-id="17770-274">**Consider minimizing the number of service accounts**.</span></span> <span data-ttu-id="17770-275">Используйте определенную учетную запись для доступа к ресурсам или службам, которые накладывают ограничения на подключения или выполняются быстрее, если обслуживается меньшее количество подключений.</span><span class="sxs-lookup"><span data-stu-id="17770-275">For example, use a specific account to access resources or services that impose a limit on connections, or perform better where fewer connections are maintained.</span></span> <span data-ttu-id="17770-276">Этот подход часто используется для служб, таких как базы данных, но при этом он может повлиять на возможность точно контролировать операции из-за олицетворения исходного пользователя.</span><span class="sxs-lookup"><span data-stu-id="17770-276">This approach is common for services such as databases, but it can affect the ability to accurately audit operations due to the impersonation of the original user.</span></span>
* <span data-ttu-id="17770-277">**Выполняйте профилирование производительности и нагрузочное тестирование** во время разработки (как часть процедуры тестирования) и до выпуска окончательной версии, чтобы убедиться, что приложение надлежащим образом работает и масштабируется.</span><span class="sxs-lookup"><span data-stu-id="17770-277">**Carry out performance profiling and load testing** during development, as part of test routines, and before final release to ensure the application performs and scales as required.</span></span> <span data-ttu-id="17770-278">Тестирование должно выполняться на том же типе оборудования, что и производственная платформа, и с теми же типами и объемами данных и пользовательской нагрузкой, которые будут встречаться в производственной среде.</span><span class="sxs-lookup"><span data-stu-id="17770-278">This testing should occur on the same type of hardware as the production platform, and with the same types and quantities of data and user load as it will encounter in production.</span></span> <span data-ttu-id="17770-279">Дополнительные сведения см. на странице [Тестирование производительности облачной службы](/azure/vs-azure-tools-performance-profiling-cloud-services/).</span><span class="sxs-lookup"><span data-stu-id="17770-279">For more information, see [Testing the performance of a cloud service](/azure/vs-azure-tools-performance-profiling-cloud-services/).</span></span>

