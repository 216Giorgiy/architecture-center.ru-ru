---
title: Масштабируемое веб-приложение
description: Повышение масштабируемости в веб-приложении, работающем в Microsoft Azure.
author: MikeWasson
ms.date: 10/25/2018
ms.openlocfilehash: dd1fa30b6ac8d978ad0151c8753951d848d60664
ms.sourcegitcommit: 877777094b554559dc9cb1f0d9214d6d38197439
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/11/2018
ms.locfileid: "51527615"
---
# <a name="improve-scalability-in-an-azure-web-application"></a><span data-ttu-id="410cd-103">Повышение масштабируемости в веб-приложении Azure</span><span class="sxs-lookup"><span data-stu-id="410cd-103">Improve scalability in an Azure web application</span></span>

<span data-ttu-id="410cd-104">На схеме этой эталонной архитектуры представлены сведения о проверенных методах улучшения масштабируемости и производительности в службе приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="410cd-104">This reference architecture shows proven practices for improving scalability and performance in an Azure App Service web application.</span></span>

<span data-ttu-id="410cd-105">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="410cd-105">![[0]][0]</span></span>

<span data-ttu-id="410cd-106">*Скачайте [файл Visio][visio-download] этой архитектуры.*</span><span class="sxs-lookup"><span data-stu-id="410cd-106">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="410cd-107">Архитектура</span><span class="sxs-lookup"><span data-stu-id="410cd-107">Architecture</span></span>

<span data-ttu-id="410cd-108">Эта архитектура создана на основе архитектуры, описанной в статье [Basic web application][basic-web-app] (Базовое веб-приложение).</span><span class="sxs-lookup"><span data-stu-id="410cd-108">This architecture builds on the one shown in [Basic web application][basic-web-app].</span></span> <span data-ttu-id="410cd-109">Она содержит следующие компоненты:</span><span class="sxs-lookup"><span data-stu-id="410cd-109">It includes the following components:</span></span>

* <span data-ttu-id="410cd-110">**Группа ресурсов**.</span><span class="sxs-lookup"><span data-stu-id="410cd-110">**Resource group**.</span></span> <span data-ttu-id="410cd-111">[Группа ресурсов][resource-group] — это логический контейнер для ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="410cd-111">A [resource group][resource-group] is a logical container for Azure resources.</span></span>
* <span data-ttu-id="410cd-112">**[Веб-приложение][app-service-web-app]**.</span><span class="sxs-lookup"><span data-stu-id="410cd-112">**[Web app][app-service-web-app]**.</span></span> <span data-ttu-id="410cd-113">Обычно современное приложение может включать в себя и веб-сайт, и один (или несколько) веб-API RESTful.</span><span class="sxs-lookup"><span data-stu-id="410cd-113">A typical modern application might include both a website and one or more RESTful web APIs.</span></span> <span data-ttu-id="410cd-114">Веб-API может использоваться клиентами браузера через технологию AJAX с помощью собственных клиентских приложений или приложений на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="410cd-114">A web API might be consumed by browser clients through AJAX, by native client applications, or by server-side applications.</span></span> <span data-ttu-id="410cd-115">Рекомендации по разработке веб-API см. в статье [API design][api-guidance] (Проектирование API).</span><span class="sxs-lookup"><span data-stu-id="410cd-115">For considerations on designing web APIs, see [API design guidance][api-guidance].</span></span>
* <span data-ttu-id="410cd-116">**Приложение-функция**.</span><span class="sxs-lookup"><span data-stu-id="410cd-116">**Function App**.</span></span> <span data-ttu-id="410cd-117">Используйте [приложения-функции][functions] для выполнения фоновых задач.</span><span class="sxs-lookup"><span data-stu-id="410cd-117">Use [Function Apps][functions] to run background tasks.</span></span> <span data-ttu-id="410cd-118">Функции вызываются триггером, таким как событие таймера или помещаемое в очередь сообщение.</span><span class="sxs-lookup"><span data-stu-id="410cd-118">Functions are invoked by a trigger, such as a timer event or a message being placed on queue.</span></span> <span data-ttu-id="410cd-119">Для длительно выполняемых задач с отслеживанием состояния используйте [устойчивые функций][durable-functions].</span><span class="sxs-lookup"><span data-stu-id="410cd-119">For long-running stateful tasks, use [Durable Functions][durable-functions].</span></span>
* <span data-ttu-id="410cd-120">**Очередь.**</span><span class="sxs-lookup"><span data-stu-id="410cd-120">**Queue**.</span></span> <span data-ttu-id="410cd-121">В архитектуре, показанной здесь, приложение выполняет запрос фоновых заданий путем помещения сообщения в очередь [хранилища очередей Azure][queue-storage].</span><span class="sxs-lookup"><span data-stu-id="410cd-121">In the architecture shown here, the application queues background tasks by putting a message onto an [Azure Queue storage][queue-storage] queue.</span></span> <span data-ttu-id="410cd-122">Сообщение активирует приложение-функцию.</span><span class="sxs-lookup"><span data-stu-id="410cd-122">The message triggers a function app.</span></span> <span data-ttu-id="410cd-123">В качестве альтернативы можно использовать очереди служебной шины.</span><span class="sxs-lookup"><span data-stu-id="410cd-123">Alternatively, you can use Service Bus queues.</span></span> <span data-ttu-id="410cd-124">Сравнение см. в статье [Очереди службы хранилища и очереди служебной шины: сходства и различия][queues-compared].</span><span class="sxs-lookup"><span data-stu-id="410cd-124">For a comparison, see [Azure Queues and Service Bus queues - compared and contrasted][queues-compared].</span></span>
* <span data-ttu-id="410cd-125">**Кэш.**</span><span class="sxs-lookup"><span data-stu-id="410cd-125">**Cache**.</span></span> <span data-ttu-id="410cd-126">Храните полустатические данные в [кэше Redis для Azure][azure-redis].</span><span class="sxs-lookup"><span data-stu-id="410cd-126">Store semi-static data in [Azure Redis Cache][azure-redis].</span></span>  
* <span data-ttu-id="410cd-127"><strong>CDN.</strong></span><span class="sxs-lookup"><span data-stu-id="410cd-127"><strong>CDN</strong>.</span></span> <span data-ttu-id="410cd-128">Используйте [сеть доставки содержимого Azure][azure-cdn] (CDN), чтобы выполнять кэширование общедоступного содержимого с меньшей задержкой и более быстрой доставкой содержимого.</span><span class="sxs-lookup"><span data-stu-id="410cd-128">Use [Azure Content Delivery Network][azure-cdn] (CDN) to cache publicly available content for lower latency and faster delivery of content.</span></span>
* <span data-ttu-id="410cd-129">**Хранилище данных.**</span><span class="sxs-lookup"><span data-stu-id="410cd-129">**Data storage**.</span></span> <span data-ttu-id="410cd-130">Используйте [базу данных SQL Azure][sql-db] для реляционных данных.</span><span class="sxs-lookup"><span data-stu-id="410cd-130">Use [Azure SQL Database][sql-db] for relational data.</span></span> <span data-ttu-id="410cd-131">Для нереляционных данных рассмотрите возможность использования [Cosmos DB][cosmosdb].</span><span class="sxs-lookup"><span data-stu-id="410cd-131">For non-relational data, consider [Cosmos DB][cosmosdb].</span></span>
* <span data-ttu-id="410cd-132">**Поиск Azure.**</span><span class="sxs-lookup"><span data-stu-id="410cd-132">**Azure Search**.</span></span> <span data-ttu-id="410cd-133">Используйте [Поиск Azure][azure-search], чтобы добавлять функции поиска (такие как, например, поисковые запросы, поиск нечетких соответствий и языковой поиск).</span><span class="sxs-lookup"><span data-stu-id="410cd-133">Use [Azure Search][azure-search] to add search functionality such as search suggestions, fuzzy search, and language-specific search.</span></span> <span data-ttu-id="410cd-134">Служба "Поиск Azure" обычно используется в сочетании с другим хранилищем данных, особенно если первичное хранилище данных требует строгой согласованности.</span><span class="sxs-lookup"><span data-stu-id="410cd-134">Azure Search is typically used in conjunction with another data store, especially if the primary data store requires strict consistency.</span></span> <span data-ttu-id="410cd-135">При использовании этого подхода храните достоверные данные в другом хранилище данных и используйте другой индекс поиска в службе "Поиск Azure".</span><span class="sxs-lookup"><span data-stu-id="410cd-135">In this approach, store authoritative data in the other data store and the search index in Azure Search.</span></span> <span data-ttu-id="410cd-136">Служба "Поиск Azure" может также использоваться для консолидации одного индекса поиска из нескольких хранилищ данных.</span><span class="sxs-lookup"><span data-stu-id="410cd-136">Azure Search can also be used to consolidate a single search index from multiple data stores.</span></span>  
* <span data-ttu-id="410cd-137">**Azure DNS**.</span><span class="sxs-lookup"><span data-stu-id="410cd-137">**Azure DNS**.</span></span> <span data-ttu-id="410cd-138">[Azure DNS][azure-dns] — это служба размещения для доменов DNS, которая предоставляет разрешение имен с помощью инфраструктуры Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="410cd-138">[Azure DNS][azure-dns] is a hosting service for DNS domains, providing name resolution using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="410cd-139">Размещая домены в Azure, вы можете управлять своими записями DNS с помощью тех же учетных данных, API и инструментов и оплачивать использование, как и другие службы Azure.</span><span class="sxs-lookup"><span data-stu-id="410cd-139">By hosting your domains in Azure, you can manage your DNS records using the same credentials, APIs, tools, and billing as your other Azure services.</span></span>
* <span data-ttu-id="410cd-140">**Шлюз приложений.**</span><span class="sxs-lookup"><span data-stu-id="410cd-140">**Application gateway**.</span></span> <span data-ttu-id="410cd-141">[Шлюз приложений ](/azure/application-gateway/) — это балансировщик нагрузки уровня 7.</span><span class="sxs-lookup"><span data-stu-id="410cd-141">[Application Gateway](/azure/application-gateway/) is a layer 7 load balancer.</span></span> <span data-ttu-id="410cd-142">В этой архитектуре шлюз перенаправляет HTTP-запросы к внешнему веб-интерфейсу.</span><span class="sxs-lookup"><span data-stu-id="410cd-142">In this architecture, it routes HTTP requests to the web front end.</span></span> <span data-ttu-id="410cd-143">Шлюз приложений также предоставляет [брандмауэр веб-приложения](/azure/application-gateway/waf-overview) (WAF), который защищает приложения от распространенных эксплойтов и уязвимостей.</span><span class="sxs-lookup"><span data-stu-id="410cd-143">Application Gateway also provides a [web application firewall](/azure/application-gateway/waf-overview) (WAF) that protects the application from common exploits and vulnerabilities.</span></span> 

## <a name="recommendations"></a><span data-ttu-id="410cd-144">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="410cd-144">Recommendations</span></span>

<span data-ttu-id="410cd-145">Описанная здесь архитектура может не соответствовать вашим требованиям.</span><span class="sxs-lookup"><span data-stu-id="410cd-145">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="410cd-146">В качестве отправной точки используйте рекомендации в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="410cd-146">Use the recommendations in this section as a starting point.</span></span>

### <a name="app-service-apps"></a><span data-ttu-id="410cd-147">Приложения службы приложений</span><span class="sxs-lookup"><span data-stu-id="410cd-147">App Service apps</span></span>
<span data-ttu-id="410cd-148">Рекомендуется создавать веб-приложение и веб-API как отдельные приложения службы приложений.</span><span class="sxs-lookup"><span data-stu-id="410cd-148">We recommend creating the web application and the web API as separate App Service apps.</span></span> <span data-ttu-id="410cd-149">Такой подход позволяет запускать их в отдельных планах службы приложений, поэтому они могут масштабироваться независимо друг от друга.</span><span class="sxs-lookup"><span data-stu-id="410cd-149">This design lets you run them in separate App Service plans so they can be scaled independently.</span></span> <span data-ttu-id="410cd-150">Если изначально этот уровень масштабируемости не требуется, можно развертывать приложения в одном плане и позже переместить их в отдельные планы (при необходимости).</span><span class="sxs-lookup"><span data-stu-id="410cd-150">If you don't need that level of scalability initially, you can deploy the apps into the same plan and move them into separate plans later if necessary.</span></span>

> [!NOTE]
> <span data-ttu-id="410cd-151">Для планов "Базовый", "Стандартный" и "Премиум" взимается плата за количество экземпляров виртуальных машин в плане, а не за отдельные приложения.</span><span class="sxs-lookup"><span data-stu-id="410cd-151">For the Basic, Standard, and Premium plans, you are billed for the VM instances in the plan, not per app.</span></span> <span data-ttu-id="410cd-152">Ознакомьтесь с [ценами на службу приложений][app-service-pricing]</span><span class="sxs-lookup"><span data-stu-id="410cd-152">See [App Service Pricing][app-service-pricing]</span></span>
> 
> 

### <a name="cache"></a><span data-ttu-id="410cd-153">Кэш</span><span class="sxs-lookup"><span data-stu-id="410cd-153">Cache</span></span>
<span data-ttu-id="410cd-154">Вы можете повысить производительность и масштабируемость с помощью [кэша Redis для Azure][azure-redis], чтобы выполнять кэширование определенных данных.</span><span class="sxs-lookup"><span data-stu-id="410cd-154">You can improve performance and scalability by using [Azure Redis Cache][azure-redis] to cache some data.</span></span> <span data-ttu-id="410cd-155">Рассмотрите возможность использования кэша Redis для:</span><span class="sxs-lookup"><span data-stu-id="410cd-155">Consider using Redis Cache for:</span></span>

* <span data-ttu-id="410cd-156">полустатических данных транзакции;</span><span class="sxs-lookup"><span data-stu-id="410cd-156">Semi-static transaction data.</span></span>
* <span data-ttu-id="410cd-157">состояния сеанса;</span><span class="sxs-lookup"><span data-stu-id="410cd-157">Session state.</span></span>
* <span data-ttu-id="410cd-158">выходных данных в формате HTML.</span><span class="sxs-lookup"><span data-stu-id="410cd-158">HTML output.</span></span> <span data-ttu-id="410cd-159">Это может быть полезно в приложениях, которые отображают сложные выходные данные в формате HTML.</span><span class="sxs-lookup"><span data-stu-id="410cd-159">This can be useful in applications that render complex HTML output.</span></span>

<span data-ttu-id="410cd-160">Более подробные рекомендации по разработке стратегии кэширования см. в статье [Caching][caching-guidance] (Кэширование).</span><span class="sxs-lookup"><span data-stu-id="410cd-160">For more detailed guidance on designing a caching strategy, see [Caching guidance][caching-guidance].</span></span>

### <a name="cdn"></a><span data-ttu-id="410cd-161">CDN</span><span class="sxs-lookup"><span data-stu-id="410cd-161">CDN</span></span>
<span data-ttu-id="410cd-162">Используйте [сеть доставки содержимого Azure][azure-cdn] для кэширования статического содержимого.</span><span class="sxs-lookup"><span data-stu-id="410cd-162">Use [Azure CDN][azure-cdn] to cache static content.</span></span> <span data-ttu-id="410cd-163">Основным преимуществом CDN является возможность сократить задержку для пользователей, так как содержимое кэшируется на пограничном сервере, географически близком к пользователю.</span><span class="sxs-lookup"><span data-stu-id="410cd-163">The main benefit of a CDN is to reduce latency for users, because content is cached at an edge server that is geographically close to the user.</span></span> <span data-ttu-id="410cd-164">CDN позволяет сократить нагрузку на приложение, так как такой трафик не обрабатывается приложением.</span><span class="sxs-lookup"><span data-stu-id="410cd-164">CDN can also reduce load on the application, because that traffic is not being handled by the application.</span></span>

<span data-ttu-id="410cd-165">Если приложение состоит в основном из статических страниц, рассмотрите возможность использования [сети доставки содержимого (CDN) для кэширования всего приложения][cdn-app-service].</span><span class="sxs-lookup"><span data-stu-id="410cd-165">If your app consists mostly of static pages, consider using [CDN to cache the entire app][cdn-app-service].</span></span> <span data-ttu-id="410cd-166">Или же поместите статическое содержимое (например, образы, каскадные таблицы стилей и HTML-файлы) в [службу хранилища Azure и используйте CDN для кэширования этих файлов][cdn-storage-account].</span><span class="sxs-lookup"><span data-stu-id="410cd-166">Otherwise, put static content such as images, CSS, and HTML files, into [Azure Storage and use CDN to cache those files][cdn-storage-account].</span></span>

> [!NOTE]
> <span data-ttu-id="410cd-167">Azure CDN не удается обработать содержимое, для которого требуется аутентификация.</span><span class="sxs-lookup"><span data-stu-id="410cd-167">Azure CDN cannot serve content that requires authentication.</span></span>
> 
> 

<span data-ttu-id="410cd-168">Более подробные инструкции см. в статье [Content Delivery Network][cdn-guidance] (Сеть доставки содержимого).</span><span class="sxs-lookup"><span data-stu-id="410cd-168">For more detailed guidance, see [Content Delivery Network (CDN) guidance][cdn-guidance].</span></span>

### <a name="storage"></a><span data-ttu-id="410cd-169">Хранилище</span><span class="sxs-lookup"><span data-stu-id="410cd-169">Storage</span></span>
<span data-ttu-id="410cd-170">Современные приложения часто обрабатывают большие объемы данных.</span><span class="sxs-lookup"><span data-stu-id="410cd-170">Modern applications often process large amounts of data.</span></span> <span data-ttu-id="410cd-171">Чтобы изменить масштаб для облака, важно выбрать правильный тип хранилища.</span><span class="sxs-lookup"><span data-stu-id="410cd-171">In order to scale for the cloud, it's important to choose the right storage type.</span></span> <span data-ttu-id="410cd-172">Вот несколько базовых рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="410cd-172">Here are some baseline recommendations.</span></span> 

| <span data-ttu-id="410cd-173">Что нужно сохранить</span><span class="sxs-lookup"><span data-stu-id="410cd-173">What you want to store</span></span> | <span data-ttu-id="410cd-174">Пример</span><span class="sxs-lookup"><span data-stu-id="410cd-174">Example</span></span> | <span data-ttu-id="410cd-175">Рекомендуемое хранилище</span><span class="sxs-lookup"><span data-stu-id="410cd-175">Recommended storage</span></span> |
| --- | --- | --- |
| <span data-ttu-id="410cd-176">Файлы</span><span class="sxs-lookup"><span data-stu-id="410cd-176">Files</span></span> |<span data-ttu-id="410cd-177">Образы, документы, PDF-файлы</span><span class="sxs-lookup"><span data-stu-id="410cd-177">Images, documents, PDFs</span></span> |<span data-ttu-id="410cd-178">Хранилище больших двоичных объектов Azure</span><span class="sxs-lookup"><span data-stu-id="410cd-178">Azure Blob Storage</span></span> |
| <span data-ttu-id="410cd-179">Пары "ключ — значение"</span><span class="sxs-lookup"><span data-stu-id="410cd-179">Key/Value pairs</span></span> |<span data-ttu-id="410cd-180">Данные профиля пользователя, обнаруженные по идентификатору пользователя</span><span class="sxs-lookup"><span data-stu-id="410cd-180">User profile data looked up by user ID</span></span> |<span data-ttu-id="410cd-181">табличное хранилище Azure;</span><span class="sxs-lookup"><span data-stu-id="410cd-181">Azure Table storage</span></span> |
| <span data-ttu-id="410cd-182">Короткие сообщения, предназначенные для активирования дальнейшей обработки</span><span class="sxs-lookup"><span data-stu-id="410cd-182">Short messages intended to trigger further processing</span></span> |<span data-ttu-id="410cd-183">Запросы на упорядочивание</span><span class="sxs-lookup"><span data-stu-id="410cd-183">Order requests</span></span> |<span data-ttu-id="410cd-184">Хранилище очередей Azure, очередь или раздел служебной шины</span><span class="sxs-lookup"><span data-stu-id="410cd-184">Azure Queue storage, Service Bus queue, or Service Bus topic</span></span> |
| <span data-ttu-id="410cd-185">Нереляционные данные с гибкой схемой, требующей базового запроса</span><span class="sxs-lookup"><span data-stu-id="410cd-185">Non-relational data with a flexible schema requiring basic querying</span></span> |<span data-ttu-id="410cd-186">Каталог продукции</span><span class="sxs-lookup"><span data-stu-id="410cd-186">Product catalog</span></span> |<span data-ttu-id="410cd-187">База данных документов (например, Azure Cosmos DB, MongoDB или Apache CouchDB)</span><span class="sxs-lookup"><span data-stu-id="410cd-187">Document database, such as Azure Cosmos DB, MongoDB, or Apache CouchDB</span></span> |
| <span data-ttu-id="410cd-188">Реляционные данные, требующие более широкой поддержки запросов, строгой схемы и/или строгой согласованности</span><span class="sxs-lookup"><span data-stu-id="410cd-188">Relational data requiring richer query support, strict schema, and/or strong consistency</span></span> |<span data-ttu-id="410cd-189">Список продуктов</span><span class="sxs-lookup"><span data-stu-id="410cd-189">Product inventory</span></span> |<span data-ttu-id="410cd-190">Базы данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="410cd-190">Azure SQL Database</span></span> |

 <span data-ttu-id="410cd-191">См. статью [Choose the right data store][datastore] (Выбор правильного хранилища данных).</span><span class="sxs-lookup"><span data-stu-id="410cd-191">See [Choose the right data store][datastore].</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="410cd-192">Вопросы масштабируемости</span><span class="sxs-lookup"><span data-stu-id="410cd-192">Scalability considerations</span></span>

<span data-ttu-id="410cd-193">Главным преимуществом службы приложений Azure является возможность масштабировать приложение с учетом нагрузки.</span><span class="sxs-lookup"><span data-stu-id="410cd-193">A major benefit of Azure App Service is the ability to scale your application based on load.</span></span> <span data-ttu-id="410cd-194">Ниже приведены некоторые рекомендации, которые следует учитывать, если вы планируете масштабировать приложение.</span><span class="sxs-lookup"><span data-stu-id="410cd-194">Here are some considerations to keep in mind when planning to scale your application.</span></span>

### <a name="app-service-app"></a><span data-ttu-id="410cd-195">Приложение службы приложений</span><span class="sxs-lookup"><span data-stu-id="410cd-195">App Service app</span></span>
<span data-ttu-id="410cd-196">Если решение содержит несколько приложений служб приложений, рассмотрите возможность их развертывания в разных планах службы приложений.</span><span class="sxs-lookup"><span data-stu-id="410cd-196">If your solution includes several App Service apps, consider deploying them to separate App Service plans.</span></span> <span data-ttu-id="410cd-197">Такой подход позволяет масштабировать их независимо друг от друга, так как они выполняются на отдельных экземплярах.</span><span class="sxs-lookup"><span data-stu-id="410cd-197">This approach enables you to scale them independently because they run on separate instances.</span></span> 

<span data-ttu-id="410cd-198">Аналогичным образом рассмотрите возможность размещения приложения-функции в собственном плане так, чтобы фоновые задания не выполнялись на тех экземплярах, которые обрабатывают запросы HTTP.</span><span class="sxs-lookup"><span data-stu-id="410cd-198">Similarly, consider putting a function app into its own plan so that background tasks don't run on the same instances that handle HTTP requests.</span></span> <span data-ttu-id="410cd-199">Если фоновые задачи выполняются периодически, рассмотрите возможность использования [плана потребления][functions-consumption-plan], в рамках которого оплата начисляется на основе количества выполнений, а не за каждый час.</span><span class="sxs-lookup"><span data-stu-id="410cd-199">If background tasks run intermittently, consider using a [consumption plan][functions-consumption-plan], which is billed based on the number of executions, rather than hourly.</span></span> 

### <a name="sql-database"></a><span data-ttu-id="410cd-200">База данных SQL</span><span class="sxs-lookup"><span data-stu-id="410cd-200">SQL Database</span></span>
<span data-ttu-id="410cd-201">Увеличьте уровень масштабируемости базы данных SQL путем *сегментирования* базы данных.</span><span class="sxs-lookup"><span data-stu-id="410cd-201">Increase scalability of a SQL database by *sharding* the database.</span></span> <span data-ttu-id="410cd-202">Сегментирование означает горизонтальное секционирование базы данных.</span><span class="sxs-lookup"><span data-stu-id="410cd-202">Sharding refers to partitioning the database horizontally.</span></span> <span data-ttu-id="410cd-203">Сегментирование позволяет развернуть базу данных с помощью [инструментов для работы с эластичными базами данных][sql-elastic].</span><span class="sxs-lookup"><span data-stu-id="410cd-203">Sharding allows you to scale out the database horizontally using [Elastic Database tools][sql-elastic].</span></span> <span data-ttu-id="410cd-204">Потенциальные преимущества сегментирования:</span><span class="sxs-lookup"><span data-stu-id="410cd-204">Potential benefits of sharding include:</span></span>

- <span data-ttu-id="410cd-205">повышение пропускной способности транзакций;</span><span class="sxs-lookup"><span data-stu-id="410cd-205">Better transaction throughput.</span></span>
- <span data-ttu-id="410cd-206">быстрое выполнение запросов к подмножеству данных.</span><span class="sxs-lookup"><span data-stu-id="410cd-206">Queries can run faster over a subset of the data.</span></span>

### <a name="azure-search"></a><span data-ttu-id="410cd-207">Поиск Azure</span><span class="sxs-lookup"><span data-stu-id="410cd-207">Azure Search</span></span>
<span data-ttu-id="410cd-208">Служба "Поиск Azure" устраняет затраты на сложный поиск данных из первичного хранилища данных и может масштабироваться для обработки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="410cd-208">Azure Search removes the overhead of performing complex data searches from the primary data store, and it can scale to handle load.</span></span> <span data-ttu-id="410cd-209">Дополнительные сведения см. в статье [Масштабирование уровней ресурсов для рабочих нагрузок запросов и индексирования в Поиске Azure][azure-search-scaling].</span><span class="sxs-lookup"><span data-stu-id="410cd-209">See [Scale resource levels for query and indexing workloads in Azure Search][azure-search-scaling].</span></span>

## <a name="security-considerations"></a><span data-ttu-id="410cd-210">Вопросы безопасности</span><span class="sxs-lookup"><span data-stu-id="410cd-210">Security considerations</span></span>
<span data-ttu-id="410cd-211">В этом разделе перечислены рекомендации по безопасности, относящиеся к службам Azure, описанным в этой статье.</span><span class="sxs-lookup"><span data-stu-id="410cd-211">This section lists security considerations that are specific to the Azure services described in this article.</span></span> <span data-ttu-id="410cd-212">Это не полный список рекомендаций по обеспечению безопасности.</span><span class="sxs-lookup"><span data-stu-id="410cd-212">It's not a complete list of security best practices.</span></span> <span data-ttu-id="410cd-213">Дополнительные рекомендации см. в статье [Проверка подлинности и авторизация в службе приложений Azure][app-service-security].</span><span class="sxs-lookup"><span data-stu-id="410cd-213">For some additional security considerations, see [Secure an app in Azure App Service][app-service-security].</span></span>

### <a name="cross-origin-resource-sharing-cors"></a><span data-ttu-id="410cd-214">Общий доступ к ресурсам независимо от источника (CORS)</span><span class="sxs-lookup"><span data-stu-id="410cd-214">Cross-Origin Resource Sharing (CORS)</span></span>
<span data-ttu-id="410cd-215">При создании веб-сайта и веб-API в качестве отдельных приложений веб-сайт не может выполнить вызовы AJAX со стороны клиента в API, пока не будет включен CORS.</span><span class="sxs-lookup"><span data-stu-id="410cd-215">If you create a website and web API as separate apps, the website cannot make client-side AJAX calls to the API unless you enable CORS.</span></span>

> [!NOTE]
> <span data-ttu-id="410cd-216">Параметры безопасности веб-браузера предотвращают отправку запросов AJAX с веб-страницы к другому домену.</span><span class="sxs-lookup"><span data-stu-id="410cd-216">Browser security prevents a web page from making AJAX requests to another domain.</span></span> <span data-ttu-id="410cd-217">Такое ограничение называется политикой одного источника. Эта политика предотвращает чтение вредоносным сайтом конфиденциальных данных с другого сайта.</span><span class="sxs-lookup"><span data-stu-id="410cd-217">This restriction is called the same-origin policy, and prevents a malicious site from reading sentitive data from another site.</span></span> <span data-ttu-id="410cd-218">CORS — это стандарт консорциума W3C, позволяющий серверу смягчить ограничения политики одного источника и разрешающий выполнять некоторые запросы независимо от источника, а другие — отклонять.</span><span class="sxs-lookup"><span data-stu-id="410cd-218">CORS is a W3C standard that allows a server to relax the same-origin policy and allow some cross-origin requests while rejecting others.</span></span>
> 
> 

<span data-ttu-id="410cd-219">В службах приложений реализована встроенная поддержка CORS без необходимости написания кода приложения.</span><span class="sxs-lookup"><span data-stu-id="410cd-219">App Services has built-in support for CORS, without needing to write any application code.</span></span> <span data-ttu-id="410cd-220">Дополнительные сведения см. в статье [Создание API RESTful Node.js и его развертывание в приложении API в Azure][cors].</span><span class="sxs-lookup"><span data-stu-id="410cd-220">See [Consume an API app from JavaScript using CORS][cors].</span></span> <span data-ttu-id="410cd-221">Добавьте веб-сайт в список разрешенных источников для API-интерфейса.</span><span class="sxs-lookup"><span data-stu-id="410cd-221">Add the website to the list of allowed origins for the API.</span></span>

### <a name="sql-database-encryption"></a><span data-ttu-id="410cd-222">Шифрование базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="410cd-222">SQL Database encryption</span></span>
<span data-ttu-id="410cd-223">Используйте [прозрачное шифрование данных][sql-encryption] для шифрования неактивных данных, хранящихся в базе данных.</span><span class="sxs-lookup"><span data-stu-id="410cd-223">Use [Transparent Data Encryption][sql-encryption] if you need to encrypt data at rest in the database.</span></span> <span data-ttu-id="410cd-224">Эта функция выполняет шифрование и расшифровку всей базы данных в режиме реального времени (включая резервные копии и файлы журнала транзакций) и не требует изменений в приложении.</span><span class="sxs-lookup"><span data-stu-id="410cd-224">This feature performs real-time encryption and decryption of an entire database (including backups and transaction log files) and requires no changes to the application.</span></span> <span data-ttu-id="410cd-225">Шифрование вызывает небольшую задержку, поэтому рекомендуется разбить данные. Они должны быть безопасными в собственной базе данных, и шифрование необходимо выполнять только для этой базы данных.</span><span class="sxs-lookup"><span data-stu-id="410cd-225">Encryption does add some latency, so it's a good practice to separate the data that must be secure into its own database and enable encryption only for that database.</span></span>  
  

<!-- links -->

[api-guidance]: ../../best-practices/api-design.md
[app-service-security]: /azure/app-service-web/web-sites-security
[app-service-web-app]: /azure/app-service-web/app-service-web-overview
[app-service-api-app]: /azure/app-service-api/app-service-api-apps-why-best-platform
[app-service-pricing]: https://azure.microsoft.com/pricing/details/app-service/
[azure-cdn]: https://azure.microsoft.com/services/cdn/
[azure-dns]: /azure/dns/dns-overview
[azure-redis]: https://azure.microsoft.com/services/cache/
[azure-search]: https://azure.microsoft.com/documentation/services/search/
[azure-search-scaling]: /azure/search/search-capacity-planning
[basic-web-app]: basic-web-app.md
[basic-web-app-scalability]: basic-web-app.md#scalability-considerations
[caching-guidance]: ../../best-practices/caching.md
[cdn-app-service]: /azure/app-service-web/cdn-websites-with-cdn
[cdn-storage-account]: /azure/cdn/cdn-create-a-storage-account-with-cdn
[cdn-guidance]: ../../best-practices/cdn.md
[cors]: /azure/app-service-api/app-service-api-cors-consume-javascript
[cosmosdb]: /azure/cosmos-db/
[datastore]: ../..//guide/technology-choices/data-store-overview.md
[durable-functions]: /azure/azure-functions/durable-functions-overview
[functions]: /azure/azure-functions/functions-overview
[functions-consumption-plan]: /azure/azure-functions/functions-scale#consumption-plan
[queue-storage]: /azure/storage/storage-dotnet-how-to-use-queues
[queues-compared]: /azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted
[resource-group]: /azure/azure-resource-manager/resource-group-overview#resource-groups
[sql-db]: https://azure.microsoft.com/documentation/services/sql-database/
[sql-elastic]: /azure/sql-database/sql-database-elastic-scale-introduction
[sql-encryption]: https://msdn.microsoft.com/library/dn948096.aspx
[tm]: https://azure.microsoft.com/services/traffic-manager/
[visio-download]: https://archcenter.blob.core.windows.net/cdn/app-service-reference-architectures.vsdx
[web-app-multi-region]: ./multi-region.md
[0]: ./images/scalable-web-app.png "Веб-приложение в Azure с повышенной масштабируемостью"
