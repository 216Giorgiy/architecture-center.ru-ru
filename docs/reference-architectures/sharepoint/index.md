---
title: "Запуск фермы SharePoint Server 2016 высокого уровня доступности в Azure"
description: "Проверенные подходы, касающиеся настройки фермы SharePoint Server 2016 высокого уровня доступности в Azure."
author: njray
ms.date: 08/01/2017
ms.openlocfilehash: 0c0e9a7b2ae12a2d12919548f91304e6cbd2d8a6
ms.sourcegitcommit: 8ab30776e0c4cdc16ca0dcc881960e3108ad3e94
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2017
---
# <a name="run-a-high-availability-sharepoint-server-2016-farm-in-azure"></a>Запуск фермы SharePoint Server 2016 высокого уровня доступности в Azure

В этой эталонной архитектуре представлен набор проверенных подходов, касающихся настройки фермы SharePoint Server 2016 высокого уровня доступности в Azure с использованием топологии MinRole и групп доступности AlwaysOn SQL Server. Ферма SharePoint развертывается в защищенной виртуальной сети без конечной точки с выходом в Интернет. [**Развернуть это решение**.](#deploy-the-solution) 

![](./images/sharepoint-ha.png)

*Скачайте [файл Visio][visio-download] этой архитектуры.*

## <a name="architecture"></a>Архитектура

Эта архитектура создана на основе архитектуры, описанной в статье [Run Windows VMs for an N-tier application][windows-n-tier] (Запуск виртуальных машин Windows для n-уровневого приложения). Она развертывает ферму SharePoint Server 2016 высокого уровня доступности в виртуальной сети Azure. Эта архитектура подходит для тестовой или рабочей среды, гибридной инфраструктуры SharePoint с Office 365 или в качестве основы для сценария аварийного восстановления.

Она состоит из следующих компонентов:

- **Группы ресурсов**. [Группа ресурсов][resource-group] представляет собой контейнер, содержащий связанные ресурсы Azure. Одна группа ресурсов используется для серверов SharePoint, а другая — для компонентов инфраструктуры, не зависящих от виртуальных машин, таких как виртуальная сеть и подсистемы балансировки нагрузки.

- **Виртуальная сеть**. Виртуальные машины развертываются в виртуальной сети с уникальным адресным пространством интрасети. Затем виртуальная сеть подразделяется на подсети. 

- **Виртуальные машины**. Виртуальные машины развертываются в виртуальной сети, затем им назначаются частные статические IP-адреса. Статические IP-адреса рекомендуется использовать для виртуальных машин под управлением SQL Server и SharePoint Server 2016, чтобы избежать проблем с кэшированием IP-адресов и изменением адресов после перезагрузки.

- **Группы доступности**. Поместите виртуальные машины для каждой роли SharePoint в отдельные [группы доступности][availability-set] и подготовьте по крайней мере две виртуальные машины для каждой роли. Таким образом виртуальные машины станут подходящими для соглашения об уровне обслуживания (SLA) более высокого уровня. 

- **Внутренний балансировщик нагрузки**. [Подсистема балансировки нагрузки][load-balancer] распределяет трафик запросов SharePoint из локальной сети в интерфейсные веб-серверы фермы SharePoint. 

- **Группы безопасности сети (NSG)**. Для каждой подсети, содержащей виртуальные машины, создается [группа безопасности сети][nsg]. Использование NSG позволяет ограничить сетевой трафик в виртуальной сети, чтобы изолировать подсети. 

- **Шлюз**. Шлюз обеспечивает соединение между локальной и виртуальной сетями Azure. Для соединения может использоваться ExpressRoute или VPN "сеть — сеть". Дополнительные сведения см. в статье [Connect an on-premises network to Azure][hybrid-ra] (Подключение локальной сети к Azure).

- **Контроллеры домена Windows Server Active Directory (AD)**. Так как SharePoint Server 2016 не поддерживает использование доменных служб Azure Active Directory, необходимо развернуть контроллеры домена Windows Server AD. Эти контроллеры домена выполняются в виртуальной сети Azure и имеют отношения доверия с лесом Windows Server AD в локальной среде. Интернет-запросы клиента к ресурсам фермы SharePoint проходят проверку подлинности в виртуальной сети Azure вместо отправки трафика проверки подлинности через подключение шлюза в локальную сеть. В службе доменных имен (DNS) создается интрасеть A или записи CNAME, чтобы пользователи интрасети могли разрешить имя фермы SharePoint в частный IP-адрес внутренней подсистемы балансировки нагрузки.

- **Группа доступности AlwaysOn SQL Server**. Для обеспечения высокого уровня доступности базы данных SQL Server мы рекомендуем воспользоваться инструкциями, приведенными в статье [Группы доступности AlwaysOn (SQL Server)][sql-always-on]. Для SQL Server используются две виртуальные машины. Одна из них содержит реплику базы данных-источника, а другая — вторичную реплику. 

- **Виртуальная машина узла большинства**. Эта виртуальная машина позволяет установить кворум в отказоустойчивом кластере. Дополнительные сведения см. в разделе [Общее представление о конфигурациях кворума в отказоустойчивом кластере][sql-quorum].

- **Серверы SharePoint**. Серверы SharePoint выполняют роли внешнего веб-интерфейса, кэширования, приложения и поиска. 

- **Jumpbox**. Он также называется [узлом-бастионом][bastion-host]. Это безопасная виртуальная машина в сети, которую администраторы используют для подключения к другим виртуальным машинам. В jumpbox есть NSG, обеспечивающая удаленный трафик только из общедоступных IP-адресов из списка надежных отправителей. NSG должна пропускать трафик с удаленного рабочего стола (RDP).

## <a name="recommendations"></a>Рекомендации

Описанная здесь архитектура может не соответствовать вашим требованиям. Воспользуйтесь этими рекомендациями в качестве отправной точки.

### <a name="resource-group-recommendations"></a>Рекомендации по группам ресурсов

Мы рекомендуем разделять группы ресурсов в соответствии с ролью сервера и создать отдельную группу ресурсов для компонентов инфраструктуры, которые являются глобальными ресурсами. В этой архитектуре ресурсы SharePoint образуют одну группу, а SQL Server и другие ресурсы программы — другую.

### <a name="virtual-network-and-subnet-recommendations"></a>Рекомендации по виртуальной сети и подсети

Используйте одну подсеть для каждой роли SharePoint и по одной подсети для шлюза и jumpbox. 

Подсети шлюза необходимо присвоить имя *GatewaySubnet*. Назначьте подсети шлюза адресное пространство из последней части адресного пространства виртуальной сети. Дополнительные сведения см. в статье [Connect an on-premises network to Azure using a VPN gateway][hybrid-vpn-ra] (Подключение локальной сети к Azure с использованием VPN-шлюза).

### <a name="vm-recommendations"></a>Рекомендации по виртуальным машинам

Исходя из размеров виртуальных машин Standard DSv2, для этой архитектуры требуется как минимум 38 ядер:

- 8 серверов SharePoint на Standard_DS3_v2 (4 ядра для каждого) = 32 ядра
- 2 контроллера домена Active Directory на Standard_DS1_v2 (1 ядро для каждого) = 2 ядра
- 2 виртуальные машины SQL Server на Standard_DS1_v2 = 2 ядра
- 1 узел большинства на Standard_DS1_v2 = 1 ядро
- 1 сервер управления на Standard_DS1_v2 = 1 ядро

Общее число ядер будет зависеть от выбранных размеров виртуальных машин. Дополнительные сведения см. в разделе [Рекомендации по SharePoint Server](#sharepoint-server-recommendations) ниже.

Убедитесь, что в вашей подписке Azure достаточно квоты на ядра виртуальных машин для развертывания, иначе развертывание завершится сбоем. Ознакомьтесь со статьей [Подписка Azure, границы, квоты и ограничения службы][quotas]. 
 
### <a name="nsg-recommendations"></a>Рекомендации по NSG

Мы рекомендуем использовать одну NSG для каждой подсети, содержащей виртуальные машины, что позволит обеспечить изоляцию подсетей. Если необходимо настроить изоляцию подсетей, добавьте правила NSG, которые определяют разрешенный или запрещенный входящий и исходящий трафик для каждой подсети. Дополнительные сведения см. в статье [Фильтрация сетевого трафика с помощью групп безопасности сети][virtual-networks-nsg]. 

Не назначайте NSG подсети шлюза, иначе шлюз прекратит работу. 

### <a name="storage-recommendations"></a>Рекомендации по хранению данных

Для конфигурации хранилища виртуальных машин в ферме должны использоваться соответствующие рекомендации для локальных развертываний. На серверах SharePoint должен быть отдельный диск для журналов. Для серверов SharePoint, на которых размещены роли индекса поиска, требуется дополнительное место на диске для хранения индекса поиска. В SQL Server принято разделять данные и журналы. Добавьте дополнительные диски для хранения резервных копий базы данных и используйте отдельный диск для [tempdb][tempdb].

Для повышения надежности мы рекомендуем использовать [Управляемые диски Azure][managed-disks]. Использование Управляемых дисков обеспечивает изоляцию дисков для виртуальных машин в группе доступности, что помогает избежать единых точек отказа. 

> [!NOTE]
> Сейчас в шаблоне Resource Manager для этой эталонной архитектуры управляемые диски не используются. Мы намерены обновить шаблон для использования управляемых дисков.

Используйте управляемые диски класса "Премиум" для всех виртуальных машин SharePoint и SQL Server. Для сервера узла большинства, контроллеров домена и сервера управления можно использовать управляемые диски уровня "Стандартный". 

### <a name="sharepoint-server-recommendations"></a>Рекомендации по SharePoint Server

Перед настройкой фермы SharePoint убедитесь в наличии одной учетной записи службы Windows Server Active Directory для каждой службы. Для этой архитектуры необходимы как минимум следующие учетные записи на уровне домена для изоляции привилегий для каждой роли:

- учетная запись службы SQL Server;
- учетная запись для настройки пользователей;
- учетная запись фермы серверов;
- учетная запись Службы поиска;
- учетная запись для доступа к содержимому;
- учетные записи пула веб-приложений;
- учетные записи пула приложений службы;
- учетная запись суперпользователя кэша;
- учетная запись суперчитателя кэша.

Для всех ролей, кроме индексатора поиска, мы рекомендуем использовать размер виртуальной машины [Standard_DS3_v2][vm-sizes-general]. Размер индексатора поиска должен быть как минимум [Standard_DS13_v2][vm-sizes-memory]. 

> [!NOTE]
> В шаблоне Resource Manager для этой эталонной архитектуры используется индексатор поиска меньшего размера DS3 для тестирования развертывания. Для развертывания в рабочей среде используйте размер DS13 или больше. 

Для производственных рабочих нагрузок см. сведения в статье [Требования к оборудованию и программному обеспечению для SharePoint Server 2016][sharepoint-reqs]. 

В соответствии с требованиями к пропускной способности диска, которая составляет как минимум 200 МБ/с, запланируйте архитектуру поиска. Дополнительные сведения см. в статье [Планирование архитектуры поиска в корпоративной среде в SharePoint Server 2013][sharepoint-search]. Кроме того, следуйте указаниям, изложенным в статье [Best practices for crawling in SharePoint Server][sharepoint-crawling] (Рекомендации по сканированию в SharePoint Server 2016).

В дополнение к этому можно сохранить данные компонента поиска в отдельном томе хранилища или в разделе с высокой производительностью. Чтобы снизить нагрузку и повысить пропускную способность, настройте учетные записи пользователей кэша объектов, необходимые для этой архитектуры. Разделите файлы операционной системы Windows Server, программные файлы и журналы диагностики SharePoint Server 2016 во всех трех отдельных томах или разделах с обычным уровнем производительности. 

Дополнительные сведения об этих рекомендациях см. в статье [Начальное развертывание учетных записей администраторов и служб в SharePoint Server][sharepoint-accounts].

### <a name="hybrid-workloads"></a>Гибридные рабочие нагрузки

Эта эталонная архитектура развертывает ферму SharePoint Server 2016, которую можно использовать в качестве [гибридной среды SharePoint][sharepoint-hybrid]&mdash;, что представляет собой расширение с SharePoint Server 2016 до Office 365 SharePoint Online. При наличии Office Online Server см. сведения в статье [Office Web Apps and Office Online Server supportability in Azure][office-web-apps] (Поддержка веб-приложений Office и Office Online Server в Azure).

Приложения служб по умолчанию в этом развертывании поддерживают гибридные рабочие нагрузки. Все гибридные рабочие нагрузки SharePoint Server 2016 и Office 365 можно развертывать в эту ферму без изменений в инфраструктуре SharePoint с одним исключением: облачное гибридное приложение службы поиска не следует развертывать на серверах, где размещается имеющаяся топология поиска. Таким образом для поддержки этого гибридного сценария к ферме необходимо добавить одну или несколько виртуальных машин на основе ролей поиска.

### <a name="sql-server-always-on-availability-groups"></a>Группы доступности AlwaysOn SQL Server

В этой архитектуре используются виртуальные машины SQL Server, так как SharePoint Server 2016 не может использовать базу данных SQL Azure. Для поддержки высокой доступности в SQL Server мы рекомендуем использовать группы доступности AlwaysOn, определяющие набор баз данных, для которых выполняется отработка отказа вместе, в результате чего повышается их уровень доступности и их легко восстановить. В этой эталонной архитектуре базы данных создаются во время развертывания, но вам необходимо вручную включить группы доступности AlwaysOn и добавить базы данных SharePoint в группу доступности. Дополнительные сведения см. в статье [Этап 5. Создание фермы SharePoint в интрасети с помощью Azure: создание группы доступности и добавление баз данных SharePoint][create-availability-group].

Мы также рекомендуем добавить в кластер IP-адрес прослушивателя, который является частным IP-адресом внутренней подсистемы балансировки нагрузки для виртуальных машин SQL Server.

Рекомендуемые размеры виртуальных машин и другие рекомендации по повышению производительности для SQL Server в Azure см. в [этой статье][sql-performance]. Кроме того, следуйте указаниям, приведенным в статье [Рекомендации по использованию SQL Server в ферме SharePoint Server][sql-sharepoint-best-practices].

Мы рекомендуем разместить сервер узла большинства на компьютере, отдельном от партнеров репликации. Сервер позволяет партнерскому серверу вторичной репликации в сеансе в режиме высокой безопасности определить, следует ли начать процедуру автоматической отработки отказа. В отличие от двух партнеров сервер узла большинства не обслуживает базу данных, но поддерживает автоматический переход на другой ресурс. 

## <a name="scalability-considerations"></a>Вопросы масштабируемости

Чтобы масштабировать имеющиеся серверы, просто измените размер виртуальной машины. 

Используя возможность [MinRoles][minroles] в SharePoint Server 2016, можно масштабировать серверы в зависимости от роли сервера, а также удалить серверы из роли. Во время добавления серверов к роли можно указать любые одиночные или объединенные роли. Тем не менее при добавлении серверов в роль Поиска необходимо также перенастроить топологию поиска с использованием PowerShell. Вы также можете преобразовать роли с помощью MinRoles. Дополнительные сведения см. в статье [Управление фермой серверов MinRole в SharePoint Server 2016][sharepoint-minrole].

Обратите внимание, что SharePoint Server 2016 не поддерживает использование масштабируемых наборов виртуальных машин для автоматического масштабирования.

## <a name="availability-considerations"></a>Вопросы доступности

Эта эталонная архитектура поддерживает высокий уровень доступности в регионе Azure, так как в каждой роли по крайней мере две виртуальные машины развернуты в группе доступности.

Для защиты от региональных сбоев создайте отдельную ферму аварийного восстановления в другом регионе Azure. Ваши целевое время восстановления и целевые точки восстановления определяют требования к установке. Дополнительные сведения см. в статье [Выбор стратегии аварийного восстановления для SharePoint Server][sharepoint-dr]. Дополнительный регион должен быть *сопряженным* с основным регионом. На случай масштабного сбоя в каждой паре определяется приоритетный регион для восстановления. Дополнительные сведения см. в статье [Непрерывность бизнес-процессов и аварийное восстановление в службах BizTalk: пары регионов Azure][paired-regions].

## <a name="manageability-considerations"></a>Вопросы управляемости

Для эксплуатации и обслуживания серверов, ферм серверов и сайтов выполните рекомендации для операций с SharePoint. Дополнительные сведения см. в статье [Операции для SharePoint Server][sharepoint-ops].

Задачи, которые следует учитывать при управлении SQL Server в среде SharePoint, могут отличаться от тех, которые обычно применяются для приложения базы данных. Рекомендуется выполнять еженедельное полное резервное копирование всех баз данных SQL и добавочное ежедневное резервное копирование. Выполняйте резервное копирование журналов транзакций каждые 15 минут. Другой подход заключается в реализации задач обслуживания SQL Server в базах данных при отключении встроенных задач обслуживания SharePoint. Дополнительные сведения см. в статье [Настройка и планирование загрузки SQL Server и хранилища (SharePoint Server)][sql-server-capacity-planning]. 

## <a name="security-considerations"></a>Вопросы безопасности

Для процессов проверки подлинности и присоединения к домену в учетных записях службы на уровне домена, используемых для запуска SharePoint Server 2016, должны быть контроллеры домена Windows Server AD. Доменные службы Azure Active Directory не могут использоваться для этой цели. Для расширения инфраструктуры удостоверений Windows Server AD, имеющейся в интрасети, эта архитектура использует два контроллера домена реплики Windows Server AD имеющегося леса Windows Server AD в локальной среде.

Кроме того, рекомендуется всегда планировать усиление безопасности. К другим рекомендациям относится:

- Добавьте правила в NSG, чтобы изолировать подсети и роли.
- Не присваивайте виртуальным машинам общедоступные IP-адреса.
- Для обнаружения сетевых вторжений и анализа полезных данных в интерфейсных веб-серверах используйте виртуальный сетевой модуль вместо внутренней подсистемы балансировки нагрузки Azure.
- В качестве альтернативы используйте политики IPsec для шифрования трафика открытого текста между серверами. Если также выполняется изоляция подсети, обновите правила группы безопасности вашей сети, чтобы разрешить трафик IPsec.
- Установите агенты защиты от вредоносных программ для виртуальных машин.

## <a name="deploy-the-solution"></a>Развертывание решения

Скрипты развертывания для этой эталонной архитектуры можно найти на [GitHub][github]. 

Эту архитектуру можно развертывать последовательно или всю сразу. Впервые мы рекомендуем выполнять пошаговое развертывание, чтобы вы могли видеть, какие действия выполняются. Выберите приращение с помощью одного из следующих параметров *режима*.

| Mode           | Действие                                                                                                            |
|----------------|-------------------------------------------------------------------------------------------------------------------------|
| onprem;         | (Необязательно.) Развертывает имитированную локальную сетевую среду для тестирования или оценки. На этом шаге не выполняется подключение к фактической локальной сети. |
| infrastructure | Развертывает сетевую инфраструктуру SharePoint 2016 и jumpbox в Azure.                                                |
| createvpn      | Развертывает шлюз виртуальной сети для SharePoint и локальных сетей, а также соединяет их. Выполняйте этот шаг только в том случае, если выполнен шаг `onprem`.                |
| workload       | Развертывает серверы SharePoint в сеть SharePoint.                                                               |
| security       | Развертывает группу безопасности сети в сеть SharePoint.                                                           |
| все            | Выполняет все предыдущие развертывания.                            


Чтобы развернуть архитектуру пошагово с помощью имитированной локальной сетевой среды, сделайте следующее в таком порядке:

1. onprem;
2. infrastructure
3. createvpn;
4. workload
5. security

Чтобы развернуть архитектуру пошагово без применения имитированной локальной сетевой среды, сделайте следующее в таком порядке:

1. infrastructure;
2. workload
3. security

Чтобы развернуть все за один шаг, используйте `all`. Обратите внимание, что весь процесс может занять несколько часов.

### <a name="prerequisites"></a>предварительным требованиям

* Установите [Azure PowerShell][azure-ps] последней версии.

* Перед развертыванием этой эталонной архитектуры убедитесь, что ваша подписка имеет достаточную квоту — по крайней мере 38 ядер. В противном случае используйте портал Azure, чтобы отправить запрос на увеличение квоты.

* Для оценки стоимости развертывания перейдите к [калькулятору цен][azure-pricing].

### <a name="deploy-the-reference-architecture"></a>Развертывание эталонной архитектуры

1.  Скачайте или клонируйте [репозиторий GitHub][github] на локальный компьютер.

2.  Откройте окно PowerShell и перейдите к папке `/sharepoint/sharepoint-2016`.

3.  Выполните следующую команду PowerShell. В качестве значения \<subscription id\> укажите идентификатор своей подписки Azure. В качестве значения \<location\> укажите регион Azure (например, `eastus` или `westus`). В качестве значения \<mode\> укажите `onprem`, `infrastructure`, `createvpn`, `workload`, `security` или `all`.

    ```powershell
    .\Deploy-ReferenceArchitecture.ps1 <subscription id> <location> <mode>
    ```   
4. При появлении соответствующего запроса войдите в учетную запись Azure. Выполнение сценариев развертывания может занять несколько часов в зависимости от выбранного режима.

5. После завершения развертывания выполните скрипты для настройки группы доступности AlwaysOn SQL Server. Подробные сведения см. в [файле сведений][readme].

> [!WARNING]
> Файлы параметров содержат жестко заданный пароль (`AweS0me@PW`) в различных расположениях. Измените эти значения перед развертыванием.


## <a name="validate-the-deployment"></a>Проверка развертывания

После развертывания этой эталонной архитектуры в подписке, которая использовалась, отобразятся следующие группы ресурсов:

| Группа ресурсов        | Назначение                                                                                         |
|-----------------------|-------------------------------------------------------------------------------------------------|
| ra-onprem-sp2016-rg   | Имитированная локальная сеть с Active Directory в федерации с сетью SharePoint 2016 |
| ra-sp2016-network-rg  | Инфраструктура для поддержки развертывания SharePoint                                                 |
| ra-sp2016-workload-rg | SharePoint и вспомогательные ресурсы                                                             |

### <a name="validate-access-to-the-sharepoint-site-from-the-on-premises-network"></a>Проверка доступа к сайту SharePoint из локальной сети

1. На [портале Azure][azure-portal] в разделе **Группы ресурсов** выберите группу ресурсов `ra-onprem-sp2016-rg`.

2. В списке ресурсов выберите ресурс виртуальной машины с именем `ra-adds-user-vm1`. 

3. Подключитесь к виртуальной машине, как описано в разделе [Подключение к виртуальной машине][connect-to-vm]. Имя пользователя — `\onpremuser`.

5.  После установки удаленного подключения к виртуальной машине откройте браузер на виртуальной машине и перейдите по адресу `http://portal.contoso.local`.

6.  В поле **Безопасность Windows** войдите на портал SharePoint, использовав `contoso.local\testuser` в качестве имени пользователя.

В результате такого входа создается туннель из домена Fabrikam.com, используемого в локальной сети, к домену contoso.local, используемому на портале SharePoint. Когда откроется сайт SharePoint, вы увидите корневой демонстрационный сайт.

### <a name="validate-jumpbox-access-to-vms-and-check-configuration-settings"></a>Проверка доступа jumpbox к виртуальным машинам и проверка параметров конфигурации

1.  На [портале Azure][azure-portal] в разделе **Группы ресурсов** выберите группу ресурсов `ra-sp2016-network-rg`.

2.  В списке ресурсов выберите ресурс виртуальной машины с именем `ra-sp2016-jb-vm1`, который представляет собой jumpbox.

3. Подключитесь к виртуальной машине, как описано в разделе [Подключение к виртуальной машине][connect-to-vm]. Имя пользователя — `testuser`.

4.  После входа на jumpbox откройте сеанс RDP из jumpbox. Подключитесь к другим виртуальным машинам в виртуальной сети. Имя пользователя — `testuser`. Предупреждение о сертификате безопасности удаленного компьютера можно пропустить.

5.  Когда откроется удаленное подключение к виртуальной машине, проверьте конфигурацию и внесите изменения с помощью средств администрирования, например диспетчера сервера.

В следующей таблице показаны развернутые виртуальные машины. 

| Имя ресурса      | Назначение                                   | Группа ресурсов        | Имя виртуальной машины                       |
|--------------------|-------------------------------------------|-----------------------|-------------------------------|
| Ra-sp2016-ad-vm1   | Active Directory + DNS                    | Ra-sp2016-network-rg  | Ad1.contoso.Local             |
| Ra-sp2016-ad-vm2   | Active Directory + DNS                    | Ra-sp2016-network-rg  | Ad2.contoso.local             |
| Ra-sp2016-fsw-vm1  | SharePoint                                | Ra-sp2016-network-rg  | Fsw1.contoso.local            |
| Ra-sp2016-jb-vm1   | Jumpbox                                   | Ra-sp2016-network-rg  | Jb (используйте общедоступный IP-адрес для входа) |
| Ra-sp2016-sql-vm1  | SQL AlwaysOn — отработка отказа                  | Ra-sp2016-network-rg  | Sq1.contoso.local             |
| Ra-sp2016-sql-vm2  | SQL AlwaysOn — первичный                   | Ra-sp2016-network-rg  | Sq2.contoso.local             |
| Ra-sp2016-app-vm1  | MinRole приложения SharePoint 2016       | Ra-sp2016-workload-rg | App1.contoso.local            |
| Ra-sp2016-app-vm2  | MinRole приложения SharePoint 2016       | Ra-sp2016-workload-rg | App2.contoso.local            |
| Ra-sp2016-dch-vm1  | MinRole распределенного кэша SharePoint 2016 | Ra-sp2016-workload-rg | Dch1.contoso.local            |
| Ra-sp2016-dch-vm2  | MinRole распределенного кэша SharePoint 2016 | Ra-sp2016-workload-rg | Dch2.contoso.local            |
| Ra-sp2016-srch-vm1 | MinRole поиска SharePoint 2016            | Ra-sp2016-workload-rg | Srch1.contoso.local           |
| Ra-sp2016-srch-vm2 | MinRole поиска SharePoint 2016            | Ra-sp2016-workload-rg | Srch2.contoso.local           |
| Ra-sp2016-wfe-vm1  | MinRole веб-интерфейса SharePoint 2016     | Ra-sp2016-workload-rg | Wfe1.contoso.local            |
| Ra-sp2016-wfe-vm2  | MinRole веб-интерфейса SharePoint 2016     | Ra-sp2016-workload-rg | Wfe2.contoso.local            |


**_Авторы этой эталонной архитектуры_**&mdash; Джо Дэвис (Joe Davies), Боб Фокс (Bob Fox), Нэйл Ходжкинсон (Neil Hodgkinson), Пол Сторк (Paul Stork)

<!-- links -->

[availability-set]: /azure/virtual-machines/windows/manage-availability
[azure-portal]: https://portal.azure.com
[azure-ps]: /powershell/azure/overview
[azure-pricing]: https://azure.microsoft.com/en-us/pricing/calculator/
[bastion-host]: https://en.wikipedia.org/wiki/Bastion_host
[create-availability-group]: https://technet.microsoft.com/library/mt793548(v=office.16).aspx
[connect-to-vm]: /azure/virtual-machines/windows/quick-create-portal#connect-to-virtual-machine
[github]: https://github.com/mspnp/reference-architectures
[hybrid-ra]: ../hybrid-networking/index.md
[hybrid-vpn-ra]: ../hybrid-networking/vpn.md
[load-balancer]: /azure/load-balancer/load-balancer-internal-overview
[managed-disks]: /azure/storage/storage-managed-disks-overview
[minroles]: https://technet.microsoft.com/library/mt346114(v=office.16).aspx
[nsg]: /azure/virtual-network/virtual-networks-nsg
[office-web-apps]: https://support.microsoft.com/help/3199955/office-web-apps-and-office-online-server-supportability-in-azure
[paired-regions]: /azure/best-practices-availability-paired-regions
[readme]: https://github.com/mspnp/reference-architectures/tree/master/sharepoint/sharepoint-2016
[resource-group]: /azure/azure-resource-manager/resource-group-overview
[quotas]: /azure/azure-subscription-service-limits
[sharepoint-accounts]: https://technet.microsoft.com/library/ee662513(v=office.16).aspx
[sharepoint-crawling]: https://technet.microsoft.com/library/dn535606(v=office.16).aspx
[sharepoint-dr]: https://technet.microsoft.com/library/ff628971(v=office.16).aspx
[sharepoint-hybrid]: https://aka.ms/sphybrid
[sharepoint-minrole]: https://technet.microsoft.com/library/mt743705(v=office.16).aspx
[sharepoint-ops]: https://technet.microsoft.com/library/cc262289(v=office.16).aspx
[sharepoint-reqs]: https://technet.microsoft.com/library/cc262485(v=office.16).aspx
[sharepoint-search]: https://technet.microsoft.com/library/dn342836.aspx
[sql-always-on]: /sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server
[sql-performance]: /virtual-machines/windows/sql/virtual-machines-windows-sql-performance
[sql-server-capacity-planning]: https://technet.microsoft.com/library/cc298801(v=office.16).aspx
[sql-quorum]: https://technet.microsoft.com/library/cc731739(v=ws.11).aspx
[sql-sharepoint-best-practices]: https://technet.microsoft.com/library/hh292622(v=office.16).aspx
[tempdb]: /sql/relational-databases/databases/tempdb-database
[virtual-networks-nsg]: /azure/virtual-network/virtual-networks-nsg
[visio-download]: https://archcenter.azureedge.net/cdn/Sharepoint-2016.vsdx
[vm-sizes-general]: /azure/virtual-machines/windows/sizes-general
[vm-sizes-memory]: /azure/virtual-machines/windows/sizes-memory
[windows-n-tier]: ../virtual-machines-windows/n-tier.md
