---
title: Интеграция локальных доменов со службой Azure Active Directory
description: Сведения о реализации архитектуры защищенной гибридной сети с помощью Azure Active Directory.
author: telmosampaio
pnp.series.title: Identity management
ms.date: 11/28/2016
pnp.series.next: adds-extend-domain
pnp.series.prev: ./index
cardTitle: Integrate on-premises AD with Azure AD
ms.openlocfilehash: c265870b9a664afbde561d324ae42fd3a2d9a87e
ms.sourcegitcommit: 1287d635289b1c49e94f839b537b4944df85111d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/27/2018
ms.locfileid: "52332363"
---
# <a name="integrate-on-premises-active-directory-domains-with-azure-active-directory"></a><span data-ttu-id="d9b9c-103">Интеграция локальных доменов Active Directory с Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="d9b9c-103">Integrate on-premises Active Directory domains with Azure Active Directory</span></span>

<span data-ttu-id="d9b9c-104">Azure Active Directory — это мультитенантный облачный каталог и служба управления удостоверениями.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-104">Azure Active Directory (Azure AD) is a cloud based multi-tenant directory and identity service.</span></span> <span data-ttu-id="d9b9c-105">На схеме этой эталонной архитектуры представлены рекомендации по интеграции локальных доменов Active Directory с Azure AD для облачной проверки подлинности удостоверений.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-105">This reference architecture shows best practices for integrating on-premises Active Directory domains with Azure AD to provide cloud-based identity authentication.</span></span> [<span data-ttu-id="d9b9c-106">**Разверните это решение**.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-106">**Deploy this solution**.</span></span>](#deploy-the-solution)

<span data-ttu-id="d9b9c-107">[![0]][0]</span><span class="sxs-lookup"><span data-stu-id="d9b9c-107">[![0]][0]</span></span> 

<span data-ttu-id="d9b9c-108">*Скачайте [файл Visio][visio-download] этой архитектуры.*</span><span class="sxs-lookup"><span data-stu-id="d9b9c-108">*Download a [Visio file][visio-download] of this architecture.*</span></span>

> [!NOTE]
> <span data-ttu-id="d9b9c-109">Для простоты на этой схеме показаны только соединения, непосредственно связанные с Azure AD, а также не связанный с протоколом трафик, который может передаваться при проверке подлинности и федерации удостоверений.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-109">For simplicity, this diagram only shows the connections directly related to Azure AD, and not protocol-related traffic that may occur as part of authentication and identity federation.</span></span> <span data-ttu-id="d9b9c-110">Например, веб-приложение может перенаправить веб-браузер для проверки подлинности запроса с помощью Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-110">For example, a web application may redirect the web browser to authenticate the request through Azure AD.</span></span> <span data-ttu-id="d9b9c-111">После проверки подлинности запрос может передаваться в веб-приложение с соответствующей информацией об удостоверениях.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-111">Once authenticated, the request can be passed back to the web application, with the appropriate identity information.</span></span>
> 

<span data-ttu-id="d9b9c-112">Типичные способы использования этой эталонной архитектуры:</span><span class="sxs-lookup"><span data-stu-id="d9b9c-112">Typical uses for this reference architecture include:</span></span>

* <span data-ttu-id="d9b9c-113">Веб-приложения, развернутые в Azure, которые обеспечивают доступ к удаленным пользователям, принадлежащим вашей организации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-113">Web applications deployed in Azure that provide access to remote users who belong to your organization.</span></span>
* <span data-ttu-id="d9b9c-114">Реализация возможности самообслуживания для пользователей, например сброс паролей и делегирование управления группой.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-114">Implementing self-service capabilities for end-users, such as resetting their passwords, and delegating group management.</span></span> <span data-ttu-id="d9b9c-115">Обратите внимание, что для этого необходим выпуск Azure AD Premium.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-115">Note that this requires Azure AD Premium edition.</span></span>
* <span data-ttu-id="d9b9c-116">Архитектуры, в которых локальная и виртуальная сети приложения Azure не подключены с использованием VPN-туннеля или канала ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-116">Architectures in which the on-premises network and the application's Azure VNet are not connected using a VPN tunnel or ExpressRoute circuit.</span></span>

> [!NOTE]
> <span data-ttu-id="d9b9c-117">Microsoft Azure Active Directory может проверять подлинность пользователей и приложений, которые существуют в каталоге организации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-117">Azure AD can authenticate the identity of users and applications that exist in an organization’s directory.</span></span> <span data-ttu-id="d9b9c-118">Для некоторых приложений и служб, таких как SQL Server, может потребоваться проверка подлинности компьютера. В этом случае это решение не подходит.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-118">Some applications and services, such as SQL Server, may require computer authentication, in which case this solution is not appropriate.</span></span>
> 

<span data-ttu-id="d9b9c-119">Дополнительные рекомендации см. в статье [Выбор решения для интеграции локальной среды Active Directory с Azure][considerations].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-119">For additional considerations, see [Choose a solution for integrating on-premises Active Directory with Azure][considerations].</span></span> 

## <a name="architecture"></a><span data-ttu-id="d9b9c-120">Архитектура</span><span class="sxs-lookup"><span data-stu-id="d9b9c-120">Architecture</span></span>

<span data-ttu-id="d9b9c-121">Архитектура состоит из следующих компонентов.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-121">The architecture has the following components.</span></span>

* <span data-ttu-id="d9b9c-122">**Клиент Azure AD.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-122">**Azure AD tenant**.</span></span> <span data-ttu-id="d9b9c-123">Экземпляр [Azure AD][azure-active-directory], созданный вашей организацией.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-123">An instance of [Azure AD][azure-active-directory] created by your organization.</span></span> <span data-ttu-id="d9b9c-124">Он выполняет функции службы каталогов для облачных приложений, сохраняя объекты, скопированные из локального экземпляра Active Directory, и предоставляет службы удостоверений.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-124">It acts as a directory service for cloud applications by storing objects copied from the on-premises Active Directory and provides identity services.</span></span>
* <span data-ttu-id="d9b9c-125">**Подсети веб-уровня.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-125">**Web tier subnet**.</span></span> <span data-ttu-id="d9b9c-126">Эта подсеть содержит виртуальные машины, выполняющиеся в веб-приложении.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-126">This subnet holds VMs that run a web application.</span></span> <span data-ttu-id="d9b9c-127">Azure AD может действовать как брокер удостоверений для этого приложения.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-127">Azure AD can act as an identity broker for this application.</span></span>
* <span data-ttu-id="d9b9c-128">**Локальный сервер AD DS.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-128">**On-premises AD DS server**.</span></span> <span data-ttu-id="d9b9c-129">Локальный каталог и служба удостоверений.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-129">An on-premise directory and identity service.</span></span> <span data-ttu-id="d9b9c-130">Каталог AD DS можно синхронизировать с Azure AD, чтобы он мог выполнять проверку подлинности локальных пользователей.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-130">The AD DS directory can be synchronized with Azure AD to enable it to authenticate on-premise users.</span></span>
* <span data-ttu-id="d9b9c-131">**Сервер синхронизации Azure AD Connect.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-131">**Azure AD Connect sync server**.</span></span> <span data-ttu-id="d9b9c-132">Локальный компьютер, на котором выполняется служба синхронизации [Azure AD Connect][azure-ad-connect].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-132">An on-premises computer that runs the [Azure AD Connect][azure-ad-connect] sync service.</span></span> <span data-ttu-id="d9b9c-133">Эта служба синхронизирует информацию, хранящуюся в локальном каталоге Active Directory, в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-133">This service synchronizes information held in the on-premises Active Directory to Azure AD.</span></span> <span data-ttu-id="d9b9c-134">Например, при подготовке или отзыве пользователей и групп в локальной среде эти изменения распространяются в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-134">For example, if you provision or deprovision groups and users on-premises, these changes propagate to Azure AD.</span></span> 
  
  > [!NOTE]
  > <span data-ttu-id="d9b9c-135">По соображениям безопасности Azure AD хранит пароли пользователей в виде хэша.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-135">For security reasons, Azure AD stores user's passwords as a hash.</span></span> <span data-ttu-id="d9b9c-136">Если пользователю требуется сброс пароля, это нужно сделать локально и отправить новый хэш в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-136">If a user requires a password reset, this must be performed on-premises and the new hash must be sent to Azure AD.</span></span> <span data-ttu-id="d9b9c-137">Выпуски Azure AD Premium включают функции, которые могут автоматизировать эту задачу, чтобы разрешить пользователям сбрасывать свои пароли.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-137">Azure AD Premium editions include features that can automate this task to enable users to reset their own passwords.</span></span>
  > 

* <span data-ttu-id="d9b9c-138">**Виртуальные машины для N-уровневого приложения.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-138">**VMs for N-tier application**.</span></span> <span data-ttu-id="d9b9c-139">Развертывание включает инфраструктуру для N-уровневого приложения.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-139">The deployment includes infrastructure for an N-tier application.</span></span> <span data-ttu-id="d9b9c-140">Дополнительные сведения об этих ресурсах см. в статье [Запуск виртуальных машин Windows для n-уровневого приложения][implementing-a-multi-tier-architecture-on-Azure].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-140">For more information about these resources, see [Run VMs for an N-tier architecture][implementing-a-multi-tier-architecture-on-Azure].</span></span>

## <a name="recommendations"></a><span data-ttu-id="d9b9c-141">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="d9b9c-141">Recommendations</span></span>

<span data-ttu-id="d9b9c-142">Следующие рекомендации применимы для большинства ситуаций.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-142">The following recommendations apply for most scenarios.</span></span> <span data-ttu-id="d9b9c-143">Следуйте этим рекомендациям, если они не противоречат особым требованиям для вашего случая.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-143">Follow these recommendations unless you have a specific requirement that overrides them.</span></span> 

### <a name="azure-ad-connect-sync-service"></a><span data-ttu-id="d9b9c-144">Служба синхронизации Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="d9b9c-144">Azure AD Connect sync service</span></span>

<span data-ttu-id="d9b9c-145">Служба синхронизации Azure AD Connect гарантирует согласованность сведений об удостоверениях, хранящихся в облаке, со сведениями, хранящимися в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-145">The Azure AD Connect sync service ensures that identity information stored in the cloud is consistent with that held on-premises.</span></span> <span data-ttu-id="d9b9c-146">Для установки этой службы требуется программное обеспечение Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-146">You install this service using the Azure AD Connect software.</span></span> 

<span data-ttu-id="d9b9c-147">Перед реализацией синхронизации Azure AD Connect определите требования к синхронизации вашей организации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-147">Before implementing Azure AD Connect sync, determine the synchronization requirements of your organization.</span></span> <span data-ttu-id="d9b9c-148">Например, что нужно синхронизировать, с каких доменов и как часто.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-148">For example, what to synchronize, from which domains, and how frequently.</span></span> <span data-ttu-id="d9b9c-149">Дополнительные сведения см. в статье [Определение требований к синхронизации каталога][aad-sync-requirements].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-149">For more information, see [Determine directory synchronization requirements][aad-sync-requirements].</span></span>

<span data-ttu-id="d9b9c-150">Службу синхронизации Azure AD Connect можно запустить на виртуальной машине или локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-150">You can run the Azure AD Connect sync service on a VM or a computer hosted on-premises.</span></span> <span data-ttu-id="d9b9c-151">В зависимости от изменчивости сведений в каталоге Active Directory нагрузка на службу синхронизации Azure AD Connect вряд ли повысится после первоначальной синхронизации с Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-151">Depending on the volatility of the information in your Active Directory directory, the load on the Azure AD Connect sync service is unlikely to be high after the initial synchronization with Azure AD.</span></span> <span data-ttu-id="d9b9c-152">При выполнении службы на виртуальной машине масштабирование сервера (если оно требуется) упрощается.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-152">Running the service on a VM makes it easier to scale the server if needed.</span></span> <span data-ttu-id="d9b9c-153">Наблюдайте за действиями на виртуальной машине, как описано в разделе рекомендаций по мониторингу, чтобы определить, нужно ли выполнить масштабирование.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-153">Monitor the activity on the VM as described in the Monitoring considerations section to determine whether scaling is necessary.</span></span>

<span data-ttu-id="d9b9c-154">Если имеется несколько локальных доменов в лесу, мы рекомендуем хранить и синхронизировать данные всего леса в одном клиенте Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-154">If you have multiple on-premises domains in a forest, we recommend storing and synchronizing information for the entire forest to a single Azure AD tenant.</span></span> <span data-ttu-id="d9b9c-155">Отфильтруйте данные для удостоверений, хранящихся в нескольких доменах, чтобы в Azure AD было по одному экземпляру каждого удостоверения, а не по несколько.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-155">Filter information for identities that occur in more than one domain, so that each identity appears only once in Azure AD, rather than being duplicated.</span></span> <span data-ttu-id="d9b9c-156">Дублирование может привести к несогласованности при синхронизации данных.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-156">Duplication can lead to inconsistencies when data is synchronized.</span></span> <span data-ttu-id="d9b9c-157">Дополнительные сведения см. в разделе о топологии ниже.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-157">For more information, see the Topology section below.</span></span> 

<span data-ttu-id="d9b9c-158">Используйте фильтры, чтобы в Azure AD хранились только необходимые данные.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-158">Use filtering so that only necessary data is stored in Azure AD.</span></span> <span data-ttu-id="d9b9c-159">Например, организации может не потребоваться хранить информацию о неактивных учетных записях в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-159">For example, your organization might not want to store information about inactive accounts in Azure AD.</span></span> <span data-ttu-id="d9b9c-160">Данные можно фильтровать по группам, доменам, подразделениям или атрибутам.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-160">Filtering can be group-based, domain-based, organization unit (OU)-based, or attribute-based.</span></span> <span data-ttu-id="d9b9c-161">Фильтры можно комбинировать для создания более сложных правил.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-161">You can combine filters to generate more complex rules.</span></span> <span data-ttu-id="d9b9c-162">Например, можно синхронизировать объекты в домене с определенным значением для выбранного атрибута.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-162">For example, you could synchronize objects held in a domain that have a specific value in a selected attribute.</span></span> <span data-ttu-id="d9b9c-163">Дополнительные сведения см. в статье [Синхронизация Azure AD Connect: настройка фильтрации][aad-filtering].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-163">For detailed information, see [Azure AD Connect sync: Configure Filtering][aad-filtering].</span></span>

<span data-ttu-id="d9b9c-164">Чтобы реализовать высокий уровень доступности для службы синхронизации AD Connect, запустите промежуточный сервер-получатель.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-164">To implement high availability for the AD Connect sync service, run a secondary staging server.</span></span> <span data-ttu-id="d9b9c-165">Дополнительные сведения см. в разделе с рекомендациями по топологии.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-165">For more information, see the Topology recommendations section.</span></span>

### <a name="security-recommendations"></a><span data-ttu-id="d9b9c-166">Рекомендации по обеспечению безопасности</span><span class="sxs-lookup"><span data-stu-id="d9b9c-166">Security recommendations</span></span>

<span data-ttu-id="d9b9c-167">**Управление паролями пользователей.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-167">**User password management.**</span></span> <span data-ttu-id="d9b9c-168">Выпуски Azure AD Premium поддерживают обратную запись паролей, что позволяет локальным пользователям самостоятельно сбрасывать пароли с портала Azure.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-168">The Azure AD Premium editions support password writeback, enabling your on-premises users to perform self-service password resets from within the Azure portal.</span></span> <span data-ttu-id="d9b9c-169">Эту функцию следует включать только после просмотра политики безопасности паролей в вашей организации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-169">This feature should only be enabled after reviewing your organization's password security policy.</span></span> <span data-ttu-id="d9b9c-170">Например, можно ограничить пользователей, которые могут изменять свои пароли, а также настроить управление паролями.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-170">For example, you can restrict which users can change their passwords, and you can tailor the password management experience.</span></span> <span data-ttu-id="d9b9c-171">Дополнительные сведения см. в статье [Настройка функции самостоятельного сброса пароля в Azure AD][aad-password-management].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-171">For more information, see [Customizing Password Management to fit your organization's needs][aad-password-management].</span></span> 

<span data-ttu-id="d9b9c-172">**Защита локальных приложений с возможностью внешнего доступа.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-172">**Protect on-premises applications that can be accessed externally.**</span></span> <span data-ttu-id="d9b9c-173">Используйте прокси приложения Azure AD, чтобы обеспечить управляемый доступ к локальным веб-приложениям для внешних пользователей через Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-173">Use the Azure AD Application Proxy to provide controlled access to on-premises web applications for external users through Azure AD.</span></span> <span data-ttu-id="d9b9c-174">Только пользователи с допустимыми учетными данными в каталоге Azure имеют разрешение на использование приложения.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-174">Only users that have valid credentials in your Azure directory have permission to use the application.</span></span> <span data-ttu-id="d9b9c-175">Дополнительные сведения см. в статье [Начало работы с прокси приложения и установка соединителя][aad-application-proxy].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-175">For more information, see the article [Enable Application Proxy in the Azure portal][aad-application-proxy].</span></span>

<span data-ttu-id="d9b9c-176">**Активный мониторинг Azure AD на предмет подозрительных действий.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-176">**Actively monitor Azure AD for signs of suspicious activity.**</span></span>    <span data-ttu-id="d9b9c-177">Рассмотрите возможность использования выпуска Azure AD Premium P2, который включает в себя службу "Защита идентификации Azure Active Directory".</span><span class="sxs-lookup"><span data-stu-id="d9b9c-177">Consider using Azure AD Premium P2 edition, which includes Azure AD Identity Protection.</span></span> <span data-ttu-id="d9b9c-178">Она использует адаптивные алгоритмы машинного обучения и эвристические методы, чтобы обнаруживать аномалии и события риска, которые могут указывать на компрометацию удостоверения.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-178">Identity Protection uses adaptive machine learning algorithms and heuristics to detect anomalies and risk events that may indicate that an identity has been compromised.</span></span> <span data-ttu-id="d9b9c-179">Например, он может определить потенциально необычные действия, такие как нестандартный вход, вход из неизвестных источников или с использованием IP-адресов с подозрительной активностью, а также вход с устройств, которые могут быть заражены.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-179">For example, it can detect potentially unusual activity such as irregular sign-in activities, sign-ins from unknown sources or from IP addresses with suspicious activity, or sign-ins from devices that may be infected.</span></span> <span data-ttu-id="d9b9c-180">На основе этих данных служба защиты идентификации создает отчеты и оповещения, с помощью которых можно исследовать события риска, чтобы предпринять соответствующие действия.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-180">Using this data, Identity Protection generates reports and alerts that enables you to investigate these risk events and take appropriate action.</span></span> <span data-ttu-id="d9b9c-181">Дополнительные сведения см. в статье [Защита идентификации Azure Active Directory][aad-identity-protection].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-181">For more information, see [Azure Active Directory Identity Protection][aad-identity-protection].</span></span>
  
<span data-ttu-id="d9b9c-182">Для отслеживания действий, связанных с безопасностью, произошедших в системе, можно использовать функцию отчетности Azure AD на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-182">You can use the reporting feature of Azure AD in the Azure portal to monitor security-related activities occurring in your system.</span></span> <span data-ttu-id="d9b9c-183">Дополнительные сведения об использовании этих отчетов см. в статье [Отчеты Azure Active Directory][aad-reporting-guide].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-183">For more information about using these reports, see [Azure Active Directory Reporting Guide][aad-reporting-guide].</span></span>

### <a name="topology-recommendations"></a><span data-ttu-id="d9b9c-184">Рекомендации по топологии</span><span class="sxs-lookup"><span data-stu-id="d9b9c-184">Topology recommendations</span></span>

<span data-ttu-id="d9b9c-185">Настройте Azure AD Connect для реализации самой подходящей топологии в соответствии с требованиями вашей организации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-185">Configure Azure AD Connect to implement a topology that most closely matches the requirements of your organization.</span></span> <span data-ttu-id="d9b9c-186">Ниже перечислены топологии, которые поддерживает Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-186">Topologies that Azure AD Connect supports include the following:</span></span>

* <span data-ttu-id="d9b9c-187">**Один лес, один каталог Azure AD.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-187">**Single forest, single Azure AD directory**.</span></span> <span data-ttu-id="d9b9c-188">В этой топологии Azure AD Connect синхронизирует данные об объектах и удостоверениях из одного или нескольких доменов в одном локальном лесу в один клиент Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-188">In this topology, Azure AD Connect synchronizes objects and identity information from one or more domains in a single on-premises forest into a single Azure AD tenant.</span></span> <span data-ttu-id="d9b9c-189">Это топология по умолчанию, реализуемая при экспресс-установке Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-189">This is the default topology implemented by the express installation of Azure AD Connect.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="d9b9c-190">Не используйте несколько серверов синхронизации Azure AD Connect для подключения нескольких доменов в одном локальном лесу к одному клиенту Azure AD, если сервер не работает в промежуточном режиме, описанном ниже.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-190">Don't use multiple Azure AD Connect sync servers to connect different domains in the same on-premises forest to the same Azure AD tenant, unless you are running a server in staging mode, described below.</span></span>
  > 
  > 

* <span data-ttu-id="d9b9c-191">**Несколько лесов, один каталог Azure AD.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-191">**Multiple forests, single Azure AD directory**.</span></span> <span data-ttu-id="d9b9c-192">В этой топологии Azure AD Connect синхронизирует данные об объектах и удостоверениях из нескольких лесов в один клиент Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-192">In this topology, Azure AD Connect synchronizes objects and identity information from multiple forests into a single Azure AD tenant.</span></span> <span data-ttu-id="d9b9c-193">Используйте эту топологию, если в вашей организации имеется несколько локальных лесов.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-193">Use this topology if your organization has more than one on-premises forest.</span></span> <span data-ttu-id="d9b9c-194">Данные об удостоверениях можно консолидировать, чтобы каждый уникальный пользователь был представлен в каталоге Azure AD один раз, даже если он существует в нескольких лесах.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-194">You can consolidate identity information so that each unique user is represented once in the Azure AD directory, even if the same user exists in more than one forest.</span></span> <span data-ttu-id="d9b9c-195">Все леса используют один сервер синхронизации Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-195">All forests use the same Azure AD Connect sync server.</span></span> <span data-ttu-id="d9b9c-196">Сервер синхронизации Azure AD Connect не обязательно должен быть присоединен к домену, но он должен быть доступен из всех лесов.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-196">The Azure AD Connect sync server does not have to be part of any domain, but it must be reachable from all forests.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="d9b9c-197">В этой топологии не используйте отдельные серверы синхронизации Azure AD Connect для подключения каждого локального леса к одному клиенту Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-197">In this topology, don't use separate Azure AD Connect sync servers to connect each on-premises forest to a single Azure AD tenant.</span></span> <span data-ttu-id="d9b9c-198">Это может привести к повторяющимся учетным записям в Azure AD, если пользователи находятся в нескольких лесах.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-198">This can result in duplicated identity information in Azure AD if users are present in more than one forest.</span></span>
  > 
  > 

* <span data-ttu-id="d9b9c-199">**Несколько лесов, отдельные топологии.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-199">**Multiple forests, separate topologies**.</span></span> <span data-ttu-id="d9b9c-200">В этой топологии сведения об удостоверениях из отдельных лесов объединяются в один клиент Azure AD. При этом все леса рассматриваются как отдельные сущности.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-200">This topology merges identity information from separate forests into a single Azure AD tenant, treating all forests as separate entities.</span></span> <span data-ttu-id="d9b9c-201">Эта топология полезна, если необходимо скомбинировать леса из разных организаций и сведения каждого пользователя хранятся только в одном лесу.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-201">This topology is useful if you are combining forests from different organizations and the identity information for each user is held in only one forest.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="d9b9c-202">Если глобальные списки адресов (GAL) в каждом лесу синхронизированы, пользователи в одном лесу могут находиться в другом лесу в качестве контактов.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-202">If the global address lists (GAL) in each forest are synchronized, a user in one forest may be present in another as a contact.</span></span> <span data-ttu-id="d9b9c-203">Это может произойти, если ваша организация реализовала GALSync с Forefront Identity Manager 2010 или Microsoft Identity Manager 2016.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-203">This can occur if your organization has implemented GALSync with Forefront Identity manager 2010 or Microsoft Identity Manager 2016.</span></span> <span data-ttu-id="d9b9c-204">В этом случае можно указать, что пользователи должны идентифицироваться по атрибуту *Mail*.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-204">In this scenario, you can specify that users should be identified by their *Mail* attribute.</span></span> <span data-ttu-id="d9b9c-205">Удостоверения также можно сопоставить по атрибутам *ObjectSID* и *msExchMasterAccountSID*.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-205">You can also match identities using the *ObjectSID* and *msExchMasterAccountSID* attributes.</span></span> <span data-ttu-id="d9b9c-206">Это удобно, если есть один или несколько лесов ресурсов с отключенными учетными записями.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-206">This is useful if you have one or more resource forests with disabled accounts.</span></span>
  > 
  > 

* <span data-ttu-id="d9b9c-207">**Промежуточный сервер.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-207">**Staging server**.</span></span> <span data-ttu-id="d9b9c-208">В этой конфигурации запустите второй экземпляр сервера синхронизации Azure AD Connect параллельно с первым.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-208">In this configuration, you run a second instance of the Azure AD Connect sync server in parallel with the first.</span></span> <span data-ttu-id="d9b9c-209">Эта структура поддерживает такие сценарии:</span><span class="sxs-lookup"><span data-stu-id="d9b9c-209">This structure supports scenarios such as:</span></span>
  
  * <span data-ttu-id="d9b9c-210">обеспечение высокой доступности; Каждый набор масштабирования помещает свои виртуальные машины в группу доступности с 5 доменами сбоя (FD) и 5 доменами обновления (UD) для обеспечения доступности (дополнительные сведения о доменах сбоя и обновления см.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-210">High availability.</span></span>
  * <span data-ttu-id="d9b9c-211">Тестирование и развертывание новой конфигурации сервера синхронизации Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-211">Testing and deploying a new configuration of the Azure AD Connect sync server.</span></span>
  * <span data-ttu-id="d9b9c-212">Внедрение нового сервера и списание старой конфигурации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-212">Introducing a new server and decommissioning an old configuration.</span></span> 
    
    <span data-ttu-id="d9b9c-213">В этих сценариях второй экземпляр работает в *промежуточном режиме*.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-213">In these scenarios, the second instance runs in *staging mode*.</span></span> <span data-ttu-id="d9b9c-214">Сервер записывает импортируемые объекты и данные синхронизации в базу данных, но не передает данные в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-214">The server records imported objects and synchronization data in its database, but does not pass the data to Azure AD.</span></span> <span data-ttu-id="d9b9c-215">Если отключить промежуточный режим, сервер начнет записывать данные в Azure AD и также при необходимости начнет выполнять обратную запись пароля в локальных каталогах.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-215">If you disable staging mode, the server starts writing data to Azure AD, and also starts performing password write-backs into the on-premises directories where appropriate.</span></span> <span data-ttu-id="d9b9c-216">Дополнительные сведения см. в статье [Службы синхронизации Azure AD Connect: рабочие задачи и рекомендации][aad-connect-sync-operational-tasks].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-216">For more information, see [Azure AD Connect sync: Operational tasks and considerations][aad-connect-sync-operational-tasks].</span></span>

* <span data-ttu-id="d9b9c-217">**Множество каталогов Azure AD.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-217">**Multiple Azure AD directories**.</span></span> <span data-ttu-id="d9b9c-218">Мы рекомендуем создать один каталог Azure AD для организации, но в некоторых ситуациях может потребоваться разбить сведения по отдельным каталогам Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-218">It is recommended that you create a single Azure AD directory for an organization, but there may be situations where you need to partition information across separate Azure AD directories.</span></span> <span data-ttu-id="d9b9c-219">В этом случае обеспечьте правильную работу синхронизации и обратной записи паролей. Для этого в одном каталоге Azure AD должен находиться только один экземпляр объекта из локального леса.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-219">In this case, avoid synchronization and password write-back issues by ensuring that each object from the on-premises forest appears in only one Azure AD directory.</span></span> <span data-ttu-id="d9b9c-220">Чтобы реализовать этот сценарий, настройте отдельные серверы синхронизации Azure AD Connect для каждого каталога Azure AD и воспользуйтесь фильтрацией, чтобы каждый сервер синхронизации Azure AD Connect работал с взаимно исключающим набором объектов.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-220">To implement this scenario, configure separate Azure AD Connect sync servers for each Azure AD directory, and use filtering so that each Azure AD Connect sync server operates on a mutually exclusive set of objects.</span></span> 

<span data-ttu-id="d9b9c-221">Дополнительные сведения об этих топологиях см. в статье [Топологии Azure AD Connect][aad-topologies].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-221">For more information about these topologies, see [Topologies for Azure AD Connect][aad-topologies].</span></span>

### <a name="user-authentication"></a><span data-ttu-id="d9b9c-222">Аутентификация пользователей</span><span class="sxs-lookup"><span data-stu-id="d9b9c-222">User authentication</span></span>

<span data-ttu-id="d9b9c-223">По умолчанию сервер синхронизации Azure AD Connect настраивает синхронизацию хэша паролей между локальным доменом и Azure AD, а служба Azure AD предполагает, что пользователи проходят проверку подлинности с использованием пароля локальной среды.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-223">By default, the Azure AD Connect sync server configures password hash synchronization between the on-premises domain and Azure AD, and the Azure AD service assumes that users authenticate by providing the same password that they use on-premises.</span></span> <span data-ttu-id="d9b9c-224">Для многих организаций это допустимо, но следует учитывать имеющиеся политики и инфраструктуры вашей организации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-224">For many organizations, this is appropriate, but you should consider your organization's existing policies and infrastructure.</span></span> <span data-ttu-id="d9b9c-225">Например: </span><span class="sxs-lookup"><span data-stu-id="d9b9c-225">For example:</span></span>

* <span data-ttu-id="d9b9c-226">Политикой безопасности организации может быть запрещена синхронизация хэшей паролей в облако.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-226">The security policy of your organization may prohibit synchronizing password hashes to the cloud.</span></span> <span data-ttu-id="d9b9c-227">В таком случае организации необходимо учесть статью [Вход пользователей с помощью сквозной проверки подлинности Azure Active Directory](/azure/active-directory/connect/active-directory-aadconnect-pass-through-authentication).</span><span class="sxs-lookup"><span data-stu-id="d9b9c-227">In this case your organization should consider [pass-through authentication](/azure/active-directory/connect/active-directory-aadconnect-pass-through-authentication).</span></span>
* <span data-ttu-id="d9b9c-228">Вам может потребоваться надежный единый вход для пользователей для доступа к облачным ресурсам с компьютеров, входящих в домен, в корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-228">You might require that users experience seamless single sign-on (SSO) when accessing cloud resources from domain-joined machines on the corporate network.</span></span>
* <span data-ttu-id="d9b9c-229">В организации могут быть развернуты службы федерации Active Directory (AD FS) или сторонние решения федерации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-229">Your organization might already have Active Directory Federation Services (AD FS) or a third party federation provider deployed.</span></span> <span data-ttu-id="d9b9c-230">Вы можете настроить Azure AD использовать эту инфраструктуру для реализации проверки подлинности и единого входа, а не использовать информацию о пароле, хранимую в облаке.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-230">You can configure Azure AD to use this infrastructure to implement authentication and SSO rather than by using password information held in the cloud.</span></span>

<span data-ttu-id="d9b9c-231">[Дополнительные сведения см. в статье ][aad-user-sign-in].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-231">For more information, see [Azure AD Connect User Sign on options][aad-user-sign-in].</span></span>

### <a name="azure-ad-application-proxy"></a><span data-ttu-id="d9b9c-232">Прокси приложения Azure AD</span><span class="sxs-lookup"><span data-stu-id="d9b9c-232">Azure AD application proxy</span></span> 

<span data-ttu-id="d9b9c-233">Используйте Azure AD для предоставления доступа к локальным приложениям.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-233">Use Azure AD to provide access to on-premises applications.</span></span>

<span data-ttu-id="d9b9c-234">Предоставляйте доступ к локальным веб-приложениям с помощью соединителей прокси приложения под управлением компонента прокси приложения Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-234">Expose your on-premises web applications using application proxy connectors managed by the Azure AD application proxy component.</span></span> <span data-ttu-id="d9b9c-235">Соединитель прокси приложения открывает исходящее сетевое подключение к прокси приложения Azure AD, а удаленные запросы пользователей через это соединение направляются обратно из Azure AD в веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-235">The application proxy connector opens an outbound network connection to the Azure AD application proxy, and remote users' requests are routed back from Azure AD through this connection to the web apps.</span></span> <span data-ttu-id="d9b9c-236">Благодаря этому не нужно открывать входящие порты в локальном брандмауэре. Кроме того, снижается площадь уязвимости вашей организации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-236">This removes the need to open inbound ports in the on-premises firewall and reduces the attack surface exposed by your organization.</span></span>

<span data-ttu-id="d9b9c-237">Дополнительные сведения см. в статье [Начало работы с прокси приложения и установка соединителя][aad-application-proxy].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-237">For more information, see [Publish applications using Azure AD Application proxy][aad-application-proxy].</span></span>

### <a name="object-synchronization"></a><span data-ttu-id="d9b9c-238">Синхронизация объектов</span><span class="sxs-lookup"><span data-stu-id="d9b9c-238">Object synchronization</span></span> 

<span data-ttu-id="d9b9c-239">Конфигурация по умолчанию Azure AD Connect синхронизирует объекты из локального каталога Active Directory на основе правил, указанных в статье [Службы синхронизации Azure AD Connect: рекомендации по изменению конфигурации по умолчанию][aad-connect-sync-default-rules].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-239">Azure AD Connect's default configuration synchronizes objects from your local Active Directory directory based on the rules specified in the article [Azure AD Connect sync: Understanding the default configuration][aad-connect-sync-default-rules].</span></span> <span data-ttu-id="d9b9c-240">Объекты, соответствующие этим правилам, синхронизируются, а остальные игнорируются.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-240">Objects that satisfy these rules are synchronized while all other objects are ignored.</span></span> <span data-ttu-id="d9b9c-241">Некоторые примеры правил:</span><span class="sxs-lookup"><span data-stu-id="d9b9c-241">Some example rules:</span></span>

* <span data-ttu-id="d9b9c-242">Объекты пользователя должны иметь уникальный атрибут *sourceAnchor*, а также должен быть указан атрибут *accountEnabled*.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-242">User objects must have a unique *sourceAnchor* attribute and the *accountEnabled* attribute must be populated.</span></span>
* <span data-ttu-id="d9b9c-243">Объекты пользователя должны иметь атрибут *sAMAccountName* и не могут начинаться с текста *Azure AD_* или *MSOL_*.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-243">User objects must have a *sAMAccountName* attribute and cannot start with the text *Azure AD_* or *MSOL_*.</span></span>

<span data-ttu-id="d9b9c-244">В Azure AD Connect применяется несколько правил к объектам User, Contact, Group, ForeignSecurityPrincipal и Computer.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-244">Azure AD Connect applies several rules to User, Contact, Group, ForeignSecurityPrincipal, and Computer objects.</span></span> <span data-ttu-id="d9b9c-245">Если необходимо изменить набор правил по умолчанию, воспользуйтесь редактором правил синхронизации, установленным с Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-245">Use the Synchronization Rules Editor installed with Azure AD Connect if you need to modify the default set of rules.</span></span> <span data-ttu-id="d9b9c-246">Дополнительные сведения см. в статье [Службы синхронизации Azure AD Connect: рекомендации по изменению конфигурации по умолчанию][aad-connect-sync-default-rules].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-246">For more information, see [Azure AD Connect sync: Understanding the default configuration][aad-connect-sync-default-rules]).</span></span>

<span data-ttu-id="d9b9c-247">Вы также можете определить собственные фильтры, чтобы ограничить объекты, которые будут синхронизироваться в домене или подразделении.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-247">You can also define your own filters to limit the objects to be synchronized by domain or OU.</span></span> <span data-ttu-id="d9b9c-248">Кроме того, можно реализовать сложную настраиваемую фильтрацию, как описано в статье [Синхронизация Azure AD Connect: настройка фильтрации][aad-filtering].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-248">Alternatively, you can implement more complex custom filtering such as that described in [Azure AD Connect sync: Configure Filtering][aad-filtering].</span></span>

### <a name="monitoring"></a><span data-ttu-id="d9b9c-249">Мониторинг</span><span class="sxs-lookup"><span data-stu-id="d9b9c-249">Monitoring</span></span> 

<span data-ttu-id="d9b9c-250">Наблюдение за работоспособностью выполняется с помощью следующих локальных агентов:</span><span class="sxs-lookup"><span data-stu-id="d9b9c-250">Health monitoring is performed by the following agents installed on-premises:</span></span>

* <span data-ttu-id="d9b9c-251">Azure AD Connect устанавливает агент, который собирает сведения об операциях синхронизации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-251">Azure AD Connect installs an agent that captures information about synchronization operations.</span></span> <span data-ttu-id="d9b9c-252">Колонку Azure AD Connect Health на портале Azure можно использовать для мониторинга его работоспособности и производительности.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-252">Use the Azure AD Connect Health blade in the Azure portal to monitor its health and performance.</span></span> <span data-ttu-id="d9b9c-253">Дополнительные сведения см. в статье [Мониторинг синхронизации Azure AD Connect с помощью Azure AD Connect Health][aad-health].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-253">For more information, see [Using Azure AD Connect Health for sync][aad-health].</span></span>
* <span data-ttu-id="d9b9c-254">Для наблюдения за работоспособностью доменов и каталогов AD DS из Azure установите Azure AD Connect Health для агента AD DS на компьютере в локальном домене.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-254">To monitor the health of the AD DS domains and directories from Azure, install the Azure AD Connect Health for AD DS agent on a machine within the on-premises domain.</span></span> <span data-ttu-id="d9b9c-255">Колонку Azure Active Directory Connect Health на портале Azure можно использовать для наблюдения за работоспособностью.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-255">Use the Azure Active Directory Connect Health blade in the Azure portal for health monitoring.</span></span> <span data-ttu-id="d9b9c-256">Дополнительные сведения см. в статье [Использование Azure AD Connect Health с AD DS][aad-health-adds].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-256">For more information, see [Using Azure AD Connect Health with AD DS][aad-health-adds]</span></span> 
* <span data-ttu-id="d9b9c-257">Установите Azure AD Connect Health для агента AD FS для наблюдения за работоспособностью служб, запущенных локально, и используйте колонку Azure Active Directory Connect Health на портале Azure для мониторинга AD FS.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-257">Install the Azure AD Connect Health for AD FS agent to monitor the health of services running on on-premises, and use the Azure Active Directory Connect Health blade in the Azure portal to monitor AD FS.</span></span> <span data-ttu-id="d9b9c-258">Дополнительные сведения см. в статье [Мониторинг AD FS с помощью Azure AD Connect Health][aad-health-adfs].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-258">For more information, see [Using Azure AD Connect Health with AD FS][aad-health-adfs]</span></span>

<span data-ttu-id="d9b9c-259">Дополнительные сведения об установке агентов AD Connect Health и их требованиях см. в статье [Установка агента Azure AD Connect Health][aad-agent-installation].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-259">For more information on installing the AD Connect Health agents and their requirements, see [Azure AD Connect Health Agent Installation][aad-agent-installation].</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="d9b9c-260">Вопросы масштабируемости</span><span class="sxs-lookup"><span data-stu-id="d9b9c-260">Scalability considerations</span></span>

<span data-ttu-id="d9b9c-261">Служба Azure AD поддерживает масштабируемость на основе реплик с одной первичной репликой, обрабатывающей операции записи, и несколькими вторичными репликами, предназначенными только для чтения.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-261">The Azure AD service supports scalability based on replicas, with a single primary replica that handles write operations plus multiple read-only secondary replicas.</span></span> <span data-ttu-id="d9b9c-262">Azure AD прозрачно перенаправляет попытки операций записи во вторичных репликах в первичную реплику и обеспечивает итоговую согласованность.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-262">Azure AD transparently redirects attempted writes made against secondary replicas to the primary replica and provides eventual consistency.</span></span> <span data-ttu-id="d9b9c-263">Все изменения в основной реплике распространяются на вторичные.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-263">All changes made to the primary replica are propagated to the secondary replicas.</span></span> <span data-ttu-id="d9b9c-264">Эта архитектура хорошо масштабируется, так как большинство операций Azure AD — это операции чтения, а не записи.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-264">This architecture scales well because most operations against Azure AD are reads rather than writes.</span></span> <span data-ttu-id="d9b9c-265">Дополнительные сведения см. в статье [Azure AD: Under the hood of our geo-redundant, highly available, distributed cloud directory][aad-scalability] (Azure AD: как работает геоизбыточный высокодоступный распределенный облачный каталог).</span><span class="sxs-lookup"><span data-stu-id="d9b9c-265">For more information, see [Azure AD: Under the hood of our geo-redundant, highly available, distributed cloud directory][aad-scalability].</span></span>

<span data-ttu-id="d9b9c-266">Для сервера синхронизации Azure AD Connect определите, сколько объектов скорее всего синхронизируются из локального каталога.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-266">For the Azure AD Connect sync server, determine how many objects you are likely to synchronize from your local directory.</span></span> <span data-ttu-id="d9b9c-267">Если имеется менее 100 000 объектов, можно использовать стандартное программное обеспечение SQL Server Express LocalDB, поставляемое с Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-267">If you have less than 100,000 objects, you can use the default SQL Server Express LocalDB software provided with Azure AD Connect.</span></span> <span data-ttu-id="d9b9c-268">Если имеется больше объектов, необходимо установить рабочую версию SQL Server и выполнить выборочную установку Azure AD Connect, указав, что следует использовать имеющийся экземпляр SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-268">If you have a larger number of objects, you should install a production version of SQL Server and perform a custom installation of Azure AD Connect, specifying that it should use an existing instance of SQL Server.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="d9b9c-269">Вопросы доступности</span><span class="sxs-lookup"><span data-stu-id="d9b9c-269">Availability considerations</span></span>

<span data-ttu-id="d9b9c-270">Служба Azure AD географически распределена и выполняется в нескольких центрах обработки данных по всему миру с автоматической отработкой отказа.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-270">The Azure AD service is geo-distributed and runs in multiple data centers spread around the world with automated failover.</span></span> <span data-ttu-id="d9b9c-271">Если центр обработки данных становится недоступным, Azure AD обеспечивает возможность доступа к данным каталога для экземпляра в двух дополнительных географически разделенных центрах обработки данных.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-271">If a data center becomes unavailable, Azure AD ensures that your directory data is available for instance access in at least two more regionally dispersed data centers.</span></span>

> [!NOTE]
> <span data-ttu-id="d9b9c-272">Соглашение об уровне обслуживания (SLA) для Azure AD Basic и Premium гарантирует уровень доступности не менее 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-272">The service level agreement (SLA) for Azure AD Basic and Premium services guarantees at least 99.9% availability.</span></span> <span data-ttu-id="d9b9c-273">Для уровня "Бесплатный" Azure AD соглашение об уровне обслуживания не предусмотрено.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-273">There is no SLA for the Free tier of Azure AD.</span></span> <span data-ttu-id="d9b9c-274">Дополнительные сведения см. в статье [Соглашение об уровне обслуживания для Azure Active Directory][sla-aad].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-274">For more information, see [SLA for Azure Active Directory][sla-aad].</span></span>
> 
> 

<span data-ttu-id="d9b9c-275">Рассмотрите возможность подготовки второго экземпляра сервера синхронизации Azure AD Connect в промежуточном режиме для повышения уровня доступности, как описано в разделе с рекомендациями по топологии.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-275">Consider provisioning a second instance of Azure AD Connect sync server in staging mode to increase availability, as discussed in the topology recommendations section.</span></span> 

<span data-ttu-id="d9b9c-276">Если вы не используете экземпляр SQL Server Express LocalDB, который поставляется с Azure AD Connect, рассмотрите возможность использования кластеризации SQL для обеспечения высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-276">If you are not using the SQL Server Express LocalDB instance that comes with Azure AD Connect, consider using SQL clustering to achieve high availability.</span></span> <span data-ttu-id="d9b9c-277">Решения, например зеркальное отображение и Always On, не поддерживаются в Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-277">Solutions such as mirroring and Always On are not supported by Azure AD Connect.</span></span>

<span data-ttu-id="d9b9c-278">Дополнительные рекомендации по обеспечению высокого уровня доступности на сервере синхронизации Azure AD Connect, а также данные о способах восстановления после сбоя см. в разделе "Аварийное восстановление" статьи [Службы синхронизации Azure AD Connect: рабочие задачи и рекомендации][aad-sync-disaster-recovery].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-278">For additional considerations about achieving high availability of the Azure AD Connect sync server and also how to recover after a failure, see [Azure AD Connect sync: Operational tasks and considerations - Disaster Recovery][aad-sync-disaster-recovery].</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="d9b9c-279">Вопросы управляемости</span><span class="sxs-lookup"><span data-stu-id="d9b9c-279">Manageability considerations</span></span>

<span data-ttu-id="d9b9c-280">Существует два аспекта управления Azure AD:</span><span class="sxs-lookup"><span data-stu-id="d9b9c-280">There are two aspects to managing Azure AD:</span></span>

* <span data-ttu-id="d9b9c-281">Администрирование Azure AD в облаке.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-281">Administering Azure AD in the cloud.</span></span>
* <span data-ttu-id="d9b9c-282">Обслуживание серверов синхронизации Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-282">Maintaining the Azure AD Connect sync servers.</span></span>

<span data-ttu-id="d9b9c-283">Azure AD предоставляет следующие возможности для управления доменами и каталогами в облаке:</span><span class="sxs-lookup"><span data-stu-id="d9b9c-283">Azure AD provides the following options for managing domains and directories in the cloud:</span></span> 

* <span data-ttu-id="d9b9c-284">**Модуль PowerShell для Azure Active Directory.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-284">**Azure Active Directory PowerShell Module**.</span></span> <span data-ttu-id="d9b9c-285">Используйте этот [модуль][aad-powershell], если нужно создать скрипты для общих задач администрирования Azure AD, таких как управление пользователями, управление доменами и настройка единого входа.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-285">Use this [module][aad-powershell] if you need to script common Azure AD administrative tasks such as user management, domain management, and configuring single sign-on.</span></span>
* <span data-ttu-id="d9b9c-286">**Колонка управления Azure AD на портале Azure.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-286">**Azure AD management blade in the Azure portal**.</span></span> <span data-ttu-id="d9b9c-287">Здесь представлено интерактивное представление управления каталога, которое позволяет контролировать и настраивать большинство аспектов Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-287">This blade provides an interactive management view of the directory, and enables you to control and configure most aspects of Azure AD.</span></span> 

<span data-ttu-id="d9b9c-288">Azure AD Connect устанавливает следующие средства для поддержки служб синхронизации Azure AD Connect из локального компьютера:</span><span class="sxs-lookup"><span data-stu-id="d9b9c-288">Azure AD Connect installs the following tools to maintain Azure AD Connect sync services from your on-premises machines:</span></span>
  
* <span data-ttu-id="d9b9c-289">**Консоль Microsoft Azure Active Directory Connect.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-289">**Microsoft Azure Active Directory Connect console**.</span></span> <span data-ttu-id="d9b9c-290">Это средство позволяет изменить конфигурацию сервера Azure AD Sync, настроить синхронизацию, включить или отключить промежуточный режим и переключить режим входа пользователя.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-290">This tool enables you to modify the configuration of the Azure AD Sync server, customize how synchronization occurs, enable or disable staging mode, and switch the user sign-in mode.</span></span> <span data-ttu-id="d9b9c-291">Обратите внимание, что вход в Active Directory FS можно настроить с помощью локальной инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-291">Note that you can enable Active Directory FS sign-in using your on-premises infrastructure.</span></span>
* <span data-ttu-id="d9b9c-292">**Synchronization Service Manager.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-292">**Synchronization Service Manager**.</span></span> <span data-ttu-id="d9b9c-293">Используйте вкладку *Операции* в этом средстве для управления процессом синхронизации и обнаружения сбоев любой части процесса.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-293">Use the *Operations* tab in this tool to manage the synchronization process and detect whether any parts of the process have failed.</span></span> <span data-ttu-id="d9b9c-294">Вы можете активировать синхронизацию вручную с помощью этого средства.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-294">You can trigger synchronizations manually using this tool.</span></span> <span data-ttu-id="d9b9c-295">Вкладка *Соединители* позволяет управлять подключениями для доменов, к которым присоединен обработчик синхронизации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-295">The *Connectors* tab enables you to control the connections for the domains that the synchronization engine is attached to.</span></span>
* <span data-ttu-id="d9b9c-296">**Редактор правил синхронизации.**</span><span class="sxs-lookup"><span data-stu-id="d9b9c-296">**Synchronization Rules Editor**.</span></span> <span data-ttu-id="d9b9c-297">Это средство можно использовать для настройки способа преобразования объектов при копировании между локальным каталогом и Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-297">Use this tool to customize the way objects are transformed when they are copied between an on-premises directory and Azure AD.</span></span> <span data-ttu-id="d9b9c-298">Оно позволяет указать дополнительные атрибуты и объекты для синхронизации, а затем выполняет фильтры, чтобы определить, какие объекты следует синхронизировать.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-298">This tool enables you to specify additional attributes and objects for synchronization, then executes filters to determine which objects should or should not be synchronized.</span></span> <span data-ttu-id="d9b9c-299">Дополнительные сведения см. в разделе о редакторе правил синхронизации в документе [Службы синхронизации Azure AD Connect: рекомендации по изменению конфигурации по умолчанию][aad-connect-sync-default-rules].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-299">For more information, see the Synchronization Rule Editor section in the document [Azure AD Connect sync: Understanding the default configuration][aad-connect-sync-default-rules].</span></span>

<span data-ttu-id="d9b9c-300">Дополнительные сведения и советы по управлению Azure AD Connect см. в статье [Службы синхронизации Azure AD Connect: рекомендации по изменению конфигурации по умолчанию][aad-sync-best-practices].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-300">For more information and tips for managing Azure AD Connect, see [Azure AD Connect sync: Best practices for changing the default configuration][aad-sync-best-practices].</span></span>

## <a name="security-considerations"></a><span data-ttu-id="d9b9c-301">Вопросы безопасности</span><span class="sxs-lookup"><span data-stu-id="d9b9c-301">Security considerations</span></span>

<span data-ttu-id="d9b9c-302">Используйте управление условным доступом, чтобы отклонять запросы на проверку подлинности из неизвестного источника:</span><span class="sxs-lookup"><span data-stu-id="d9b9c-302">Use conditional access control to deny authentication requests from unexpected sources:</span></span>

- <span data-ttu-id="d9b9c-303">Активируйте [Многофакторную идентификацию Microsoft Azure (MFA)][azure-multifactor-authentication], если пользователь пытается подключиться из ненадежного расположения, например через Интернет, а не через доверенную сеть.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-303">Trigger [Azure Multi-Factor Authentication (MFA)][azure-multifactor-authentication] if a user attempts to connect from a nontrusted location such as across the Internet instead of a trusted network.</span></span>

- <span data-ttu-id="d9b9c-304">Используйте тип платформы устройств пользователя (iOS, Android, Windows Mobile, Windows), чтобы определить политику доступа к приложениям и функциям.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-304">Use the device platform type of the user (iOS, Android, Windows Mobile, Windows) to determine access policy to applications and features.</span></span>

- <span data-ttu-id="d9b9c-305">Записывайте сведения о состоянии устройств пользователей (выключено или включено) и добавляйте их в проверку политики доступа.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-305">Record the enabled/disabled state of users' devices, and incorporate this information into the access policy checks.</span></span> <span data-ttu-id="d9b9c-306">Например, в случае утери или кражи телефона пользователя его нужно записать как отключенный, чтобы он не использовался для получения доступа.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-306">For example, if a user's phone is lost or stolen it should be recorded as disabled to prevent it from being used to gain access.</span></span>

- <span data-ttu-id="d9b9c-307">Управляйте доступом пользователя к ресурсам на основе членства в группе.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-307">Control user access to resources based on group membership.</span></span> <span data-ttu-id="d9b9c-308">Используйте [правила динамического членства Azure AD][aad-dynamic-membership-rules] для упрощения администрирования группы.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-308">Use [Azure AD dynamic membership rules][aad-dynamic-membership-rules] to simplify group administration.</span></span> <span data-ttu-id="d9b9c-309">Общие сведения о том, как это работает, см. в видео [Azure AD: Introduction to Dynamic Memberships for Groups][aad-dynamic-memberships] (Azure AD: введение в динамическое членство для групп).</span><span class="sxs-lookup"><span data-stu-id="d9b9c-309">For a brief overview of how this works, see [Introduction to Dynamic Memberships for Groups][aad-dynamic-memberships].</span></span>

- <span data-ttu-id="d9b9c-310">Используйте политики рисков условного доступа с Azure AD Identity Protection для обеспечения надежной защиты на основе необычных действий при входе или других событий.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-310">Use conditional access risk policies with Azure AD Identity Protection to provide advanced protection based on unusual sign-in activities or other events.</span></span>

<span data-ttu-id="d9b9c-311">Дополнительные сведения см. в статье [Условный доступ в Azure Active Directory][aad-conditional-access].</span><span class="sxs-lookup"><span data-stu-id="d9b9c-311">For more information, see [Azure Active Directory conditional access][aad-conditional-access].</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="d9b9c-312">Развертывание решения</span><span class="sxs-lookup"><span data-stu-id="d9b9c-312">Deploy the solution</span></span>

<span data-ttu-id="d9b9c-313">В репозитории GitHub доступен шаблон развертывания эталонной архитектуры, реализующей эти рекомендации.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-313">A deployment for a reference architecture that implements these recommendations and considerations is available on GitHub.</span></span> <span data-ttu-id="d9b9c-314">В этой эталонной архитектуре развертывается смоделированная локальная сеть в Azure, в которой можно выполнять проверки и экспериментировать.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-314">This reference architecture deploys a simulated on-premises network in Azure that you can use to test and experiment.</span></span> <span data-ttu-id="d9b9c-315">Эталонную архитектуру можно развернуть с помощью виртуальных машин Windows или Linux, следуя приведенным ниже инструкциям:</span><span class="sxs-lookup"><span data-stu-id="d9b9c-315">The reference architecture can be deployed with either with Windows or Linux VMs by following the directions below:</span></span> 

1. <span data-ttu-id="d9b9c-316">Нажмите кнопку ниже:</span><span class="sxs-lookup"><span data-stu-id="d9b9c-316">Click the button below:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Fidentity-reference-architectures%2Fmaster%2Fazure-ad%2Fazuredeploy.json" target="_blank"><img src="https://azuredeploy.net/deploybutton.png"/></a>
2. <span data-ttu-id="d9b9c-317">Ссылка откроется на портале Azure, где нужно задать значения для следующих параметров.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-317">Once the link has opened in the Azure portal, you must enter values for some of the settings:</span></span> 
   * <span data-ttu-id="d9b9c-318">Имя **группы ресурсов** уже определено в файле параметров, поэтому выберите **Создать** и введите `ra-aad-onpremise-rg` в текстовом поле.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-318">The **Resource group** name is already defined in the parameter file, so select **Create New** and enter `ra-aad-onpremise-rg` in the text box.</span></span>
   * <span data-ttu-id="d9b9c-319">В раскрывающемся списке **Расположение** выберите регион.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-319">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="d9b9c-320">Не изменяйте поля **Template Root Uri** (Корневой URI шаблона) или **Parameter Root Uri** (Корневой URI параметра).</span><span class="sxs-lookup"><span data-stu-id="d9b9c-320">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="d9b9c-321">В раскрывающемся списке **Тип ОС** выберите **Windows** или **Linux**.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-321">Select **windows** or **linux** in the **Os Type** the drop down box.</span></span>
   * <span data-ttu-id="d9b9c-322">Прочтите условия использования и установите флажок **Я принимаю указанные выше условия**.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-322">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="d9b9c-323">Нажмите кнопку **Приобрести**.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-323">Click the **Purchase** button.</span></span>
3. <span data-ttu-id="d9b9c-324">Дождитесь завершения развертывания.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-324">Wait for the deployment to complete.</span></span>
4. <span data-ttu-id="d9b9c-325">В файлах параметров содержится жестко заданное имя пользователя с ролью администратора и пароль. Мы настоятельно рекомендуем немедленно изменить эти параметры на всех виртуальных машинах.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-325">The parameter files include a hard-coded administrator user names and passwords, and it is strongly recommended that you immediately change both on all the VMs.</span></span> <span data-ttu-id="d9b9c-326">Щелкните каждую виртуальную машину на портале Azure и выберите **Сброс пароля** в колонке **Поддержка и устранение неполадок**.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-326">Click each VM in the Azure Portal then click on **Reset password** in the **Support + troubleshooting** blade.</span></span> <span data-ttu-id="d9b9c-327">В раскрывающемся списке **Режим** выберите **Сбросить пароль** и введите новое **имя пользователя** и **пароль**.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-327">Select **Reset password** in the **Mode** drop down box, then select a new **User name** and **Password**.</span></span> <span data-ttu-id="d9b9c-328">Нажмите кнопку **Обновить**, чтобы сохранить новое имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="d9b9c-328">Click the **Update** button to persist the new user name and password.</span></span>

<!-- links -->

[implementing-a-multi-tier-architecture-on-Azure]: ../virtual-machines-windows/n-tier.md

[aad-agent-installation]: /azure/active-directory/active-directory-aadconnect-health-agent-install
[aad-application-proxy]: /azure/active-directory/active-directory-application-proxy-enable
[aad-conditional-access]: /azure/active-directory//active-directory-conditional-access
[aad-connect-sync-default-rules]: /azure/active-directory/hybrid/concept-azure-ad-connect-sync-default-configuration
[aad-connect-sync-operational-tasks]: /azure/active-directory/hybrid/how-to-connect-sync-operations
[aad-dynamic-memberships]: https://youtu.be/Tdiz2JqCl9Q
[aad-dynamic-membership-rules]: /azure/active-directory/active-directory-accessmanagement-groups-with-advanced-rules
[aad-editions]: /azure/active-directory/active-directory-editions
[aad-filtering]: /azure/active-directory/hybrid/how-to-connect-sync-configure-filtering
[aad-health]: /azure/active-directory/active-directory-aadconnect-health-sync
[aad-health-adds]: /azure/active-directory/active-directory-aadconnect-health-adds
[aad-health-adfs]: /azure/active-directory/active-directory-aadconnect-health-adfs
[aad-identity-protection]: /azure/active-directory/active-directory-identityprotection
[aad-password-management]: /azure/active-directory/active-directory-passwords-customize
[aad-powershell]: https://msdn.microsoft.com/library/azure/mt757189.aspx
[aad-reporting-guide]: /azure/active-directory/active-directory-reporting-guide
[aad-scalability]: https://blogs.technet.microsoft.com/enterprisemobility/2014/09/02/azure-ad-under-the-hood-of-our-geo-redundant-highly-available-distributed-cloud-directory/
[aad-sync-best-practices]: /azure/active-directory/hybrid/how-to-connect-sync-best-practices-changing-default-configuration
[aad-sync-disaster-recovery]: /azure/active-directory/hybrid/how-to-connect-sync-operations#disaster-recovery
[aad-sync-requirements]: /azure/active-directory/active-directory-hybrid-identity-design-considerations-directory-sync-requirements
[aad-topologies]: /azure/active-directory/hybrid/plan-connect-topologies
[aad-user-sign-in]: /azure/active-directory/hybrid/plan-connect-user-signin
[azure-active-directory]: /azure/active-directory-domain-services/active-directory-ds-overview
[azure-ad-connect]: /azure/active-directory/hybrid/whatis-hybrid-identity
[azure-multifactor-authentication]: /azure/multi-factor-authentication/multi-factor-authentication
[considerations]: ./considerations.md
[resource-manager-overview]: /azure/azure-resource-manager/resource-group-overview
[sla-aad]: https://azure.microsoft.com/support/legal/sla/active-directory
[visio-download]: https://archcenter.blob.core.windows.net/cdn/identity-architectures.vsdx


[0]: ./images/azure-ad.png "Архитектура идентификации в облаке с помощью Azure Active Directory"
