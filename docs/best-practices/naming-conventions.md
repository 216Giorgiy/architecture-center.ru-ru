---
title: Соглашения об именовании для ресурсов Azure
description: Соглашения об именовании для ресурсов Azure. Именование виртуальных машин, учетных записей хранения, сетей, виртуальных сетей, подсетей и других сущностей Azure
author: telmosampaio
ms.date: 05/18/2017
pnp.series.title: Best Practices
ms.openlocfilehash: 09bcfa3c0a0c46605f0025adad06f8049f109f1b
ms.sourcegitcommit: 776b8c1efc662d42273a33de3b82ec69e3cd80c5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/12/2018
ms.locfileid: "38987739"
---
# <a name="naming-conventions"></a>Соглашения об именовании.

[!INCLUDE [header](../_includes/header.md)]

В этой статье кратко изложены правила именования и ограничения для имен ресурсов Azure. Также приведены базовые рекомендации по использованию соглашений об именовании.  Эти рекомендации можно использовать как отправную точку для собственных соглашений, соответствующих конкретным потребностям.

Выбор имени для любого ресурса в Microsoft Azure является важным по следующим причинам.

* Имя будет сложно изменить позже.
* Имена должны соответствовать требованиям к типу ресурса, который они называют.

Находить ресурсы будет проще, если соглашения об именовании используются единообразно. Имена могут содержать информацию о роли ресурса в решении.

Чтобы использование стандартизации приносило результаты, соглашения об именовании следует определить и соблюдать во всех приложениях и организациях.

## <a name="naming-subscriptions"></a>Именование подписок
При именовании подписок подробные имена помогают лучше понять контекст и цель каждого ресурса.  Если в вашей среде несколько подписок, унифицированные соглашения об именовании значительно упростят их использование.

Вот как выглядит рекомендуемый шаблон именования подписок:

`<Company> <Department (optional)> <Product Line (optional)> <Environment>`

* Обычно все корпоративные подписки связаны с одной компанией. Но в некоторых компаниях есть сложная организационная структура с филиалами. Возможно, ИТ-решениями для всех этих компаний управляет централизованная группа сотрудников. В такой ситуации будет легче различать имена, если включить в них названия родительской (*Contoso*) и дочерей (*Northwind*) компаний.
* Отдел — это название части организации, который включает группу сотрудников. Этот элемент необязателен в пространстве имен.
* Линейка продуктов — конкретное имя для продукта или функции, используемое в отделе. Этот элемент обычно является необязательным для служб и приложений без внешних интерфейсов. Но мы настоятельно рекомендуем использовать его для всех общедоступных служб, которые важно легко различать и идентифицировать (например, для четкого разделения информации о выставлении счетов).
* Среда — имя, описывающее такие этапы жизненного цикла развертывания приложений или служб, как разработка, тестирование или производство.

| Компания | Department | Линейка продуктов или служба | Среда | Полное имя |
| --- | --- | --- | --- | --- |
| Contoso |SocialGaming |AwesomeService |Производство |Contoso SocialGaming AwesomeService Production |
| Contoso |SocialGaming |AwesomeService |Разработка |Contoso SocialGaming AwesomeService Dev |
| Contoso |IT |InternalApps |Производство |Contoso IT InternalApps Production |
| Contoso |IT |InternalApps |Разработка |Contoso IT InternalApps Dev |

См. дополнительные сведения о том, как следует организовать [рекомендуемую систему управление подписками][scaffold] на больших предприятиях.

## <a name="use-affixes-to-avoid-ambiguity"></a>Использование аффиксов для устранения неоднозначности

При именовании ресурсов в Azure рекомендуется использовать общепринятые префиксы или суффиксы для идентификации типа и контекста ресурса.  Конечно же, все сведения о типе, метаданных и контексте можно получить программным способом. Но единообразное применение аффиксов упрощает визуальное восприятие.  Когда вы добавляете аффиксы в соглашения об именовании, очень важно четко указать вариант его применения — в начале имени (префикс) или в конце (суффикс).

Например, служба, в которой размещено вычислительное ядро, может иметь такие два имени:

* SvcCalculationEngine (префикс);
* CalculationEngine-Svc (суффикс).

Аффиксы относятся к различным аспектам, описывающим конкретные ресурсы. В следующей таблице приведены примеры типичных случаев.

| Аспект | Пример | Примечания |
| --- | --- | --- |
| Среда |dev (разработка), prod (рабочая среда), QA (контроль качества) |Определяет среду для ресурса |
| Расположение |uw (запад США), ue (восток США) |Определяет регион, в котором развернут ресурс |
| Экземпляр |01, 02 |Для ресурсов с несколькими именованными экземплярами (например, веб-серверы). |
| Продукт или служба |свойства |Определяет продукт, приложение или службу, для которых предназначен этот ресурс. |
| Роль |sql, web, messaging |Определяет роль связанного ресурса |

При разработке определенного соглашения об именовании для компании или проектов важно выбрать общий набор аффиксов и их унифицированное расположение (суффикс или префикс).

## <a name="naming-rules-and-restrictions"></a>Правила именования и ограничения

Каждый тип ресурса или службы в Azure связан с набором ограничений и областей применения имен. Все соглашения об именовании и схемы должны соответствовать этим правилам и областям.  Например, имя виртуальной машины сопоставляется с именем DNS, следовательно, оно должно быть уникальным в пределах всей платформы Azure. Тогда как имя виртуальной сети действительно только в пределах группы ресурсов, в которой создана эта сеть.

В целом, старайтесь не использовать специальные символы (`-` или `_`) в качестве первого или последнего символа имени. Такие имена не пройдут проверку по большинству правил.

### <a name="general"></a>Общие сведения

| Сущность | Область | Длина | Регистр | Допустимые символы | Рекомендуемый шаблон | Пример |
| --- | --- | --- | --- | --- | --- | --- |
|Группа ресурсов |Подписка |1–90 |Без учета регистра |Буквы, цифры, символ подчеркивания, круглые скобки, дефис и точка (но не в конце имени) и символы Юникода |`<service short name>-<environment>-rg` |`profx-prod-rg` |
|Группа доступности |Группа ресурсов |От 1 до 80 |Без учета регистра |Буквы, цифры, символ подчеркивания и дефис |`<service-short-name>-<context>-as` |`profx-sql-as` |
|Тег |Связанная сущность |512 (имя), 256 (значение) |Без учета регистра |Буквенно-цифровой |`"key" : "value"` |`"department" : "Central IT"` |

### <a name="compute"></a>Службы вычислений

| Сущность | Область | Длина | Регистр | Допустимые символы | Рекомендуемый шаблон | Пример |
| --- | --- | --- | --- | --- | --- | --- |
|Виртуальная машина |Группа ресурсов |1–15 (Windows), 1–64 (Linux) |Без учета регистра |Буквы, цифры, дефис |`<name>-<role>-vm<number>` |`profx-sql-vm1` |
|Приложение-функция | Глобальные |1–60 |Без учета регистра |Буквы, цифры, дефис |`<name>-func` |`calcprofit-func` |

> [!NOTE]
> У виртуальных машин в Azure два разных имени: имя виртуальной машины и имя узла. Когда вы создаете виртуальную машину на портале, для имени узла и имени ресурса виртуальной машины устанавливаются одинаковые значения. Выше указаны ограничения для имени узла. Имя ресурса может содержать до 64 символов.

### <a name="storage"></a>Служба хранилища

| Сущность | Область | Длина | Регистр | Допустимые символы | Рекомендуемый шаблон | Пример |
| --- | --- | --- | --- | --- | --- | --- |
|Имя учетной записи хранения (данные о ней) |Глобальные |От 3 до 24 |Нижний регистр |Буквенно-цифровой |`<globally unique name><number>` (используйте функцию для расчета уникального идентификатора для именования учетных записей хранения) |`profxdata001` |
|Имя (диски) учетной записи хранения |Глобальные |От 3 до 24 |Нижний регистр |Буквенно-цифровой |`<vm name without hyphens>st<number>` |`profxsql001st0` |
| Имя контейнера |Учетная запись хранения |От 3 до 63 |Нижний регистр |Буквы, цифры, дефис |`<context>` |`logs` |
|Имя большого двоичного объекта | Контейнер |От 1 до 1024 |С учетом регистра |Любой символ URL-адреса |`<variable based on blob usage>` |`<variable based on blob usage>` |
|Имя очереди |Учетная запись хранения |От 3 до 63 |Нижний регистр |Буквы, цифры, дефис |`<service short name>-<context>-<num>` |`awesomeservice-messages-001` |
|Имя таблицы | Учетная запись хранения |От 3 до 63 |Без учета регистра |Буквенно-цифровой |`<service short name><context>` |`awesomeservicelogs` |
|Имя файла | Учетная запись хранения |От 3 до 63 |Нижний регистр | Буквенно-цифровой |`<variable based on blob usage>` |`<variable based on blob usage>` |
|Data Lake Store | Глобальные |От 3 до 24 |Нижний регистр | Буквенно-цифровой |`<name>dls` |`telemetrydls` |

### <a name="networking"></a>Сеть

| Сущность | Область | Длина | Регистр | Допустимые символы | Рекомендуемый шаблон | Пример |
| --- | --- | --- | --- | --- | --- | --- |
|Виртуальная сеть (VNet) |Группа ресурсов |2–64 |Без учета регистра |Буквы, цифры, дефис, символ подчеркивания, точка |`<service short name>-vnet` |`profx-vnet` |
|Подсеть |Родительская виртуальная сеть |От 2 до 80 |Без учета регистра |Буквы, цифры, дефис, символ подчеркивания, точка |`<descriptive context>` |`web` |
|Сетевой интерфейс |Группа ресурсов |От 1 до 80 |Без учета регистра |Буквы, цифры, дефис, символ подчеркивания, точка |`<vmname>-nic<num>` |`profx-sql1-nic1` |
|Группа безопасности сети |Группа ресурсов |От 1 до 80 |Без учета регистра |Буквы, цифры, дефис, символ подчеркивания, точка |`<service short name>-<context>-nsg` |`profx-app-nsg` |
|Правило группы безопасности сети |Группа ресурсов |От 1 до 80 |Без учета регистра |Буквы, цифры, дефис, символ подчеркивания, точка |`<descriptive context>` |`sql-allow` |
|Общедоступный IP-адрес |Группа ресурсов |От 1 до 80 |Без учета регистра |Буквы, цифры, дефис, символ подчеркивания, точка |`<vm or service name>-pip` |`profx-sql1-pip` |
|Load Balancer |Группа ресурсов |От 1 до 80 |Без учета регистра |Буквы, цифры, дефис, символ подчеркивания, точка |`<service or role>-lb` |`profx-lb` |
|Конфигурация правил балансировки нагрузки |Load Balancer |От 1 до 80 |Без учета регистра |Буквы, цифры, дефис, символ подчеркивания, точка |`<descriptive context>` |`http` |
|Шлюз приложений Azure |Группа ресурсов |От 1 до 80 |Без учета регистра |Буквы, цифры, дефис, символ подчеркивания, точка |`<service or role>-agw` |`profx-agw` |
|Профиль диспетчера трафика |Группа ресурсов |1–63 |Без учета регистра |Буквы, цифры, дефис, точка |`<descriptive context>` |`app1` |

## <a name="organize-resources-with-tags"></a>Организация ресурсов с помощью тегов

Azure Resource Manager позволяет определять для сущностей теги с любыми текстовыми строками, которые упрощают определение контекста и автоматизацию.  Например, тег `"sqlVersion"="sql2014ee"` можно использовать для идентификации виртуальных машин под управлением SQL Server 2014 выпуска Enterprise. Теги должны использоваться для дополнения и улучшения контекста наряду с выбранным соглашением об именовании.

> [!TIP]
> Другим преимуществом тегов является то, что они охватывают несколько групп ресурсов, позволяя связывать и сопоставлять сущности в разных развертываниях.

Каждый ресурс или группа ресурсов может иметь не более **15** тегов. Имя тега ограничено 512 символами, а значение тега — 256 символами.

Дополнительные сведения о тегах ресурсов см. в статье [Использование тегов для организации ресурсов в Azure](/azure/azure-resource-manager/resource-group-using-tags/).

Ниже приведены некоторые наиболее распространенные случаи использования тегов.

* **Выставление счетов**. Группирование ресурсов с привязкой к кодам выставления счетов и возвратных платежей.
* **Определение контекста службы**. Определение ресурсов, размещенных в разных группах ресурсов, для применения общих операций и группирования.
* **Контроль доступа и контекст безопасности**. Определение административных ролей с учетом портфолио, систем, служб, приложений, экземпляров и т. п.

> [!TIP]
> Добавляйте теги заранее — и они будут у вас всегда.  Лучше иметь базовую схему добавления тегов заранее и время от времени ее корректировать, чем вносить изменения задним числом.

Примеры некоторых распространенных методов добавления тегов.

| Имя тега | Ключ | Пример | Комментарий |
| --- | --- | --- | --- |
| ИД выставления счета/внутреннего взимания средств за использование |billTo |`IT-Chargeback-1234` |Внутренний ввод/вывод или код выставления счета |
| Оператор или непосредственно ответственное лицо |managedBy |`joe@contoso.com` |Псевдоним или адрес электронной почты |
| Имя проекта |projectName |`myproject` |Имя проекта или линейки продуктов |
| Версия проекта |projectVersion |`3.4` |Версия проекта или линейки продуктов |
| Среда |Среда |`<Production, Staging, QA >` |Идентификатор среды |
| Уровень |Уровень |`Front End, Back End, Data` |Идентификация уровня или роли/контекста |
| Профиль данных |dataProfile |`Public, Confidential, Restricted, Internal` |Чувствительность данных, хранящихся в облаке |

## <a name="tips-and-tricks"></a>Советы и рекомендации

Некоторые типы ресурсов требуют особого внимания к именованию и соглашениям.

### <a name="virtual-machines"></a>Виртуальные машины

Рациональный подход к именованию виртуальных машин, особенно в крупных топологиях, существенно упрощает определение роли и задачи каждой виртуальной машины, облегчая работу со скриптами.

### <a name="storage-accounts-and-storage-entities"></a>Учетные записи хранения и сущности хранилища

Учетные записи хранения можно использовать двумя способами: при резервном копировании дисков виртуальных машин и хранении данных в больших двоичных объектах, очередях и таблицах.  Для учетных записей хранения, которые используются для дисков виртуальных машин, применяется соглашение об именовании, которое связывает их с именем родительской виртуальной машины. Также к имени может добавляться числовой суффикс, который позволяет использовать несколько учетных записей хранения для номеров SKU высокопроизводительных виртуальных машин.

> [!TIP]
> Соглашение об именовании для учетных записей хранения (как для данных, так и для дисков) должно допускать использование нескольких учетных записей хранения (это и предусматривает добавление числового суффикса).

Вы можете настроить пользовательское доменное имя для доступа к данным больших двоичных объектов из учетной записи хранения Azure. Адрес конечной точки по умолчанию для службы BLOB-объектов — https://\<имя\>.blob.core.windows.net.

Однако после сопоставления личного домена (например, www.contoso.com) с конечной точкой больших двоичных объектов для вашей учетной записи хранения вы также сможете, используя этот домен, получать доступ к данным больших двоичных объектов в учетной записи хранения. Например, пользовательское доменное имя позволяет обращаться к `http://mystorage.blob.core.windows.net/mycontainer/myblob` по адресу `http://www.contoso.com/mycontainer/myblob`.

Дополнительные сведения об этой возможности см. в руководстве по [настройке пользовательского доменного имени для конечной точки хранилища BLOB-объектов](/azure/storage/storage-custom-domain-name/).

Дополнительные сведения об именовании больших двоичных объектов, контейнеров и таблиц см. в следующем списке:

* [Именование контейнеров, больших двоичных объектов и метаданных и ссылка на них](https://msdn.microsoft.com/library/dd135715.aspx)
* [Именование очередей и метаданных](https://msdn.microsoft.com/library/dd179349.aspx)
* [Именование таблиц](https://msdn.microsoft.com/library/azure/dd179338.aspx)

Имя большого двоичного объекта может содержать любое сочетание символов, но символы зарезервированного URL-адреса необходимо правильно изолировать. Избегайте имен объектов, которые заканчиваются точкой (.), косой чертой (/) либо последовательностью или сочетанием этих двух символов. По соглашению, косая черта является **виртуальным** разделителем каталогов. Не используйте в имени большого двоичного объекта обратную косую черту (\\). Клиентские API могут разрешать ее использование, но затем произойдет сбой хэширования и подписи не будут совпадать.

Нельзя изменить имя учетной записи хранения или контейнера после ее создания. Если вы хотите изменить имя учетной записи, необходимо удалить ее и создать новую.

> [!TIP]
> Прежде чем начинать разработку новой службы или приложения, рекомендуется установить соглашение об именовании для всех учетных записей и типов хранения.

<!-- links -->

[scaffold]: /azure/azure-resource-manager/resource-manager-subscription-governance
