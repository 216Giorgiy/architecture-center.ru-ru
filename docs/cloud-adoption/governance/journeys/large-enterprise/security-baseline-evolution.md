---
title: 'CAF. Крупные предприятия — изменение основных способов защиты '
titleSuffix: Microsoft Cloud Adoption Framework for Azure
ms.service: architecture-center
ms.subservice: enterprise-cloud-adoption
ms.custom: governance
ms.date: 02/11/2019
description: Крупные предприятия — изменение основных способов защиты
author: BrianBlanchard
ms.openlocfilehash: 59fb3655f1ff2a5f0a30abc760c27c77b8f802af
ms.sourcegitcommit: 273e690c0cfabbc3822089c7d8bc743ef41d2b6e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2019
ms.locfileid: "55902535"
---
# <a name="large-enterprise-security-baseline-evolution"></a>Крупные предприятия. Изменение основных способов защиты

В этой статье, развивающей концепцию, описываются средства управления безопасностью, которые поддерживают перемещение защищенных данных в облако.

## <a name="evolution-of-the-narrative"></a>Развитие концепции

В течение нескольких месяцев ИТ-директор совместно работал с коллегами и юристами компании. Чтобы помочь существующим командам, занимающимся вопросами ИТ-безопасности и ИТ-управления, разработать новую политику в отношении защищенных данных, был приглашен консультант по вопросам управления с опытом в сфере кибербезопасности. Группа смогла добиться требуемой поддержки руководства и обновить существующую политику, чтобы персональные и финансовые данные могли размещаться утвержденными поставщиками облачных служб. Для этого потребовалось применить ряд требований к системе безопасности и реализовать процесс управления для проверки и регистрации соблюдения этих политик.

За последние 12 месяцев команда внедрения облачных решений очистила большую часть из 5000 ресурсов, расположенных в двух центрах обработки данных, поддержка которых будет прекращена. 350 несовместимых ресурсов были перемещены в альтернативный центр обработки данных. Осталось всего 1250 виртуальных машин, которые содержат защищенные данные.

### <a name="evolution-of-the-cloud-governance-team"></a>Изменения в команде управления облачными решениями

Наряду с развитием концепции также изменилась и команда управления облачными решениями. Два сотрудника, которые стояли у истоков команды, стали одними из самых авторитетных архитекторов облачных решений в компании. По мере работы новых команд с инновационными развертываниями значительно пополнилась коллекция скриптов конфигурации. Команда управления облачными решениями также изменилась. Недавно члены команды ИТ-операций объединили усилия с командой управления облачными решениями для подготовки к выполнению облачных операций. При этом архитекторы облачных решений, участвующие в организации этого сообщества, выступали одновременно защитниками и ускорителями облачных решений.

Хотя разница между этими ролями небольшая, она играет важную роль при создании ИТ-культуры, ориентированной на управление. Хранитель облачных решений устраняет проблемы, которые могут возникать при внедрении инноваций архитекторами облачных решений. Эти две роли по своей природе предназначены для противоположных целей. Защитник облачных решений отвечает за безопасность, поэтому другие архитекторы облачных решений могут действовать быстрее и аккуратнее. Ускоритель облачных решений выполняет обе упомянутые функции, но он также участвует в создании шаблонов, которые ускоряют развертывание и внедрение. Именно поэтому он выступает в роли ускорителя инноваций и хранителя пяти аспектов управления облаком.

### <a name="evolution-of-the-current-state"></a>Изменение текущего состояния

Ранее в рамках описываемой концепции компания запустила процесс вывода из эксплуатации двух центров обработки данных. Этот процесс предусматривает перенос некоторых приложений с устаревшими требованиями к аутентификации, для которых требуется изменить основные способы идентификации, как описано в [предыдущей статье](identity-baseline-evolution.md).

С того времени изменились некоторые факторы, влияющие на систему управления.

- Тысячи ИТ- и бизнес-ресурсов были развернуты в облаке.
- Команда разработчиков приложений реализовала конвейер непрерывной интеграции и непрерывного развертывания (CI/CD) для развертывания полностью облачного приложения с улучшенным пользовательским интерфейсом. Это приложение пока не взаимодействует с защищенными данными, поэтому оно не используется в рабочей среде.
- В рамках текущих ИТ-процессов команда бизнес-аналитики активно обрабатывает в облаке данные, связанные с логистикой и инвентаризацией, а также данные из сторонних источников. Эти данные используются при прогнозировании, которое может существенно повлиять на бизнесы-процессы. Тем не менее эти прогнозы и аналитика будут бесполезными, пока сведения о клиентах и финансовые данные не будут интегрированы в платформу данных.
- ИТ-команда реализует планы ИТ-директора и финансового директора по прекращению поддержки двух центров обработки данных. Почти 3500 ресурсов в двух центрах обработки данных были выведены из эксплуатации или перенесены.
- Также были обновлены политики, связанные с обработкой персональных и финансовых данных. При этом новые корпоративные политики зависят от реализации связанных политик безопасности и управления. Команды по-прежнему не могут работать в нормальном режиме.

### <a name="evolution-of-the-future-state"></a>Изменения в будущем

- На ранних, экспериментальных этапах команды, занимающиеся разработкой приложений и бизнес-аналитикой, продемонстрировали возможные улучшения путей взаимодействия с пользователем и решений на основе данных. Обе команды хотели бы выполнить внедрение облачных решений в течение следующих 18 месяцев путем их развертывания в рабочей среде.
- ИТ-команда разработала коммерческое обоснование для переноса еще пяти центров обработки данных в Azure. Это решение позволит в дальнейшем сократить затраты на ИТ-инфраструктуру и обеспечить большую гибкость при решении бизнес-задач. Хотя устаревшие центры обработки данных меньше по размеру, их вывод из эксплуатации, как ожидается, позволит сократить расходы вдвое.
- Для реализации требуемых инструментов, процессов и политик безопасности и управления был утвержден бюджет, предусматривающий капитальные и эксплуатационные расходы. Ожидается, что экономия от вывода из эксплуатации центров обработки данных с избытком покроет все затраты, связанные с реализацией этой новой инициативы. Руководители технологического и коммерческого отделов уверены в том, что эти инвестиции ускорят получение прибыли в других областях. А инициативная команда, занимающаяся управлением облачными решениями, стала авторитетным участником описываемого процесса с уполномоченным руководством и узкоспециализированным персоналом.
- В итоге все задействованные участники (команды, занимающиеся управлением облачными решениями и ИТ-решениями, а также обеспечением ИТ-безопасности) помогут реализовать требования к безопасности и управлению, позволив командам по внедрению облачных решений перенести защищенные данные в облако.

## <a name="evolution-of-tangible-risks"></a>Изменение реальных рисков

**Нарушение безопасности данных**. При внедрении любой новой платформы данных неизбежно возрастают риски, связанные с потенциальным нарушением безопасности данных. За внедрение решений, которые могут снизить эти риски, отвечают технические специалисты, внедряющие облачные технологии. Чтобы эти специалисты могли надлежащим образом выполнять свои обязанности, должна быть реализована продуманная стратегия безопасности и управления.

Риски для бизнеса связаны со следующими техническими проблемами:

- Критически важные приложения или защищенные данные могут быть случайно развернуты.
- Непродуманные решения, касающиеся шифрования, могут привести к раскрытию защищенных данных во время хранения.
- Неавторизованные пользователи могут получить доступ к защищенным данным.
- В результате внешних вторжений защищенные данные могут стать открытыми для доступа.
- В результате внешнего вторжения или атак типа "отказ в обслуживании" бизнес-процессы могут быть прерваны.
- Изменения в составе сотрудников или в структуре организации могут сделать возможным несанкционированный доступ к защищенным данным.
- Новые эксплойты могут создать условия для вторжения или несанкционированного доступа к данным.
- Несогласованные процессы развертывания могут привести к возникновению брешей в системе безопасности с последующими утечками данных и прерываниями работы.
- Изменения конфигурации и отсутствие требуемых обновлений могут привести к возникновению брешей в системе безопасности с последующими утечками данных и прерываниями работы.
- Использование разнородных пограничных устройств может увеличить расходы на сетевые операции.
- Несогласованная настройка устройств может стать причиной проблем с конфигурациями и ослабления системы безопасности.
- По мнению специалистов по кибербезопасности, также есть риск зависимости от поставщика при создании ключей шифрования c использованием единственной платформы поставщика облачных решений. Хотя это утверждение является необоснованным, сейчас оно принято командой как рабочее.

## <a name="evolution-of-the-policy-statements"></a>Изменение правил политики

Описанные ниже изменения в политике помогут минимизировать новые риски и упростить реализацию. Список выглядит длинным, но внедрять эти политики проще, чем кажется.

1. Все развернутые ресурсы необходимо классифицировать по важности и типу данных. Перед развертыванием в облаке эти классификации должны проверить специалисты команды по управлению облачными решениями и владельцы приложения.
2. Управление приложениями, которые содержат защищенные данные или обращаются к ним, имеет свои особенности. Как минимум такие приложения должны быть сегментированы, чтобы предотвратить нежелательный доступ к защищенным данным.
3. При хранении все защищенные данные должны быть зашифрованы.
4. Назначение повышенных привилегий в рамках любого сегмента, содержащего защищенные данные, должно быть исключением. Все эти исключения должны регистрироваться и регулярно проверяться командой по управлению облачными решениями.
5. Подсети, содержащие защищенные данные, должны быть изолированы от любых других подсетей. Сетевой трафик между подсетями, содержащими защищенные данные, должен регулярно проверяться.
6. Все подсети, содержащие защищенные данные, не должны быть напрямую доступны через общедоступный Интернет или через центры обработки данных. Доступ к таким подсетям должен осуществляться через промежуточные подсети. Весь доступ к таким подсетям должен осуществляться через брандмауэр с функциями сканирования пакетов и блокировки.
7. Средства управления должны проверять требования сетевой конфигурации, определенные командой по управлению безопасностью, и обеспечивать их соблюдение.
8. Средства управления должны разрешать развертывание только утвержденных образов виртуальных машин.
9. По возможности средства управления конфигурациями узлов должны применять требования политики к конфигурации любой гостевой операционной системы. Средства управления конфигурациями узлов должны учитывать объекты групповой политики (GPO) при настройке ресурсов.
10. Средства управления должны проверять включение автоматических обновлений во всех развернутых ресурсах. По возможности следует использовать автоматическое обновление. Если изменения не применялись с помощью средств, нарушения на уровне узлов следует рассмотреть с привлечением команд операционного управления и устранить в соответствии с операционными политиками. Ресурсы, которые не обновляются автоматически, необходимо включить в процессы, контролируемые командой ИТ-операций.
11. При создании новых подписок или групп управления для любых критически важных приложений либо защищенных данных требуется проверка со стороны команды по управлению облачными решениями. Это необходимо для назначения надлежащей схемы.
12. Модель доступа с минимальными привилегиями будет применяться к подписке, которая содержит критически важные приложения или защищенные данные.
13. Поставщик облачных решений должен обеспечивать интеграцию ключей шифрования под управлением существующего локального решения.
14. Поставщик облачных решений должен обеспечивать поддержку существующего решения для пограничных устройств и всех требуемых настроек для защиты границ общедоступной сети.
15. Поставщик облачных решений должен обеспечивать поддержку совместного подключения к глобальной сети. При этом передача данных должна осуществляться через существующее пограничное устройство.
16. Тенденции и уязвимости, которые могут повлиять на облачные развертывания, должны регулярно проверяться командой по обеспечению безопасности для подготовки обновлений основных способов защиты, используемых в облаке.
17. Средства развертывания должны быть утверждены командой управления облачными решениями для обеспечения непрерывного управления развернутыми ресурсами.
18. Скрипты развертывания должны храниться в центральном репозитории, доступном команде по управлению облачными решениями для периодической проверки и аудита.
19. Процессы управления предполагают проведение аудита во время развертывания и дальнейших регулярных проверок для обеспечения согласованности всех ресурсов.
20. При развертывании любых приложений, для работы с которыми требуется аутентификация клиента, должен использоваться утвержденный поставщик удостоверений, совместимый с основным поставщиком удостоверений для внутренних пользователей.
21. Процессы управления облачными ресурсами должны включать ежеквартальные проверки, выполняемые командами, которые занимаются вопросами идентификации. Это позволит определять вредоносные субъекты и тенденции использования, которые должны блокироваться конфигурацией облачных ресурсов.

## <a name="evolution-of-the-best-practices"></a>Изменение рекомендаций

В этом разделе статьи описано дальнейшее развитие концепции минимально жизнеспособного продукта системы управления путем включения новых политик Azure и реализации службы "Управление затратами Azure". Совокупно эти изменения проекта позволят внедрить новые правила корпоративной политики.

Новые рекомендации делятся на две категории: для корпоративных ИТ-решений (центральный узел) и внедряемых облачных решений (периферийная зона).

**Настройка подписки на корпоративные ИТ-решения со звездообразной архитектурой для централизации основных средств защиты**. Согласно этой рекомендации существующие возможности системы управления реализуются в виде [звездообразной архитектуры с общими службами][shared-services] — с некоторыми ключевыми дополнениями, внесенными командой по управлению облачными решениями.

1. Репозиторий Azure DevOps. Создайте репозиторий в Azure DevOps для хранения всех соответствующих шаблонов Azure Resource Manager и включенных в скрипты конфигураций, а также управления их версиями.
2. Шаблон звездообразной архитектуры.
    1. При создании шаблонов Resource Manager для ресурсов, используемых в корпоративных ИТ-решениях (центральный узел), можно использовать рекомендации по применению [эталонной звездообразной архитектуры с общими службами][shared-services].
    2. Используя эти шаблоны, структуру можно сделать воспроизводимой в рамках стратегии централизованного управления.
    3. В дополнение к описанной эталонной архитектуре рекомендуется создать шаблон NSG, определяющий требования к блокировке или включению в список разрешенных любых портов для виртуальной сети при размещении брандмауэра. Главным отличием этой группы NSG от используемых ранее групп NSG будет разрешение передавать общедоступный трафик в виртуальную сеть.
3. Создание политик Azure. Создайте политику с именем `Hub NSG Enforcement`, чтобы применить конфигурацию NSG, назначенную всем виртуальным сетям в рамках этой подписки. Примените встроенные политики для гостевой конфигурации следующим образом:
    1. Убедитесь, что веб-серверы Windows используют безопасные протоколы обмена данными.
    2. Убедитесь, что заданы правильные параметры безопасности на компьютерах Linux и Windows.
4. Схема корпоративных ИТ-решений
    1. Создайте схему Azure с именем `corporate-it-subscription`.
    2. Добавьте шаблоны звездообразной архитектуры и политику NSG для центрального узла.
5. Расширение исходной иерархии группы управления.
    1. Для каждой группы управления, для которой требуется включить поддержку защищенных данных, схема `corporate-it-subscription-blueprint` сделает возможным использование ускоренного центрального узла.
    2. Так как группы управления в этом примере кроме иерархии подразделений включают иерархию региональных экземпляров, эта схема будет развернута в каждом регионе.
    3. Для каждого региона в иерархии групп управления создайте подписку с именем `Corporate IT Subscription`.
    4. Примените схему `corporate-it-subscription-blueprint` к каждому региональному экземпляру.
    5. Это позволит настроить центральный узел для каждого подразделения в каждом регионе. Примечание. Дальнейшая экономия может быть достигнута при предоставлении подразделениям общего доступа к центральному узлу в каждом регионе.
6. Интеграция объектов групповой политики (GPO) с использованием Desired State Configuration (DSC).
    1. Процесс преобразования GPO в DSC может ускорить [этот проект управления](https://github.com/Microsoft/BaselineManagement), доступный на GitHub. * Обязательно сохраните DSC в репозитории вместе с шаблонами Resource Manager.
    2. Разверните DSC службы автоматизации Azure во всех экземплярах подписки на корпоративное ИТ-решение. Службу автоматизации Azure можно использовать для применения DSC на виртуальных машинах, развернутых в подписках в пределах группы управления.
    3. Согласно текущей стратегии планируется включить настраиваемые политики гостевой конфигурации. После выпуска этой функции использовать службу автоматизации Azure в рамках этих рекомендаций больше не потребуется.

**Применение дополнительных средств управления для подписки на внедряемые облачные решения (периферийная зона)**. При использовании `Corporate IT Subscription` незначительные изменения минимально жизнеспособного продукта системы управления, применяемые к каждой подписке, которая предназначена для поддержки архетипов приложений, могут значительно ускорить описываемые процессы.

В описанных выше рекомендациях группы NSG определялись для блокировки общедоступного трафика и разрешения внутреннего трафика. Кроме того, схема Azure временно позволяла использовать возможности DMZ и Active Directory. Далее при дополнительной настройке ресурсов будет создана новая версия схемы Azure.

1. Шаблон пиринга сетей. Этот шаблон включит пиринговое подключение виртуальной сети в каждой подписке к виртуальной сети центрального узла в подписке на корпоративные ИТ-решения.
    1. В соответствии с инструкциями по применению [эталонной звездообразной архитектуры с общими службами][shared-services] из предыдущего раздела был создан шаблон Resource Manager для включения пиринга виртуальных сетей.
    2. Этот шаблон можно использовать как руководство при изменении шаблона DMZ, используемого выше.
    3. По сути сейчас включается пиринг виртуальных сетей для виртуальной сети DMZ, которая была ранее подключена к локальному пограничному устройству через VPN.
    4. *** Также из этого шаблона рекомендуется удалить VPN, чтобы трафик направлялся непосредственно в локальный центр обработки данных только через подписку на корпоративные ИТ-решения и брандмауэр.
    5. Для применения DSC на размещенных виртуальных машинах с использованием службы автоматизации Azure потребуется дополнительная [сетевая конфигурация](/azure/automation/automation-dsc-overview#network-planning).
2. Измените NSG. Заблокируйте передачу всего общедоступного, А ТАКЖЕ прямого локального трафика в правилах NSG. Через пиринговое подключение виртуальных сетей в подписке на корпоративные ИТ-решения должен проходить только входящий трафик.
    1. Ранее рекомендовалось создать NSG для блокировки передачи всего общедоступного и разрешения всего внутреннего трафика. Теперь необходимо немного изменить правила NSG.
    2. Новая конфигурация NSG должна блокировать передачу всего общедоступного трафика, а также всего трафика из локального центра обработки данных.
    3. Трафик, передаваемый в эту виртуальную сеть, должен поступать только из другой виртуальной сети в рамках этого пирингового подключения.
3. Реализация Центра безопасности Azure.
    1. Настройте Центр безопасности Azure для всех групп управления, которые содержат классификации защищенных данных.
    2. Настройте автоматическую подготовку по умолчанию для выполнения требований к установке исправлений.
    3. Внедрите конфигурации безопасности операционной системы. Команда по обеспечению ИТ-безопасности должна определить такую конфигурацию.
    4. Предоставьте команде по обеспечению ИТ-безопасности поддержку при первом использовании Центра безопасности. Разрешите команде по обеспечению ИТ-безопасности использовать Центр безопасности, но сохраните за собой доступ для постоянного улучшения системы управления.
    5. Создайте шаблон Resource Manager, в котором отражены изменения, требующиеся для настройки Центра безопасности Azure в подписке.
4. Обновление Политики Azure для всех подписок.
    1. Выполните аудит критериев важности и классификации данных и примените их ко всем группам управления и подпискам, чтобы определить подписки с классификациями защищенных данных.
    2. Выполните аудит и разрешите использовать только утвержденные образы ОС.
    3. Выполните аудит и примените гостевые конфигурации на основе требований к безопасности для каждого узла.
5. Обновление Политики Azure для всех подписок, которые содержат классификации данных.
    1. Выполните аудит и примените только стандартные роли.
    2. Выполните аудит и шифрование для всех учетных записей хранения и файлов, хранимых на отдельных узлах.
    3. Выполните аудит и примените новую версию NSG для DMZ.
    4. Выполните аудит и примените утвержденную подсеть виртуальной сети и виртуальную сеть для каждого сетевого интерфейса.
    5. Выполните аудит и примените ограничения определяемых пользователем таблиц маршрутизации.
6. Схема Azure.
    1. Создайте схему Azure с именем `protected-data`.
    2. Включите в эту схему пиринг виртуальных сетей, NSG и шаблоны Центра безопасности Azure.
    3. Убедитесь, что шаблон для Active Directory, созданный ранее, НЕ включен в проект. Все зависимости от Active Directory будет обеспечены в рамках подписки на корпоративные ИТ-решения.
    4. Завершите работу ранее развернутых существующих виртуальных машин Active Directory.
    5. Добавьте новые политики для подписок, содержащих защищенные данные.
    6. Опубликуйте схему для всех групп управления, которые будут содержать защищенные данные.
    7. Примените новую схему к каждой задействованной подписке наряду с существующими схемами.

## <a name="conclusion"></a>Заключение

Добавление описанных процессов и изменений в минимально жизнеспособный продукт системы управления поможет устранить множество рисков, связанных с управлением безопасностью. В совокупности они предоставляют инструменты для мониторинга сетей, идентификации и безопасности, необходимые для защиты данных.

## <a name="next-steps"></a>Дополнительная информация

Так как способы внедрения облачных решений продолжают развиваться, предоставляя дополнительные преимущества для бизнеса, системы управления рисками и облачными решениями также должны эволюционировать. Следующим этапом для вымышленной компании в рамках этого процесса станет поддержка критически важных рабочих нагрузок. На этом этапе требуется внедрение средств для обеспечения согласованности ресурсов.

> [!div class="nextstepaction"]
> [Изменение согласованности ресурсов](./resource-consistency-evolution.md)

<!-- links -->

[shared-services]: ../../../../reference-architectures/hybrid-networking/shared-services.md