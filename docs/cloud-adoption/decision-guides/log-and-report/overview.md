---
title: CAF. Руководство по принятию решений о ведении журналов и создании отчетов
titleSuffix: Microsoft Cloud Adoption Framework for Azure
ms.service: architecture-center
ms.subservice: enterprise-cloud-adoption
ms.custom: governance
ms.date: 02/11/2019
description: Сведения о ведении журналов, создании отчетов и мониторинге, которые играют важнейшую роль при миграции в Azure.
author: rotycenh
ms.openlocfilehash: 36552488872622ec59e2fcf4816da4184c3d4fbf
ms.sourcegitcommit: 273e690c0cfabbc3822089c7d8bc743ef41d2b6e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2019
ms.locfileid: "55902351"
---
# <a name="logging-and-reporting-decision-guide"></a>Руководство по принятию решений о ведении журналов и создании отчетов

Все организации нуждаются в механизмах уведомления ИТ-специалистов о проблемах производительности, работоспособности и безопасности, прежде чем они станут серьезными. Успешная стратегия мониторинга позволяет понять, как работают отдельные компоненты, составляющие рабочие нагрузки и сетевую инфраструктуру. В контексте миграции в общедоступное облако интеграция ведения журналов и создания отчетов с любой из существующих систем мониторинга, а также видимость важных событий и метрик для соответствующего ИТ-персонала крайне важны для обеспечения бесперебойной работы, безопасности и соответствия политикам в вашей организации.

![График возможностей ведения журналов, создания отчетов и мониторинга в порядке увеличения сложности, соответствующих приведенным ниже ссылкам для быстрого перехода](../../_images/discovery-guides/discovery-guide-logs-and-reporting.png)

Перейти к разделу: [Планирование инфраструктуры мониторинга](#planning-your-monitoring-infrastructure) | [Полностью облачные решения](#cloud-native) | [Интеграция с локальными системами](#on-premises-extension) | [Агрегация шлюза](#gateway-aggregation) | [Гибридный мониторинг (локальный)](#hybrid-monitoring-on-premises) | [Гибридный мониторинг (на основе облака)](#hybrid-monitoring-cloud-based) | [Многооблачные решения](#multi-cloud) | [Дополнительные сведения](#learn-more)

Определение стратегии выбора облака главным образом зависит от существующих инвестиций вашей организации в операционные процессы и в некоторой степени от определенных требований к поддержке многооблачной стратегии.

Существует несколько способов ведения журналов и создания отчетов о действиях в облаке. Полностью облачное и централизованное ведение журналов — это два распространенных варианта программного обеспечения как услуги (SaaS), которые определяются структурой подписки и количеством подписок.

## <a name="planning-your-monitoring-infrastructure"></a>Планирование инфраструктуры мониторинга

При планировании развертывания необходимо учитывать, где хранятся данные журналов и как интегрировать облачные службы отчетов и мониторинга с существующими процессами и инструментами.

| Вопрос | Собственные решения в облаке | Интеграция с локальными системами | Гибридный мониторинг | Агрегация шлюза |
|-----|-----|-----|-----|-----|
| Имеется ли у вас существующая локальная инфраструктура мониторинга? | Нет  | Yes | Да |  Нет  |
| Есть ли у вас требования, препятствующие хранению данных журналов во внешних хранилищах? | Нет  | Yes | Нет  | Нет  |
| Вам необходимо интегрировать облачный мониторинг с локальными системами? | Нет  | Нет  | Yes | Нет  |
Необходимо ли обрабатывать или фильтровать данные телеметрии перед их отправкой в системы мониторинга? | Нет  | Нет  | Нет  | Yes |

### <a name="cloud-native"></a>Собственные решения в облаке

Если в вашей организации в настоящее время отсутствуют установленные системы ведения журналов и отчетности или если запланированное облачное развертывание не требуется интегрировать с существующими локальными или другими внешними системами мониторинга, самым простым выбором будет облачное решение SaaS.

В этом случае данные журналов записываются и хранятся в той же облачной среде, что и рабочая нагрузка, в то время как средства ведения журналов и создания отчетов, которые обрабатывают и предоставляют информацию ИТ-персоналу, предлагаются как часть облачной платформы.

Полностью облачные решения ведения журналов могут быть реализованы нерегламентированно для каждой подписки или рабочей нагрузки в небольших или экспериментальных развертываниях и организованы централизованно, чтобы выполнять мониторинг данных журналов по всей облачной инфраструктуре.

**Предположения относительно полностью облачных решений**. Использование полностью облачной системы ведения журналов и отчетности предполагает следующее:

- Вам не нужно интегрировать данные журналов из ваших облачных рабочих нагрузок в существующие локальные системы.
- Вы не будете использовать свои облачные системы отчетности для мониторинга локальных систем.

### <a name="on-premises-extension"></a>Интеграция с локальными системами

Если вам требуется интегрировать облачную телеметрию с локальными системами, не поддерживающими гибридное ведение журналов и создание отчетов, или необходимо поддерживать миграцию приложений и служб с минимальным объемом повторной разработки, вам понадобится развернуть на виртуальных машинах агенты мониторинга, которые будут отправлять данные журналов непосредственно в локальные системы, а не сохранять их в облачной среде.

Для такого сценария облачные ресурсы должны иметь возможность напрямую взаимодействовать с локальными системами с помощью комбинации [гибридной сети](../software-defined-network/hybrid.md) и [облачных доменных служб](../identity/overview.md#cloud-hosted-domain-services). При этом облачная виртуальная сеть функционирует как сетевое расширение локальной среды. Таким образом, облачные рабочие нагрузки могут напрямую взаимодействовать с локальной системой ведения журналов и создания отчетов.

Этот подход основан на существующих инвестициях в средства мониторинга с ограниченными изменениями каких-либо облачных приложений или служб. Часто это самый быстрый подход к поддержке мониторинга во время миграции по методу lift-and-shift. Однако он не предусматривает сбор данных журналов, создаваемых облачными ресурсами PaaS и SaaS, а любые связанные с виртуальной машиной данные журналов, созданные самой облачной платформой, такие как состояние виртуальной машины, исключаются. В результате этот шаблон должен быть временным решением до тех пор, пока не будет реализовано более комплексное решение гибридного мониторинга.

Предположения относительно полностью локальных решений:

- Данные журналов необходимо хранить только в локальной среде (либо в соответствии с техническими требованиями, либо в соответствии с нормативными требованиями или требованиями политики).
- Локальные системы не поддерживают гибридные решения для ведения журналов, создания отчетов или агрегации шлюза.
- Облачные приложения могут отправлять данные телеметрии непосредственно в локальные системы ведения журналов либо можно развернуть на виртуальных машинах с рабочими нагрузками агенты мониторинга, отправляющие данные в локальную среду.
- Рабочие нагрузки не зависят от служб PaaS или SaaS, требующих ведения журналов и создания отчетов на основе облака.

### <a name="gateway-aggregation"></a>Агрегация шлюза

Для сценариев, в которых объем облачных данных телеметрии очень велик или существующим локальным системам мониторинга требуется изменение данных журналов перед обработкой, может понадобиться служба [агрегации шлюза данных журналов](../../../patterns/gateway-aggregation.md).

Служба шлюза развертывается в системе поставщика облачных служб. Затем соответствующие приложения и службы настраиваются, чтобы отправлять данные телеметрии в шлюз вместо системы ведения журналов по умолчанию. После этого шлюз может обрабатывать данные (агрегировать, объединять или иным образом форматировать их), а затем отправлять в службу мониторинга для приема и анализа.

Кроме того, шлюз может использоваться для агрегирования и предварительной обработки данных телеметрии, привязанных к облачным или гибридным системам.

Предположения относительно агрегации шлюза:

- Ожидается очень высокая интенсивность передачи данных телеметрии из облачных приложений или служб.
- Перед отправкой данных телеметрии в системы мониторинга необходимо отформатировать или иным образом оптимизировать их.
- Ваши системы мониторинга используют API или другие механизмы для приема данных журналов после их обработки шлюзом.

### <a name="hybrid-monitoring-on-premises"></a>Гибридный мониторинг (локальный)

Гибридное решение для мониторинга объединяет данные журналов из локальных и облачных ресурсов, обеспечивая интегрированное представление рабочего состояния ИТ-среды.

При наличии инвестиций в локальные системы мониторинга, которые трудно или дорого заменить, может потребоваться интегрировать данные телеметрии из облачных рабочих нагрузок в существующие локальные решения для мониторинга. В гибридной локальной системе мониторинга локальные данные телеметрии продолжают использовать существующую локальную систему мониторинга. Облачные данные телеметрии либо отправляются непосредственно в облачную систему мониторинга, либо хранятся в облаке вместе с рабочими нагрузками, а затем регулярно компилируются и поступают в локальную систему.

**Предположения относительно локального гибридного мониторинга**. Использование локальной системы ведения журналов и отчетов для гибридного мониторинга предполагает следующее:

- Для мониторинга облачных рабочих нагрузок необходимо использовать существующие локальные системы отчетов.
- Необходимо сохранить право владения на локальные данные журналов.
- Локальные системы управления используют API или другие механизмы для приема данных журналов из облачных систем.

> [!TIP]
> Как часть итеративного характера миграции в облако вероятен переход от отдельного облачного и локального мониторинга к частичному гибридному подходу. Убедитесь, что изменения в архитектуре мониторинга соответствуют общим процессам ИТ и операционным процессам.

### <a name="hybrid-monitoring-cloud-based"></a>Гибридный мониторинг (облачный)

Если у вас нет острой необходимости поддерживать локальную систему мониторинга или вы хотите заменить локальные системы мониторинга решением SaaS, вы также можете интегрировать локальные данные журналов с централизованной облачной системой мониторинга.

Как и при централизованной локальной системе мониторинга, в этом случае облачные рабочие нагрузки будут использовать механизм ведения журналов в облаке по умолчанию, а локальные приложения и службы будут либо отправлять каталог телеметрии в облачную систему ведения журналов, либо агрегировать эти данные для загрузки в облачную систему на регулярной основе. Облачная система мониторинга будет служить в качестве основной системы мониторинга и отчетности для всей ИТ-инфраструктуры.

Предположения относительно облачного гибридного мониторинга: Использование облачной системы ведения журналов и отчетов для гибридного мониторинга предполагает следующее:

- Вы не зависите от существующих локальных систем мониторинга.
- Рабочие нагрузки не имеют нормативных требований или требований политики для локального хранения данных журналов.
- Облачные системы мониторинга используют API или другие механизмы для приема данных журналов из локальных приложений и служб.

### <a name="multi-cloud"></a>Многооблачные решения

Интеграция возможностей ведения журналов и создания отчетов на платформе с несколькими облаками может быть достаточно сложной. Службы, предлагаемые различными платформами, часто не сопоставимы напрямую, и возможности ведения журналов и телеметрии, предоставляемые этими службами, также различаются.
Чтобы поддерживать ведение журналов в нескольких облаках, часто требуется использовать службы шлюза для преобразования данных журналов в общий формат перед их отправкой в гибридное решение ведения журналов.

## <a name="learn-more"></a>Подробнее

[Azure Monitor](/azure/azure-monitor/overview) — это стандартная служба создания отчетов и мониторинга в Azure. Служба предоставляет:

- Унифицированную платформу для сбора телеметрии приложений, телеметрии узлов (например, виртуальных машин), метрик контейнеров, метрик платформы Azure и журналов событий.
- Визуализацию, запросы, оповещения и аналитические инструменты. Это позволяет получать аналитические сведения о виртуальных машинах, гостевых операционных системах, виртуальных сетях и событиях приложений рабочей нагрузки.
- [REST API](/azure/monitoring-and-diagnostics/monitoring-rest-api-walkthrough) для интеграции со внешними службами и автоматизации служб мониторинга и оповещения.
- [Интеграцию](/azure/monitoring-and-diagnostics/monitoring-partners) со многими популярными сторонними поставщиками.
