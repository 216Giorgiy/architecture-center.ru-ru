---
title: Тестирование приложений Azure для обеспечения устойчивости и доступности
description: Способы тестирования надежность приложений в Azure
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: cf33a859540810279b1cb85be5a6fb2ebe4500dc
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646638"
---
# <a name="testing-azure-applications-for-resiliency-and-availability"></a>Тестирование приложений Azure для обеспечения устойчивости и доступности

Чтобы протестировать устойчивость, следует проверить, как рабочая нагрузка end-to-end выполняется в условиях Периодические сбои.

Выполнение тестов в рабочей среде с помощью обоих синтетические и реальных пользовательских данных. Тестирования и производственная среда редко идентичны, поэтому очень важно для проверки приложения в рабочей среде с помощью [сине зеленый](https://martinfowler.com/bliki/BlueGreenDeployment.html) или [раннее развертывание](https://martinfowler.com/bliki/CanaryRelease.html). Таким образом, вы тестируете приложение в реальных условиях, поэтому можно быть уверенным, что она будет работать должным образом, когда полностью развернут.

Как часть плана тестирования включают:

- Автоматическое тестирование перед развертыванием
- Тестирование посредством внесения ошибок
- Нагрузочное тестирование (пик)
- При проверке аварийного восстановления
- Сторонняя служба тестирования

Тестирование — это итеративный процесс. Протестируйте приложение, измерьте результат, проанализируйте и устраните все возникающие сбои и повторите процесс.

## <a name="perform-fault-injection-testing"></a>Выполните тестирование путем внедрения ошибки

Тестирование посредством внесения ошибок, проверьте отказоустойчивость системы во время сбоев либо путем инициирования фактических сбоев, либо путем их имитации. Ниже приведены некоторые стратегии, позволяющие вызывать сбои.

- Завершение работы экземпляров виртуальной машины (VM).
- прекращение работы процессов;
- Завершите срок действия сертификатов.
- Измените ключи доступа.
- Завершите работу службы DNS на контроллерах домена.
- Ограничьте доступные системные ресурсы, такие как ОЗУ или количество потоков.
- Отключите диски.
- Повторно разверните виртуальную машину.

План тестирования должно предусматривать возможных точек сбоя определены на этапе проектирования, помимо распространенных ошибок:

- Протестируйте приложение в среде, как можно ближе к рабочей среде, максимально.
- Сбои при тестировании в сочетании.
- Измерьте время восстановления и убедитесь, что ваши бизнес-требованиям.
- Убедитесь, что сбои не каскадируются и обрабатываются изолированно.

Дополнительные сведения о сценарии сбоев, см. в разделе [сбоя и аварийное восстановление для приложений Azure](./disaster-recovery.md).

## <a name="test-under-peak-loads"></a>Тестирование при пиковых нагрузках

Нагрузочное тестирование имеет решающее значение для обнаружения сбоев, которые происходят только под нагрузкой, таких как базы данных серверной части перегрузку или регулирования службы. Тестирование для пиковой нагрузки и ожидаемое увеличение пиковой нагрузки, используя рабочие данные или искусственные данные, как можно ближе к рабочих данных максимально. Ваша цель состоит в том, как ведет себя приложение в реальных условиях.

## <a name="conduct-disaster-recovery-drills"></a>Проведение аварийного восстановления

Начните с хорошего плана аварийного восстановления и проверить его периодически, чтобы убедиться, что оно работает.

Для виртуальных машин в Azure, можно использовать [Azure Site Recovery](/azure/site-recovery/azure-to-azure-quickstart/) для репликации и выполнить [аварийного восстановления](/azure/site-recovery/azure-to-azure-tutorial-dr-drill/) без влияния на рабочие приложения или текущую репликацию.

### <a name="failover-and-failback-testing"></a>Отработка отказа и восстановления размещения тестирования

Тестирование отработки отказа и восстановления размещения, чтобы убедиться, что зависимые службы в приложении восстановят работу синхронизировано во время аварийного восстановления. Изменения систем и операций могут повлиять на функции отработки отказа и восстановления размещения, но влияние может быть незамечен до сбой основной системы, или перегрузке. Тестирование отработки отказа *перед* они необходимы для компенсации за это реальной ошибкой. Кроме того, убедитесь, что зависимые службы отработка отказа и восстановление размещения в правильном порядке.

Если вы используете [Azure Site Recovery](/azure/site-recovery/) для репликации виртуальных машин, выполнять аварийное восстановление периодически, выполнив тестовую отработку отказа для проверки стратегии репликации. Тестовая отработка отказа не влияет на текущую репликацию виртуальных Машин или рабочую среду. Дополнительные сведения см. в разделе [выполнение отработки аварийного восстановления в Azure](/azure/site-recovery/site-recovery-test-failover-to-azure).

### <a name="simulation-testing"></a>Имитационное тестирование

Имитационное тестирование подразумевает создание небольших, реальных ситуаций. Моделирование демонстрации эффективности решения в плане восстановления и выделить все проблемы, которые не были обработаны должным образом.

При выполнении имитационное тестирование, следуйте рекомендациям.

- Провести моделирование таким образом, чтобы не нарушали фактическую деятельность компании, но подчас реальной ситуации.
- Убедитесь, что моделируемые сценарии являются полностью управляемыми. Если план восстановления, произошла ошибка, ситуацию можно восстановить нормальный режим работы без ущерба.
- Проинформируйте руководство о когда и как будет выполняться имитация. Ваш план подробно описать временные рамки и затрагиваемые ресурсы.

## <a name="test-health-probes-for-load-balancers-and-traffic-managers"></a>Проверку работоспособности подсистемы балансировки нагрузки и диспетчеров трафика

Настройка и проверка пробы работоспособности для подсистемы балансировки нагрузки и диспетчеров трафика. Убедитесь, что конечная точка работоспособности проверяет важные части системы и реагирует соответствующим образом.

- Для [диспетчера трафика Azure](/azure/traffic-manager/traffic-manager-overview/), проверке работоспособности определяется, следует ли выполнить отработку отказа в другой регион. Конечная точка работоспособности должна проверять любые критические зависимости, которые развертываются в одном регионе.
- Для [Azure Load Balancer](/azure/load-balancer/load-balancer-overview/), проверке работоспособности определяется, следует ли удалять виртуальную Машину из ротации. Конечная точка работоспособности должны сообщать о работоспособности виртуальной машины. Не включайте в развертывание другие уровни или внешние службы. В противном случае при сбое вне виртуальной машины подсистема балансировки нагрузки удалит виртуальную машину из ротации.

Инструкции по реализации мониторинга работоспособности в приложении см. в описании [шаблона мониторинга конечной точки работоспособности](../patterns/health-endpoint-monitoring.md).

## <a name="test-monitoring-systems"></a>Тестирование системы мониторинга

Включите мониторинг систем в плане тестирования. Автоматизированных систем отработки отказа и восстановления размещения зависят от того, правильность работы отслеживания и инструментирования. Панелей мониторинга для визуализации системные оповещения о работоспособности и оператор также зависит от того, наличие точной мониторинга и инструментирования. Если происходит сбой этих элементов, они пропускают важную информацию или сообщают неточные данные, поэтому оператор может не понять, что система работает неправильно.

## <a name="include-third-party-services-in-test-scenarios"></a>Включить сторонние службы в сценарии тестирования

Если приложение имеет зависимости от сторонних служб, указать расположение и как эти службы может произойти сбой, и что в силу этих сбоев окажет на приложения. Имейте в виду уровня службы соглашение об уровне службы независимых производителей и влияние, возможно, во-первых, на ваш план аварийного восстановления.

Сторонняя служба может не обеспечивать возможности мониторинга и диагностики, поэтому важно для входа свои вызовы и сопоставлять их с работоспособности приложений и ведения журналов с использованием уникального идентификатора диагностики. Дополнительные сведения о методиках мониторинга и диагностики см. в разделе [руководство по мониторингу и диагностике](../best-practices/monitoring.md).

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Развертывание для обеспечения устойчивости и доступности](./deploy.md)
